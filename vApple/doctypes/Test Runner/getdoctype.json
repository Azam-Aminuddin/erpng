{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2017-06-26 10:57:19.976624","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Module Path","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Test Runner","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ebfa062e9b","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:29.018991","parenttype":"DocType","fieldname":"module_path","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-06-26 10:57:19.976624","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"App","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Test Runner","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3224d7fa26","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:29.018991","parenttype":"DocType","fieldname":"app","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-06-26 10:57:19.976624","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Output","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Test Runner","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1215de3823","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:29.018991","parenttype":"DocType","fieldname":"output","fieldtype":"HTML","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2017-06-26 10:57:19.976624","__list_js":null,"track_changes":1,"track_seen":0,"sort_order":"DESC","__linked_with":null,"owner":"Administrator","editable_grid":1,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":0,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/frappe/frappe/core/doctype/test_runner/test_runner.js */\n\n// Copyright (c) 2017, Frappe Technologies and contributors\n// For license information, please see license.txt\n\nfrappe.ui.form.on('Test Runner', {\n\trefresh: (frm) => {\n\t\tfrm.disable_save();\n\t\tfrm.page.set_primary_action(__(\"Run Tests\"), () => {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tlet wrapper = $(frm.fields_dict.output.wrapper).empty();\n\t\t\t\t$(\"<p>Loading...</p>\").appendTo(wrapper);\n\n\t\t\t\t// all tests\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: 'frappe.core.doctype.test_runner.test_runner.get_test_js',\n\t\t\t\t\targs: { test_path: frm.doc.module_path }\n\t\t\t\t}).always((data) => {\n\t\t\t\t\t$(\"<div id='qunit'></div>\").appendTo(wrapper.empty());\n\t\t\t\t\tfrm.events.run_tests(frm, data.message);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t},\n\trun_tests: function(frm, files) {\n\t\tfrappe.flags.in_test = true;\n\t\tlet require_list = [\n\t\t\t\"assets/frappe/js/lib/jquery/qunit.js\",\n\t\t\t\"assets/frappe/js/lib/jquery/qunit.css\"\n\t\t].concat();\n\n\t\tfrappe.require(require_list, () => {\n\t\t\tfiles.forEach((f) => {\n\t\t\t\tfrappe.dom.eval(f.script);\n\t\t\t});\n\n\t\t\tQUnit.config.notrycatch = true;\n\n\t\t\twindow.onerror = function(msg, url, lineNo, columnNo, error) {\n\t\t\t\tconsole.log(error.stack); // eslint-disable-line\n\t\t\t\t$('<div id=\"frappe-qunit-done\"></div>').appendTo($('body'));\n\t\t\t};\n\n\t\t\tQUnit.testDone(function(details) {\n\t\t\t\t// var result = {\n\t\t\t\t// \t\"Module name\": details.module,\n\t\t\t\t// \t\"Test name\": details.name,\n\t\t\t\t// \t\"Assertions\": {\n\t\t\t\t// \t\t\"Total\": details.total,\n\t\t\t\t// \t\t\"Passed\": details.passed,\n\t\t\t\t// \t\t\"Failed\": details.failed\n\t\t\t\t// \t},\n\t\t\t\t// \t\"Skipped\": details.skipped,\n\t\t\t\t// \t\"Todo\": details.todo,\n\t\t\t\t// \t\"Runtime\": details.runtime\n\t\t\t\t// };\n\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\t// console.log(JSON.stringify(result, null, 2));\n\n\t\t\t\tdetails.assertions.map(a => {\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tconsole.log(`${a.result ? '\u2714' : '\u2717'}  ${a.message}`);\n\t\t\t\t});\n\n\t\t\t});\n\t\t\tQUnit.load();\n\n\t\t\tQUnit.done(({ total, failed, passed, runtime }) => {\n\t\t\t\t// flag for selenium that test is done\n\n\t\t\t\tconsole.log( `Total: ${total}, Failed: ${failed}, Passed: ${passed}, Runtime: ${runtime}` );  // eslint-disable-line\n\n\t\t\t\tif(failed) {\n\t\t\t\t\tconsole.log('Tests Failed'); // eslint-disable-line\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Tests Passed'); // eslint-disable-line\n\t\t\t\t}\n\t\t\t\tfrappe.set_route('Form', 'Test Runner', 'Test Runner');\n\n\t\t\t\t$('<div id=\"frappe-qunit-done\"></div>').appendTo($('body'));\n\n\t\t\t});\n\t\t});\n\n\t}\n});\n","__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"engine":"InnoDB","allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"Core","doctype":"DocType","__dashboard":{},"__kanban_boards":[],"issingle":1,"__listview_template":null,"name":"Test Runner","idx":0,"hide_toolbar":0,"__workflow_docs":[],"modified":"2017-07-19 03:22:33.221169","is_submittable":0,"name_case":"","__calendar_js":null,"permissions":[{"creation":"2017-06-26 10:57:19.976624","share":1,"doctype":"DocPerm","owner":"Administrator","export":0,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"Administrator","print":1,"docstatus":0,"permlevel":0,"parent":"Test Runner","read":1,"import":0,"report":0,"apply_user_permissions":0,"name":"198077c989","idx":1,"amend":0,"modified":"2017-09-29 01:32:29.018991","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":1,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}