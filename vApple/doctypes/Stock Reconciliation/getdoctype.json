{"docs":[{"fields":[{"collapsible":0,"no_copy":1,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Series","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9f5cb125eb","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"naming_series","fieldtype":"Select","options":"SR/","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Company","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":1,"unique":0,"name":"7967b6d6fc","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"company","fieldtype":"Link","options":"Company","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2013-03-28 10:35:31","search_fields":["posting_date"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":1,"length":0,"label":"Amended From","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Document","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5719cafe95","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"amended_from","fieldtype":"Link","options":"Stock Reconciliation","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"05f465a13e","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"col1","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Date","creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","oldfieldname":"reconciliation_date","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Posting Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"2446ac74e0","idx":5,"default":"Today","in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"posting_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Time","creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","oldfieldname":"reconciliation_time","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Posting Time","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"32f4b788ee","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"posting_time","fieldtype":"Time","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Edit Posting Date and Time","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1b2e2456d5","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"set_posting_time","fieldtype":"Check","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"633312af7c","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"sb9","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Items","print_hide_if_no_value":0,"allow_bulk_edit":1,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c5d0e32803","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"items","fieldtype":"Table","options":"Stock Reconciliation Item","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"12d4c727ae","idx":10,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"section_break_9","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Difference Account","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"cb8fbf3111","idx":11,"in_standard_filter":1,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"expense_account","fieldtype":"Link","options":"Account","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":["parent_cost_center","is_group"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Cost Center","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f512a0369f","idx":12,"in_standard_filter":1,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"cost_center","fieldtype":"Link","options":"Cost Center","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Reconciliation JSON","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c20e832400","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"reconciliation_json","fieldtype":"Long Text","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"b2a07080bd","idx":14,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"column_break_13","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-28 10:35:31","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Difference Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c57d5ebe5f","idx":15,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.990173","parenttype":"DocType","fieldname":"difference_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2013-03-28 10:35:31","search_fields":"posting_date","track_changes":0,"track_seen":0,"sort_order":"DESC","__linked_with":null,"__dashboard":{},"owner":"Administrator","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"Document","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":1,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.js */\n\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide(\"erpnext.stock\");\n\nfrappe.ui.form.on(\"Stock Reconciliation\", {\n\tonload: function(frm) {\n\t\tfrm.add_fetch(\"item_code\", \"item_name\", \"item_name\");\n\n\t\t// end of life\n\t\tfrm.set_query(\"item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\n\t\t\t\tfilters:{\n\t\t\t\t\t\"is_stock_item\": 1,\n\t\t\t\t\t\"has_serial_no\": 0\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (frm.doc.company) {\n\t\t\terpnext.queries.setup_queries(frm, \"Warehouse\", function() {\n\t\t\t\treturn erpnext.queries.warehouse(frm.doc);\n\t\t\t});\n\t\t}\n\t},\n\n\trefresh: function(frm) {\n\t\tif(frm.doc.docstatus < 1) {\n\t\t\tfrm.add_custom_button(__(\"Items\"), function() {\n\t\t\t\tfrm.events.get_items(frm);\n\t\t\t});\n\t\t}\n\n\t\tif(frm.doc.company) {\n\t\t\tfrm.trigger(\"toggle_display_account_head\");\n\t\t}\n\t},\n\n\tget_items: function(frm) {\n\t\tfrappe.prompt({label:\"Warehouse\", fieldtype:\"Link\", options:\"Warehouse\", reqd: 1},\n\t\t\tfunction(data) {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod:\"erpnext.stock.doctype.stock_reconciliation.stock_reconciliation.get_items\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\twarehouse: data.warehouse,\n\t\t\t\t\t\tposting_date: frm.doc.posting_date,\n\t\t\t\t\t\tposting_time: frm.doc.posting_time\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tvar items = [];\n\t\t\t\t\t\tfrm.clear_table(\"items\");\n\t\t\t\t\t\tfor(var i=0; i< r.message.length; i++) {\n\t\t\t\t\t\t\tvar d = frm.add_child(\"items\");\n\t\t\t\t\t\t\t$.extend(d, r.message[i]);\n\t\t\t\t\t\t\tif(!d.qty) d.qty = null;\n\t\t\t\t\t\t\tif(!d.valuation_rate) d.valuation_rate = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfrm.refresh_field(\"items\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t, __(\"Get Items\"), __(\"Update\"));\n\t},\n\n\tset_valuation_rate_and_qty: function(frm, cdt, cdn) {\n\t\tvar d = frappe.model.get_doc(cdt, cdn);\n\t\tif(d.item_code && d.warehouse) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.stock.doctype.stock_reconciliation.stock_reconciliation.get_stock_balance_for\",\n\t\t\t\targs: {\n\t\t\t\t\titem_code: d.item_code,\n\t\t\t\t\twarehouse: d.warehouse,\n\t\t\t\t\tposting_date: frm.doc.posting_date,\n\t\t\t\t\tposting_time: frm.doc.posting_time\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"qty\", r.message.qty);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"valuation_rate\", r.message.rate);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_qty\", r.message.qty);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_valuation_rate\", r.message.rate);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_amount\", r.message.rate * r.message.qty);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"amount\", r.message.rate * r.message.qty);\n\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tset_item_code: function(doc, cdt, cdn) {\n\t\tvar d = frappe.model.get_doc(cdt, cdn);\n\t\tif (d.barcode) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_item_code\",\n\t\t\t\targs: {\"barcode\": d.barcode },\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exe){\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", r.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tset_amount_quantity: function(doc, cdt, cdn) {\n\t\tvar d = frappe.model.get_doc(cdt, cdn);\n\t\tif (d.qty & d.valuation_rate) {\n\t\t\tfrappe.model.set_value(cdt, cdn, \"amount\", flt(d.qty) * flt(d.valuation_rate));\n\t\t\tfrappe.model.set_value(cdt, cdn, \"quantity_difference\", flt(d.qty) - flt(d.current_qty));\n\t\t\tfrappe.model.set_value(cdt, cdn, \"amount_difference\", flt(d.amount) - flt(d.current_amount));\n\t\t}\n\t},\n\tcompany: function(frm) {\n\t\tfrm.trigger(\"toggle_display_account_head\");\n\t},\n\ttoggle_display_account_head: function(frm) {\n\t\tfrm.toggle_display(['expense_account', 'cost_center'],\n\t\t\terpnext.is_perpetual_inventory_enabled(frm.doc.company));\n\t}\n});\n\nfrappe.ui.form.on(\"Stock Reconciliation Item\", {\n\tbarcode: function(frm, cdt, cdn) {\n\t\tfrm.events.set_item_code(frm, cdt, cdn);\n\t},\n\twarehouse: function(frm, cdt, cdn) {\n\t\tfrm.events.set_valuation_rate_and_qty(frm, cdt, cdn);\n\t},\n\titem_code: function(frm, cdt, cdn) {\n\t\tfrm.events.set_valuation_rate_and_qty(frm, cdt, cdn);\n\t},\n\tqty: function(frm, cdt, cdn) {\n\t\tfrm.events.set_amount_quantity(frm, cdt, cdn);\n\t},\n\tvaluation_rate: function(frm, cdt, cdn) {\n\t\tfrm.events.set_amount_quantity(frm, cdt, cdn);\n\t}\n\n});\n\nerpnext.stock.StockReconciliation = erpnext.stock.StockController.extend({\n\tonload: function() {\n\t\tthis.set_default_expense_account();\n\t},\n\n\tset_default_expense_account: function() {\n\t\tvar me = this;\n\t\tif(this.frm.doc.company) {\n\t\t\tif (erpnext.is_perpetual_inventory_enabled(this.frm.doc.company) && !this.frm.doc.expense_account) {\n\t\t\t\treturn this.frm.call({\n\t\t\t\t\tmethod: \"erpnext.accounts.utils.get_company_default\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\t\"fieldname\": \"stock_adjustment_account\",\n\t\t\t\t\t\t\"company\": this.frm.doc.company\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\tme.frm.set_value(\"expense_account\", r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tsetup: function() {\n\t\tvar me = this;\n\n\t\tthis.setup_posting_date_time_check();\n\n\t\tif (me.frm.doc.company && erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\n\t\t\tthis.frm.add_fetch(\"company\", \"stock_adjustment_account\", \"expense_account\");\n\t\t\tthis.frm.add_fetch(\"company\", \"cost_center\", \"cost_center\");\n\t\t}\n\t\tthis.frm.fields_dict[\"expense_account\"].get_query = function() {\n\t\t\tif(erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\n\t\t\t\treturn {\n\t\t\t\t\t\"filters\": {\n\t\t\t\t\t\t'company': me.frm.doc.company,\n\t\t\t\t\t\t\"is_group\": 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.frm.fields_dict[\"cost_center\"].get_query = function() {\n\t\t\tif(erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\n\t\t\t\treturn {\n\t\t\t\t\t\"filters\": {\n\t\t\t\t\t\t'company': me.frm.doc.company,\n\t\t\t\t\t\t\"is_group\": 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tif(this.frm.doc.docstatus==1) {\n\t\t\tthis.show_stock_ledger();\n\t\t\tif (erpnext.is_perpetual_inventory_enabled(this.frm.doc.company)) {\n\t\t\t\tthis.show_general_ledger();\n\t\t\t}\n\t\t}\n\t},\n\n});\n\ncur_frm.cscript = new erpnext.stock.StockReconciliation({frm: cur_frm});\n","__tree_js":null,"menu_index":0,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"allow_guest_to_view":0,"istable":0,"description":"This tool helps you to update or fix the quantity and valuation of stock in the system. It is typically used to synchronise the system values and what actually exists in your warehouses.","has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":1,"beta":0,"read_only_onload":0,"module":"Stock","doctype":"DocType","autoname":"naming_series:","__kanban_boards":[],"issingle":0,"icon":"fa fa-upload-alt","__listview_template":null,"name":"Stock Reconciliation","idx":1,"hide_toolbar":0,"__workflow_docs":[],"modified":"2017-08-02 23:54:28.516007","is_submittable":1,"__calendar_js":null,"__list_js":null,"permissions":[{"creation":"2013-03-28 10:35:31","share":1,"doctype":"DocPerm","owner":"Administrator","export":0,"cancel":1,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":1,"write":1,"role":"Stock Manager","print":0,"docstatus":0,"permlevel":0,"parent":"Stock Reconciliation","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"b8a7d22c24","idx":1,"amend":1,"modified":"2017-09-29 01:32:39.990173","email":0,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":0,"__custom_js":"","__print_formats":[]},{"fields":[{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Barcode","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ac8f7a636e","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"barcode","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":["item_name","description","item_group","customer_code"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":1,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Item Code","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":3,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"04965e138c","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"item_code","fieldtype":"Link","options":"Item","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":1,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Item Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8875341ca5","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"item_name","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Warehouse","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":3,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e12be9f0cd","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"warehouse","fieldtype":"Link","options":"Warehouse","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5e0a466ab0","idx":5,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"column_break_6","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Quantity","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"04051c48cd","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"qty","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Valuation Rate","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"456e4b7a9d","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"valuation_rate","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9640ae89d4","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Before reconciliation","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"b1f7de1360","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"section_break_3","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Current Qty","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ec3a2a04e7","idx":10,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"current_qty","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"6a79da1f00","idx":11,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"column_break_9","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Current Valuation Rate","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"109c5f5715","idx":12,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"current_valuation_rate","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Current Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c447ed3e50","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"current_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1ad65acb1f","idx":14,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"section_break_14","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Quantity Difference","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"827b357057","idx":15,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"quantity_difference","fieldtype":"Read Only","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5fe91511f6","idx":16,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"column_break_16","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2015-02-17 01:06:05.072764","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Amount Difference","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Stock Reconciliation Item","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c55ad3226f","idx":17,"in_standard_filter":0,"modified":"2017-09-29 01:32:39.826507","parenttype":"DocType","fieldname":"amount_difference","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2015-02-17 01:06:05.072764","__list_js":null,"track_changes":1,"track_seen":0,"sort_order":"DESC","__linked_with":null,"owner":"Administrator","editable_grid":1,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"Other","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":null,"custom":0,"max_attachments":0,"__js":null,"__tree_js":null,"menu_index":0,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"engine":"InnoDB","allow_guest_to_view":0,"istable":1,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"Stock","doctype":"DocType","__dashboard":null,"__kanban_boards":null,"issingle":0,"__listview_template":null,"name":"Stock Reconciliation Item","idx":0,"hide_toolbar":0,"__workflow_docs":null,"modified":"2017-08-03 00:03:40.412071","is_submittable":0,"name_case":"","__calendar_js":null,"permissions":[],"quick_entry":1,"__custom_js":null,"__print_formats":null}],"user_settings":"{}"}