{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"65090c415d","idx":1,"default":"Today","in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Department","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"7a6e2ff414","idx":2,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"department","fieldtype":"Link","options":"Department","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a496f5a65e","idx":3,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"column_break_3","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Branch","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d1c02f9914","idx":4,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"branch","fieldtype":"Link","options":"Branch","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Company","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c5f2491cbc","idx":5,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"company","fieldtype":"Link","options":"Company","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Unmarked Attendance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"date","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"6e12de4d47","idx":6,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"unmarked_attendance_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Employees HTML","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"49329ac596","idx":7,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"employees_html","fieldtype":"HTML","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Marked Attendance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"date","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"05c0e360a0","idx":8,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"marked_attendance_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-01-27 14:59:47.849379","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Marked Attendance HTML","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Employee Attendance Tool","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c9004014fe","idx":9,"in_standard_filter":0,"modified":"2017-06-09 23:51:57.333802","parenttype":"DocType","fieldname":"marked_attendance_html","fieldtype":"HTML","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2016-01-27 14:59:47.849379","__list_js":null,"track_changes":0,"track_seen":0,"sort_order":"DESC","__linked_with":null,"owner":"Administrator","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"","hide_heading":1,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":0,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/hr/doctype/employee_attendance_tool/employee_attendance_tool.js */\n\nfrappe.ui.form.on(\"Employee Attendance Tool\", {\n\trefresh: function(frm) {\n\t\tfrm.disable_save();\n\t},\n\t\n\tonload: function(frm) {\n\t\tfrm.doc.department = frm.doc.branch = frm.doc.company = \"All\";\n\t\tfrm.set_value(\"date\", frappe.datetime.get_today());\n\t\terpnext.employee_attendance_tool.load_employees(frm);\n\t},\n\n\tdate: function(frm) {\n\t\terpnext.employee_attendance_tool.load_employees(frm);\n\t},\n\n\tdepartment: function(frm) {\n\t\terpnext.employee_attendance_tool.load_employees(frm);\n\t},\n\n\tbranch: function(frm) {\n\t\terpnext.employee_attendance_tool.load_employees(frm);\n\t},\n\n\tcompany: function(frm) {\n\t\terpnext.employee_attendance_tool.load_employees(frm);\n\t}\n\t\n});\n\n\nerpnext.employee_attendance_tool = {\n\tload_employees: function(frm) {\n\t\tif(frm.doc.date) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.get_employees\",\n\t\t\t\targs: {\n\t\t\t\t\tdate: frm.doc.date,\n\t\t\t\t\tdepartment: frm.doc.department,\n\t\t\t\t\tbranch: frm.doc.branch,\n\t\t\t\t\tcompany: frm.doc.company\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.message['unmarked'].length > 0) {\n\t\t\t\t\t\tunhide_field('unmarked_attendance_section')\n\t\t\t\t\t\tif(!frm.employee_area) {\n\t\t\t\t\t\t\tfrm.employee_area = $('<div>')\n\t\t\t\t\t\t\t.appendTo(frm.fields_dict.employees_html.wrapper);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfrm.EmployeeSelector = new erpnext.EmployeeSelector(frm, frm.employee_area, r.message['unmarked'])\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\thide_field('unmarked_attendance_section')\n\t\t\t\t\t}\n\n\t\t\t\t\tif(r.message['marked'].length > 0) {\n\t\t\t\t\t\tunhide_field('marked_attendance_section')\n\t\t\t\t\t\tif(!frm.marked_employee_area) {\n\t\t\t\t\t\t\tfrm.marked_employee_area = $('<div>')\n\t\t\t\t\t\t\t\t.appendTo(frm.fields_dict.marked_attendance_html.wrapper);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfrm.marked_employee = new erpnext.MarkedEmployee(frm, frm.marked_employee_area, r.message['marked'])\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\thide_field('marked_attendance_section')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nerpnext.MarkedEmployee = Class.extend({\n\tinit: function(frm, wrapper, employee) {\n\t\tthis.wrapper = wrapper;\n\t\tthis.frm = frm;\n\t\tthis.make(frm, employee);\n\t},\n\tmake: function(frm, employee) {\n\t\tvar me = this;\n\t\t$(this.wrapper).empty();\n\n\t\tvar row;\n\t\t$.each(employee, function(i, m) {\n\t\t\tvar attendance_icon = \"fa fa-check\";\n\t\t\tvar color_class = \"\";\n\t\t\tif(m.status == \"Absent\") {\n\t\t\t\tattendance_icon = \"fa fa-check-empty\"\n\t\t\t\tcolor_class = \"text-muted\";\n\t\t\t}\n\t\t\telse if(m.status == \"Half Day\") {\n\t\t\t\tattendance_icon = \"fa fa-check-minus\"\n\t\t\t}\n\n\t\t\tif (i===0 || i % 4===0) {\n\t\t\t\trow = $('<div class=\"row\"></div>').appendTo(me.wrapper);\n\t\t\t}\n\n\t\t\t$(repl('<div class=\"col-sm-3 %(color_class)s\">\\\n\t\t\t\t<label class=\"marked-employee-label\"><span class=\"%(icon)s\"></span>\\\n\t\t\t\t%(employee)s</label>\\\n\t\t\t\t</div>', {\n\t\t\t\t\temployee: m.employee_name,\n\t\t\t\t\ticon: attendance_icon,\n\t\t\t\t\tcolor_class: color_class\n\t\t\t\t})).appendTo(row);\n\t\t});\n\t}\n});\n\n\nerpnext.EmployeeSelector = Class.extend({\n\tinit: function(frm, wrapper, employee) {\n\t\tthis.wrapper = wrapper;\n\t\tthis.frm = frm;\n\t\tthis.make(frm, employee);\n\t},\n\tmake: function(frm, employee) {\n\t\tvar me = this;\n\n\t\t$(this.wrapper).empty();\n\t\tvar employee_toolbar = $('<div class=\"col-sm-12 top-toolbar\">\\\n\t\t\t<button class=\"btn btn-default btn-add btn-xs\"></button>\\\n\t\t\t<button class=\"btn btn-xs btn-default btn-remove\"></button>\\\n\t\t\t</div>').appendTo($(this.wrapper));\n\n\t\tvar mark_employee_toolbar = $('<div class=\"col-sm-12 bottom-toolbar\">\\\n\t\t\t<button class=\"btn btn-primary btn-mark-present btn-xs\"></button>\\\n\t\t\t<button class=\"btn btn-default btn-mark-absent btn-xs\"></button>\\\n\t\t\t<button class=\"btn btn-default btn-mark-half-day btn-xs\"></button></div>')\n\n\t\temployee_toolbar.find(\".btn-add\")\n\t\t\t.html(__('Check all'))\n\t\t\t.on(\"click\", function() {\n\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\tif(!$(check).is(\":checked\")) {\n\t\t\t\t\t\tcheck.checked = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\temployee_toolbar.find(\".btn-remove\")\n\t\t\t.html(__('Uncheck all'))\n\t\t\t.on(\"click\", function() {\n\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\tif($(check).is(\":checked\")) {\n\t\t\t\t\t\tcheck.checked = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\tmark_employee_toolbar.find(\".btn-mark-present\")\n\t\t\t.html(__('Mark Present'))\n\t\t\t.on(\"click\", function() {\n\t\t\t\tvar employee_present = [];\n\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\tif($(check).is(\":checked\")) {\n\t\t\t\t\t\temployee_present.push(employee[i]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\n\t\t\t\t\targs:{\n\t\t\t\t\t\t\"employee_list\":employee_present,\n\t\t\t\t\t\t\"status\":\"Present\",\n\t\t\t\t\t\t\"date\":frm.doc.date,\n\t\t\t\t\t\t\"company\":frm.doc.company\n\t\t\t\t\t},\n\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\tmark_employee_toolbar.find(\".btn-mark-absent\")\n\t\t\t.html(__('Mark Absent'))\n\t\t\t.on(\"click\", function() {\n\t\t\t\tvar employee_absent = [];\n\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\tif($(check).is(\":checked\")) {\n\t\t\t\t\t\temployee_absent.push(employee[i]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\n\t\t\t\t\targs:{\n\t\t\t\t\t\t\"employee_list\":employee_absent,\n\t\t\t\t\t\t\"status\":\"Absent\",\n\t\t\t\t\t\t\"date\":frm.doc.date,\n\t\t\t\t\t\t\"company\":frm.doc.company\n\t\t\t\t\t},\n\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\n\t\tmark_employee_toolbar.find(\".btn-mark-half-day\")\n\t\t\t.html(__('Mark Half Day'))\n\t\t\t.on(\"click\", function() {\n\t\t\t\tvar employee_half_day = [];\n\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\tif($(check).is(\":checked\")) {\n\t\t\t\t\t\temployee_half_day.push(employee[i]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\n\t\t\t\t\targs:{\n\t\t\t\t\t\t\"employee_list\":employee_half_day,\n\t\t\t\t\t\t\"status\":\"Half Day\",\n\t\t\t\t\t\t\"date\":frm.doc.date,\n\t\t\t\t\t\t\"company\":frm.doc.company\n\t\t\t\t\t},\n\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\n\t\tvar row;\n\t\t$.each(employee, function(i, m) {\n\t\t\tif (i===0 || (i % 4) === 0) {\n\t\t\t\trow = $('<div class=\"row\"></div>').appendTo(me.wrapper);\n\t\t\t}\n\n\t\t\t$(repl('<div class=\"col-sm-3 unmarked-employee-checkbox\">\\\n\t\t\t\t<div class=\"checkbox\">\\\n\t\t\t\t<label><input type=\"checkbox\" class=\"employee-check\" employee=\"%(employee)s\"/>\\\n\t\t\t\t%(employee)s</label>\\\n\t\t\t\t</div></div>', {employee: m.employee_name})).appendTo(row);\n\t\t});\n\n\t\tmark_employee_toolbar.appendTo($(this.wrapper));\n\t}\n});\n\n\n","__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":1,"allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/hr/doctype/employee_attendance_tool/employee_attendance_tool.css */\n\n.top-toolbar{\n\tpadding-bottom: 30px;\n\tmargin-left: -17px;\n}\n\n.bottom-toolbar{\n\tmargin-left: -17px;\n\tmargin-top: 20px;\n}\n\n.btn{\n\tmargin-right: 5px;\n}\n\n.marked-employee-label{\n\tfont-weight: normal;\n}\n\n.checkbox{\n\tmargin-top: -3px;\n}","show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"HR","doctype":"DocType","__dashboard":{},"__kanban_boards":[],"issingle":1,"__listview_template":null,"name":"Employee Attendance Tool","idx":0,"hide_toolbar":1,"__workflow_docs":[],"modified":"2016-01-29 02:14:36.034952","is_submittable":0,"name_case":"","__calendar_js":null,"permissions":[{"creation":"2016-01-27 14:59:47.849379","share":0,"doctype":"DocPerm","owner":"Administrator","export":0,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"HR Manager","print":0,"docstatus":0,"permlevel":0,"parent":"Employee Attendance Tool","read":1,"import":0,"report":0,"apply_user_permissions":0,"name":"31c51d793a","idx":1,"amend":0,"modified":"2017-06-09 23:51:57.333802","email":0,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":0}],"quick_entry":0,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}