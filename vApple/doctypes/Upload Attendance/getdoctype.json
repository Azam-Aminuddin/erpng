{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"Download the Template, fill appropriate data and attach the modified file.\nAll dates and employee combination in the selected period will come in the template, with existing attendance records","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Download Template","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"0da0c33ef2","idx":1,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"download_template","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Date","creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","oldfieldname":"attenadnce_date","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Attendance From Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"248d56a8a2","idx":2,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"att_fr_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Attendance To Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9794858ad2","idx":3,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"att_to_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Button","creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Get Template","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"7f33ca5942","idx":4,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"get_template","fieldtype":"Button","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Import Attendance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"598c82b992","idx":5,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"upload_attendance_data","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Upload HTML","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d8b02995d6","idx":6,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"upload_html","fieldtype":"HTML","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-01-25 11:34:53","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Import Log","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Upload Attendance","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a6c9129cac","idx":7,"in_standard_filter":0,"modified":"2017-06-09 23:51:56.813029","parenttype":"DocType","fieldname":"import_log","fieldtype":"HTML","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2013-01-25 11:34:53","__list_js":null,"track_changes":0,"track_seen":0,"__calendar_js":null,"__linked_with":null,"owner":"harshada@webnotestech.com","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"__css":null,"hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":1,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/hr/doctype/upload_attendance/upload_attendance.js */\n\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n\n\nfrappe.provide(\"erpnext.hr\");\n\nerpnext.hr.AttendanceControlPanel = frappe.ui.form.Controller.extend({\n\tonload: function() {\n\t\tthis.frm.set_value(\"att_fr_date\", frappe.datetime.get_today());\n\t\tthis.frm.set_value(\"att_to_date\", frappe.datetime.get_today());\n\t},\n\n\trefresh: function() {\n\t\tthis.frm.disable_save();\n\t\tthis.show_upload();\n\t},\n\n\tget_template:function() {\n\t\tif(!this.frm.doc.att_fr_date || !this.frm.doc.att_to_date) {\n\t\t\tfrappe.msgprint(__(\"Attendance From Date and Attendance To Date is mandatory\"));\n\t\t\treturn;\n\t\t}\n\t\twindow.location.href = repl(frappe.request.url +\n\t\t\t'?cmd=%(cmd)s&from_date=%(from_date)s&to_date=%(to_date)s', {\n\t\t\t\tcmd: \"erpnext.hr.doctype.upload_attendance.upload_attendance.get_template\",\n\t\t\t\tfrom_date: this.frm.doc.att_fr_date,\n\t\t\t\tto_date: this.frm.doc.att_to_date,\n\t\t\t});\n\t},\n\n\tshow_upload: function() {\n\t\tvar me = this;\n\t\tvar $wrapper = $(cur_frm.fields_dict.upload_html.wrapper).empty();\n\n\t\t// upload\n\t\tfrappe.upload.make({\n\t\t\tparent: $wrapper,\n\t\t\targs: {\n\t\t\t\tmethod: 'erpnext.hr.doctype.upload_attendance.upload_attendance.upload'\n\t\t\t},\n\t\t\tsample_url: \"e.g. http://example.com/somefile.csv\",\n\t\t\tcallback: function(attachment, r) {\n\t\t\t\tvar $log_wrapper = $(cur_frm.fields_dict.import_log.wrapper).empty();\n\n\t\t\t\tif(!r.messages) r.messages = [];\n\t\t\t\t// replace links if error has occured\n\t\t\t\tif(r.exc || r.error) {\n\t\t\t\t\tr.messages = $.map(r.message.messages, function(v) {\n\t\t\t\t\t\tvar msg = v.replace(\"Inserted\", \"Valid\")\n\t\t\t\t\t\t\t.replace(\"Updated\", \"Valid\").split(\"<\");\n\t\t\t\t\t\tif (msg.length > 1) {\n\t\t\t\t\t\t\tv = msg[0] + (msg[1].split(\">\").slice(-1)[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tv = msg[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn v;\n\t\t\t\t\t});\n\n\t\t\t\t\tr.messages = [\"<h4 style='color:red'>\"+__(\"Import Failed!\")+\"</h4>\"]\n\t\t\t\t\t\t.concat(r.messages)\n\t\t\t\t} else {\n\t\t\t\t\tr.messages = [\"<h4 style='color:green'>\"+__(\"Import Successful!\")+\"</h4>\"].\n\t\t\t\t\t\tconcat(r.message.messages)\n\t\t\t\t}\n\n\t\t\t\t$.each(r.messages, function(i, v) {\n\t\t\t\t\tvar $p = $('<p>').html(v).appendTo($log_wrapper);\n\t\t\t\t\tif(v.substr(0,5)=='Error') {\n\t\t\t\t\t\t$p.css('color', 'red');\n\t\t\t\t\t} else if(v.substr(0,8)=='Inserted') {\n\t\t\t\t\t\t$p.css('color', 'green');\n\t\t\t\t\t} else if(v.substr(0,7)=='Updated') {\n\t\t\t\t\t\t$p.css('color', 'green');\n\t\t\t\t\t} else if(v.substr(0,5)=='Valid') {\n\t\t\t\t\t\t$p.css('color', '#777');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// rename button\n\t\t$wrapper.find('form input[type=\"submit\"]')\n\t\t\t.attr('value', 'Upload and Import')\n\t}\n})\n\ncur_frm.cscript = new erpnext.hr.AttendanceControlPanel({frm: cur_frm});\n","__tree_js":null,"docstatus":0,"__messages":null,"allow_copy":1,"allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"HR","doctype":"DocType","__dashboard":{},"__kanban_boards":[],"issingle":1,"icon":"fa fa-upload-alt","__listview_template":null,"name":"Upload Attendance","idx":1,"hide_toolbar":1,"__workflow_docs":[],"modified":"2015-06-05 11:37:04.348120","is_submittable":0,"permissions":[{"creation":"2013-01-25 11:34:53","share":0,"doctype":"DocPerm","owner":"harshada@webnotestech.com","export":0,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"HR User","print":0,"docstatus":0,"permlevel":0,"parent":"Upload Attendance","read":1,"import":0,"report":0,"apply_user_permissions":0,"name":"0c4334a7d5","idx":1,"amend":0,"modified":"2017-06-09 23:51:56.813029","email":0,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":0},{"creation":"2013-01-25 11:34:53","share":0,"doctype":"DocPerm","owner":"harshada@webnotestech.com","export":0,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"HR Manager","print":0,"docstatus":0,"permlevel":0,"parent":"Upload Attendance","read":1,"import":0,"report":0,"apply_user_permissions":0,"name":"2610473919","idx":2,"amend":0,"modified":"2017-06-09 23:51:56.813029","email":0,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":0}],"quick_entry":0,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}