{"docs":[{"fields":[{"collapsible":0,"no_copy":1,"oldfieldtype":"Data","creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","oldfieldname":"batch_id","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Batch ID","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:doc.__islocal","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"23a4dde1ec","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"batch_id","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Link","creation":"2013-03-05 14:50:38","search_fields":["item_name","description","item_group","customer_code"],"doctype":"DocField","oldfieldname":"item","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Item","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"6dd5fd9012","idx":2,"in_standard_filter":1,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"item","fieldtype":"Link","options":"Item","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"image","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3fa1098222","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"image","fieldtype":"Attach Image","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Parent Batch","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"eval:doc.parent_batch","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ec9bd79e0b","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"parent_batch","fieldtype":"Link","options":"Batch","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f4d1add872","idx":5,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"column_break_3","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Date","creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","oldfieldname":"expiry_date","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Expiry Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c28896f811","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"expiry_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Source","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"73522c4f1a","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"source","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":["supplier_name","supplier_type"],"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Supplier","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"2f0ed307a6","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"supplier","fieldtype":"Link","options":"Supplier","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"6e0668016b","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"column_break_9","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":["module"],"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Source Document Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Document","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"55590bd392","idx":10,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"reference_doctype","fieldtype":"Link","options":"DocType","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Source Document Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9728641d6a","idx":11,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"reference_name","fieldtype":"Dynamic Link","options":"reference_doctype","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"fc344eb7b0","idx":12,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"section_break_7","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Small Text","creation":"2013-03-05 14:50:38","search_fields":null,"doctype":"DocField","oldfieldname":"description","owner":"harshada@webnotestech.com","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Batch Description","print_hide_if_no_value":0,"width":"300px","allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Batch","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ed879dc4e4","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:41.529923","parenttype":"DocType","fieldname":"description","fieldtype":"Small Text","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":1,"creation":"2013-03-05 14:50:38","__list_js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/batch/batch_list.js */\n\nfrappe.listview_settings['Batch'] = {\n\tadd_fields: [\"item\", \"expiry_date\"],\n\tget_indicator: function(doc) {\n\t\tif(doc.expiry_date && frappe.datetime.get_diff(doc.expiry_date) <= 0) {\n\t\t\treturn [__(\"Expired\"), \"red\", \"expiry_date,>=,Today\"]\n\t\t} else if(doc.expiry_date) {\n\t\t\treturn [__(\"Not Expired\"), \"green\", \"expiry_date,<,Today\"]\n\t\t} else {\n\t\t\treturn [\"Not Set\", \"darkgrey\", \"\"];\n\t\t}\n\t}\n};\n","track_changes":0,"track_seen":0,"sort_order":"DESC","__linked_with":null,"__dashboard":{},"owner":"harshada@webnotestech.com","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"Setup","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":5,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/batch/batch.js */\n\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.ui.form.on('Batch', {\n\tsetup: (frm) => {\n\t\tfrm.fields_dict['item'].get_query = function(doc, cdt, cdn) {\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\n\t\t\t\tfilters:{\n\t\t\t\t\t'is_stock_item': 1,\n\t\t\t\t\t'has_batch_no': 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\trefresh: (frm) => {\n\t\tif(!frm.is_new()) {\n\t\t\tfrm.add_custom_button(__(\"View Ledger\"), () => {\n\t\t\t\tfrappe.route_options = {\n\t\t\t\t\tbatch_no: frm.doc.name\n\t\t\t\t};\n\t\t\t\tfrappe.set_route(\"query-report\", \"Stock Ledger\");\n\t\t\t});\n\t\t\tfrm.trigger('make_dashboard');\n\t\t}\n\t},\n\tmake_dashboard: (frm) => {\n\t\tif(!frm.is_new()) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'erpnext.stock.doctype.batch.batch.get_batch_qty',\n\t\t\t\targs: {batch_no: frm.doc.name},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif(!r.message) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar section = frm.dashboard.add_section(`<h5 style=\"margin-top: 0px;\">\n\t\t\t\t\t\t${ __(\"Stock Levels\") }</a></h5>`);\n\n\t\t\t\t\t// sort by qty\n\t\t\t\t\tr.message.sort(function(a, b) { a.qty > b.qty ? 1 : -1 });\n\n\t\t\t\t\tvar rows = $('<div></div>').appendTo(section);\n\n\t\t\t\t\t// show\n\t\t\t\t\t(r.message || []).forEach(function(d) {\n\t\t\t\t\t\tif(d.qty > 0) {\n\t\t\t\t\t\t\t$(`<div class='row' style='margin-bottom: 10px;'>\n\t\t\t\t\t\t\t\t<div class='col-sm-3 small' style='padding-top: 3px;'>${d.warehouse}</div>\n\t\t\t\t\t\t\t\t<div class='col-sm-3 small text-right' style='padding-top: 3px;'>${d.qty}</div>\n\t\t\t\t\t\t\t\t<div class='col-sm-6'>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-default btn-xs btn-move' style='margin-right: 7px;'\n\t\t\t\t\t\t\t\t\t\tdata-qty = \"${d.qty}\"\n\t\t\t\t\t\t\t\t\t\tdata-warehouse = \"${d.warehouse}\">\n\t\t\t\t\t\t\t\t\t\t${__('Move')}</button>\n\t\t\t\t\t\t\t\t\t<button class='btn btn-default btn-xs btn-split'\n\t\t\t\t\t\t\t\t\t\tdata-qty = \"${d.qty}\"\n\t\t\t\t\t\t\t\t\t\tdata-warehouse = \"${d.warehouse}\">\n\t\t\t\t\t\t\t\t\t\t${__('Split')}</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`).appendTo(rows);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// move - ask for target warehouse and make stock entry\n\t\t\t\t\trows.find('.btn-move').on('click', function() {\n\t\t\t\t\t\tvar $btn = $(this);\n\t\t\t\t\t\tfrappe.prompt({\n\t\t\t\t\t\t\tfieldname: 'to_warehouse',\n\t\t\t\t\t\t\tlabel: __('To Warehouse'),\n\t\t\t\t\t\t\tfieldtype: 'Link',\n\t\t\t\t\t\t\toptions: 'Warehouse'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(data) => {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: 'erpnext.stock.doctype.stock_entry.stock_entry_utils.make_stock_entry',\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\titem_code: frm.doc.item,\n\t\t\t\t\t\t\t\t\tbatch_no: frm.doc.name,\n\t\t\t\t\t\t\t\t\tqty: $btn.attr('data-qty'),\n\t\t\t\t\t\t\t\t\tfrom_warehouse: $btn.attr('data-warehouse'),\n\t\t\t\t\t\t\t\t\tto_warehouse: data.to_warehouse\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tfrappe.show_alert(__('Stock Entry {0} created',\n\t\t\t\t\t\t\t\t\t\t['<a href=\"#Form/Stock Entry/'+r.message.name+'\">' + r.message.name+ '</a>']));\n\t\t\t\t\t\t\t\t\tfrm.refresh();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\t__('Select Target Warehouse'),\n\t\t\t\t\t\t__('Move')\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\t// split - ask for new qty and batch ID (optional)\n\t\t\t\t\t// and make stock entry via batch.batch_split\n\t\t\t\t\trows.find('.btn-split').on('click', function() {\n\t\t\t\t\t\tvar $btn = $(this);\n\t\t\t\t\t\tfrappe.prompt([{\n\t\t\t\t\t\t\tfieldname: 'qty',\n\t\t\t\t\t\t\tlabel: __('New Batch Qty'),\n\t\t\t\t\t\t\tfieldtype: 'Float',\n\t\t\t\t\t\t\t'default': $btn.attr('data-qty')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldname: 'new_batch_id',\n\t\t\t\t\t\t\tlabel: __('New Batch ID (Optional)'),\n\t\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\t}],\n\t\t\t\t\t\t(data) => {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: 'erpnext.stock.doctype.batch.batch.split_batch',\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\titem_code: frm.doc.item,\n\t\t\t\t\t\t\t\t\tbatch_no: frm.doc.name,\n\t\t\t\t\t\t\t\t\tqty: data.qty,\n\t\t\t\t\t\t\t\t\twarehouse: $btn.attr('data-warehouse'),\n\t\t\t\t\t\t\t\t\tnew_batch_id: data.new_batch_id\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tfrm.refresh();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\t__('Split Batch'),\n\t\t\t\t\t\t__('Split')\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\n\t\t\t\t\tfrm.dashboard.show();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})\n\n","__tree_js":null,"docstatus":0,"__messages":null,"image_field":"image","allow_copy":0,"engine":"InnoDB","allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"Stock","doctype":"DocType","autoname":"","__kanban_boards":[],"issingle":0,"icon":"fa fa-archive","__listview_template":null,"name":"Batch","idx":1,"hide_toolbar":0,"__workflow_docs":[],"title_field":"item","modified":"2017-05-21 21:00:11.096038","is_submittable":0,"__calendar_js":null,"permissions":[{"creation":"2013-03-05 14:50:38","share":1,"doctype":"DocPerm","owner":"harshada@webnotestech.com","export":0,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"Item Manager","print":1,"docstatus":0,"permlevel":0,"parent":"Batch","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"f959f9c953","idx":1,"amend":0,"modified":"2017-09-29 01:32:41.529923","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":1,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}