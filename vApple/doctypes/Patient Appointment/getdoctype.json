{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["patient_name","mobile","email","phone"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Patient","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Document","set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":1,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"52f697fe4e","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"patient","fieldtype":"Link","options":"Patient","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["first_name","mobile_phone","office_phone"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Physician","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":1,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"214f01addc","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"physician","fieldtype":"Link","options":"Physician","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e6178ef5ca","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"appointment_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Check availability","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:doc.__islocal","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e01278b54c","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"check_availability","fieldtype":"Button","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f2fb9c94a1","idx":5,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"column_break_1","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Status","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":1,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"4b3b9cd5c6","idx":6,"default":"Scheduled","in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"status","fieldtype":"Select","options":"\nScheduled\nOpen\nClosed\nPending\nCancelled","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["appointment_type"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8a3982484e","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"appointment_type","fieldtype":"Link","options":"Appointment Type","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1ee2f609a7","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"section_break_1","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Time","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"339aa6fbfc","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"appointment_time","fieldtype":"Time","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"In Minutes","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Duration","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e537969344","idx":10,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"duration","fieldtype":"Int","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Date TIme","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":1,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9a961b7320","idx":11,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"appointment_datetime","fieldtype":"Datetime","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e9d9d2dbff","idx":12,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"column_break_2","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["department"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Department","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"","set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d6f4a4fe1e","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"department","fieldtype":"Link","options":"Medical Department","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["posting_date","due_date","customer","base_grand_total","outstanding_amount"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Sales Invoice","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f149ed8509","idx":14,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"sales_invoice","fieldtype":"Link","options":"Sales Invoice","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"63c5edd7b7","idx":15,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"section_break_2","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Patient Details","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"416b7271b8","idx":16,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"patient_details","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Patient Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"patient","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f39ae5d71c","idx":17,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"patient_name","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Gender","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"226ed3512b","idx":18,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"patient_sex","fieldtype":"Data","options":"patient.sex","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Patient Age","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"03b4f8c122","idx":19,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"patient_age","fieldtype":"Data","options":"","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Company","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"228ab33497","idx":20,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"company","fieldtype":"Link","options":"Company","report_hide":0,"parentfield":"fields"},{"collapsible":1,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"More Info","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"dc1c0a478c","idx":21,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"section_break_3","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Notes","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"84b87e77e9","idx":22,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"notes","fieldtype":"Small Text","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":["first_name","mobile_phone","office_phone"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Referring Physician","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5f8943ad49","idx":23,"in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"referring_physician","fieldtype":"Link","options":"Physician","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2017-05-04 11:52:40.941507","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Reminded","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Patient Appointment","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"81a66b8096","idx":24,"default":"0","in_standard_filter":0,"modified":"2017-09-29 01:32:51.847518","parenttype":"DocType","fieldname":"reminded","fieldtype":"Check","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":1,"creation":"2017-05-04 11:52:40.941507","search_fields":"patient, physician, appointment_datetime,department","track_changes":1,"track_seen":1,"sort_order":"DESC","__linked_with":null,"__dashboard":{"non_standard_fieldnames":{"Patient Medical Record":"reference_name"},"fieldname":"appointment","transactions":[{"items":["Consultation","Vital Signs","Patient Medical Record"],"label":"Consultations"},{"items":["Sales Invoice"],"label":"Billing"}]},"owner":"Administrator","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"Document","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":0,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/healthcare/doctype/patient_appointment/patient_appointment.js */\n\n// Copyright (c) 2016, ESS LLP and contributors\n// For license information, please see license.txt\nfrappe.provide(\"erpnext.queries\");\nfrappe.ui.form.on('Patient Appointment', {\n\tsetup: function(frm) {\n\t\tfrm.custom_make_buttons = {\n\t\t\t'Sales Invoice': 'Invoice',\n\t\t\t'Vital Signs': 'Vital Signs',\n\t\t\t'Consultation': 'Consultation'\n\t\t};\n\t},\n\trefresh: function(frm) {\n\t\tfrm.set_query(\"patient\", function () {\n\t\t\treturn {\n\t\t\t\tfilters: {\"disabled\": 0}\n\t\t\t};\n\t\t});\n\t\tif(frm.doc.patient){\n\t\t\tfrm.add_custom_button(__('Medical Record'), function() {\n\t\t\t\tfrappe.route_options = {\"patient\": frm.doc.patient};\n\t\t\t\tfrappe.set_route(\"medical_record\");\n\t\t\t},__(\"View\"));\n\t\t}\n\t\tif(frm.doc.status == \"Open\"){\n\t\t\tfrm.add_custom_button(__('Cancel'), function() {\n\t\t\t\tbtn_update_status(frm, \"Cancelled\");\n\t\t\t});\n\t\t}\n\t\tif(frm.doc.status == \"Scheduled\" && !frm.doc.__islocal){\n\t\t\tfrm.add_custom_button(__('Cancel'), function() {\n\t\t\t\tbtn_update_status(frm, \"Cancelled\");\n\t\t\t});\n\t\t}\n\t\tif(frm.doc.status == \"Pending\"){\n\t\t\tfrm.add_custom_button(__('Set Open'), function() {\n\t\t\t\tbtn_update_status(frm, \"Open\");\n\t\t\t});\n\t\t\tfrm.add_custom_button(__('Cancel'), function() {\n\t\t\t\tbtn_update_status(frm, \"Cancelled\");\n\t\t\t});\n\t\t}\n\n\t\tfrm.add_custom_button(__(\"Consultation\"),function(){\n\t\t\tbtn_create_consultation(frm);\n\t\t},\"Create\");\n\n\t\tfrm.add_custom_button(__('Vital Signs'), function() {\n\t\t\tbtn_create_vital_signs(frm);\n\t\t},\"Create\");\n\n\t\tif(!frm.doc.__islocal){\n\t\t\tif(frm.doc.sales_invoice && frappe.user.has_role(\"Accounts User\")){\n\t\t\t\tfrm.add_custom_button(__('Invoice'), function() {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Sales Invoice\", frm.doc.sales_invoice);\n\t\t\t\t},__(\"View\") );\n\t\t\t}\n\t\t\telse if(frm.doc.status != \"Cancelled\" && frappe.user.has_role(\"Accounts User\")){\n\t\t\t\tfrm.add_custom_button(__('Invoice'), function() {\n\t\t\t\t\tbtn_invoice_consultation(frm);\n\t\t\t\t},__(\"Create\"));\n\t\t\t}\n\t\t}\n\t},\n\tcheck_availability: function(frm) {\n\t\tvar { physician, appointment_date } = frm.doc;\n\t\tif(!(physician && appointment_date)) {\n\t\t\tfrappe.throw(__(\"Please select Physician and Date\"));\n\t\t}\n\n\t\t// show booking modal\n\t\tfrm.call({\n\t\t\tmethod: 'get_availability_data',\n\t\t\targs: {\n\t\t\t\tphysician: physician,\n\t\t\t\tdate: appointment_date\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\t// console.log(r);\n\t\t\t\tvar data = r.message;\n\t\t\t\tif(data.available_slots.length > 0) {\n\t\t\t\t\tshow_availability(data);\n\t\t\t\t} else {\n\t\t\t\t\tshow_empty_state();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction show_empty_state() {\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Not Available'),\n\t\t\t\tmessage: __(\"Physician {0} not available on {1}\", [physician.bold(), appointment_date.bold()]),\n\t\t\t\tindicator: 'red'\n\t\t\t});\n\t\t}\n\n\t\tfunction show_availability(data) {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Available slots\"),\n\t\t\t\tfields: [{ fieldtype: 'HTML', fieldname: 'available_slots'}],\n\t\t\t\tprimary_action_label: __(\"Book\"),\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\t// book slot\n\t\t\t\t\tfrm.set_value('appointment_time', selected_slot);\n\t\t\t\t\tfrm.set_value('duration', data.time_per_appointment);\n\t\t\t\t\td.hide();\n\t\t\t\t\tfrm.save();\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar $wrapper = d.fields_dict.available_slots.$wrapper;\n\t\t\tvar selected_slot = null;\n\n\t\t\t// disable dialog action initially\n\t\t\td.get_primary_btn().attr('disabled', true);\n\n\t\t\t// make buttons for each slot\n\t\t\tvar slot_html = data.available_slots.map(slot => {\n\t\t\t\treturn `<button class=\"btn btn-default\"\n\t\t\t\t\tdata-name=${slot.from_time}\n\t\t\t\t\tstyle=\"margin: 0 10px 10px 0; width: 72px\">\n\t\t\t\t\t${slot.from_time.substring(0, slot.from_time.length - 3)}\n\t\t\t\t</button>`;\n\t\t\t}).join(\"\");\n\n\t\t\t$wrapper\n\t\t\t\t.css('margin-bottom', 0)\n\t\t\t\t.addClass('text-center')\n\t\t\t\t.html(slot_html);\n\n\t\t\t// disable buttons for which appointments are booked\n\t\t\tdata.appointments.map(slot => {\n\t\t\t\tif(slot.status == \"Scheduled\" || slot.status == \"Open\" || slot.status == \"Closed\"){\n\t\t\t\t\t$wrapper\n\t\t\t\t\t\t.find(`button[data-name=\"${slot.appointment_time}\"]`)\n\t\t\t\t\t\t.attr('disabled', true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// blue button when clicked\n\t\t\t$wrapper.on('click', 'button', function() {\n\t\t\t\tvar $btn = $(this);\n\t\t\t\t$wrapper.find('button').removeClass('btn-primary');\n\t\t\t\t$btn.addClass('btn-primary');\n\t\t\t\tselected_slot = $btn.attr('data-name');\n\n\t\t\t\t// enable dialog action\n\t\t\t\td.get_primary_btn().attr('disabled', null);\n\t\t\t});\n\n\t\t\td.show();\n\t\t}\n\t},\n\tonload:function(frm){\n\t\tif(frm.is_new()) {\n\t\t\tfrm.set_value(\"appointment_time\", null);\n\t\t\tfrm.disable_save();\n\t\t}\n\t},\n});\n\nvar btn_create_consultation = function(frm){\n\tvar doc = frm.doc;\n\tfrappe.call({\n\t\tmethod:\"erpnext.healthcare.doctype.patient_appointment.patient_appointment.create_consultation\",\n\t\targs: {appointment: doc.name},\n\t\tcallback: function(data){\n\t\t\tif(!data.exc){\n\t\t\t\tvar doclist = frappe.model.sync(data.message);\n\t\t\t\tfrappe.set_route(\"Form\", doclist[0].doctype, doclist[0].name);\n\t\t\t}\n\t\t}\n\t});\n};\n\nvar btn_create_vital_signs = function (frm) {\n\tif(!frm.doc.patient){\n\t\tfrappe.throw(\"Please select patient\");\n\t}\n\tfrappe.route_options = {\n\t\t\"patient\": frm.doc.patient,\n\t};\n\tfrappe.new_doc(\"Vital Signs\");\n};\n\nvar btn_update_status = function(frm, status){\n\tvar doc = frm.doc;\n\tfrappe.call({\n\t\tmethod:\n\t\t\"erpnext.healthcare.doctype.patient_appointment.patient_appointment.update_status\",\n\t\targs: {appointmentId: doc.name, status:status},\n\t\tcallback: function(data){\n\t\t\tif(!data.exc){\n\t\t\t\tcur_frm.reload_doc();\n\t\t\t}\n\t\t}\n\t});\n};\n\nvar btn_invoice_consultation = function(frm){\n\tvar doc = frm.doc;\n\tfrappe.call({\n\t\tmethod:\n\t\t\"erpnext.healthcare.doctype.patient_appointment.patient_appointment.create_invoice\",\n\t\targs: {company: doc.company, physician:doc.physician, patient: doc.patient,\n\t\t\tappointment_id: doc.name, appointment_date:doc.appointment_date },\n\t\tcallback: function(data){\n\t\t\tif(!data.exc){\n\t\t\t\tif(data.message){\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Sales Invoice\", data.message);\n\t\t\t\t}\n\t\t\t\tcur_frm.reload_doc();\n\t\t\t}\n\t\t}\n\t});\n};\n\nfrappe.ui.form.on(\"Patient Appointment\", \"physician\", function(frm) {\n\tif(frm.doc.physician){\n\t\tfrappe.call({\n\t\t\t\"method\": \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Physician\",\n\t\t\t\tname: frm.doc.physician\n\t\t\t},\n\t\t\tcallback: function (data) {\n\t\t\t\tfrappe.model.set_value(frm.doctype,frm.docname, \"department\",data.message.department);\n\t\t\t}\n\t\t});\n\t}\n});\n\nfrappe.ui.form.on(\"Patient Appointment\", \"patient\", function(frm) {\n\tif(frm.doc.patient){\n\t\tfrappe.call({\n\t\t\t\"method\": \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Patient\",\n\t\t\t\tname: frm.doc.patient\n\t\t\t},\n\t\t\tcallback: function (data) {\n\t\t\t\tvar age = null;\n\t\t\t\tif(data.message.dob){\n\t\t\t\t\tage = calculate_age(data.message.dob);\n\t\t\t\t}\n\t\t\t\tfrappe.model.set_value(frm.doctype,frm.docname, \"patient_age\", age);\n\t\t\t}\n\t\t});\n\t}\n});\n\nvar calculate_age = function(birth) {\n\tvar ageMS = Date.parse(Date()) - Date.parse(birth);\n\tvar age = new Date();\n\tage.setTime(ageMS);\n\tvar years =  age.getFullYear() - 1970;\n\treturn  years + \" Year(s) \" + age.getMonth() + \" Month(s) \" + age.getDate() + \" Day(s)\";\n};\n","__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":1,"engine":"InnoDB","allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":1,"beta":1,"read_only_onload":0,"module":"Healthcare","doctype":"DocType","autoname":"OP-.######","__kanban_boards":[],"issingle":0,"__listview_template":null,"name":"Patient Appointment","idx":0,"hide_toolbar":0,"__workflow_docs":[],"title_field":"patient","modified":"2017-08-31 13:27:39.208298","is_submittable":0,"name_case":"","__calendar_js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/healthcare/doctype/patient_appointment/patient_appointment_calendar.js */\n\n\nfrappe.views.calendar[\"Patient Appointment\"] = {\n\tfield_map: {\n\t\t\"start\": \"start\",\n\t\t\"end\": \"end\",\n\t\t\"id\": \"name\",\n\t\t\"title\": \"patient\",\n\t\t\"allDay\": \"allDay\"\n\t},\n\tgantt: true,\n\tget_events_method: \"erpnext.healthcare.doctype.patient_appointment.patient_appointment.get_events\",\n\tfilters: [\n\t\t{\n\t\t\t'fieldtype': 'Link',\n\t\t\t'fieldname': 'physician',\n\t\t\t'options': 'Physician',\n\t\t\t'label': __('Physician')\n\t\t},\n\t\t{\n\t\t\t'fieldtype': 'Link',\n\t\t\t'fieldname': 'patient',\n\t\t\t'options': 'Patient',\n\t\t\t'label': __('Patient')\n\t\t},\n\t\t{\n\t\t\t'fieldtype': 'Link',\n\t\t\t'fieldname': 'appointment_type',\n\t\t\t'options': 'Appointment Type',\n\t\t\t'label': __('Appointment Type')\n\t\t},\n\t\t{\n\t\t\t'fieldtype': 'Link',\n\t\t\t'fieldname': 'department',\n\t\t\t'options': 'Medical Department',\n\t\t\t'label': __('Department')\n\t\t},\n\t\t{\n\t\t\t'fieldtype': 'Select',\n\t\t\t'fieldname': 'status',\n\t\t\t'options': 'Scheduled\\nOpen\\nClosed\\nPending',\n\t\t\t'label': __('Status')\n\t\t}\n\t]\n};\n","restrict_to_domain":"Healthcare","__list_js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/healthcare/doctype/patient_appointment/patient_appointment_list.js */\n\n/*\n(c) ESS 2015-16\n*/\nfrappe.listview_settings['Patient Appointment'] = {\n\tfilters: [[\"status\", \"=\", \"Open\"]],\n};\n","permissions":[{"creation":"2017-05-04 11:52:40.941507","share":1,"doctype":"DocPerm","owner":"Administrator","export":1,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"Healthcare Administrator","print":1,"docstatus":0,"permlevel":0,"parent":"Patient Appointment","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"22fffce323","idx":1,"amend":0,"modified":"2017-09-29 01:32:51.847518","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1},{"creation":"2017-05-04 11:52:40.941507","share":1,"doctype":"DocPerm","owner":"Administrator","export":1,"cancel":0,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":0,"write":1,"role":"Physician","print":1,"docstatus":0,"permlevel":0,"parent":"Patient Appointment","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"01441a6718","idx":2,"amend":0,"modified":"2017-09-29 01:32:51.847518","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":0,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}