{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"width":"50%","allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"01c85e0b9a","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"column_break0","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Series","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"b0aebaa94b","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"naming_series","fieldtype":"Select","options":"LAL/","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Link","creation":"2013-02-20 19:10:38","search_fields":["employee_name"],"doctype":"DocField","oldfieldname":"employee","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":1,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Employee","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":1,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9201a51bee","idx":3,"in_standard_filter":1,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"employee","fieldtype":"Link","options":"Employee","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":1,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Employee Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":1,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1a887f1a71","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"employee_name","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"width":"50%","allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"fb925ded30","idx":5,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"column_break1","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Small Text","creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","oldfieldname":"reason","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Description","print_hide_if_no_value":0,"width":"300px","allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f30949d3f1","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"description","fieldtype":"Small Text","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d96ddbbaf8","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"section_break_6","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"oldfieldtype":"Link","creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","oldfieldname":"leave_type","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Leave Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":1,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"824056bcf0","idx":8,"in_standard_filter":1,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"leave_type","fieldtype":"Link","options":"Leave Type","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"From Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"77113b8036","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"from_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"To Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1558f5849a","idx":10,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"to_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9905aa6c82","idx":11,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"column_break_10","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"New Leaves Allocated","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":1,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"65db82d8c9","idx":12,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"new_leaves_allocated","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"description":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Add unused leaves from previous allocations","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"da99260d59","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"carry_forward","fieldtype":"Check","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Unused leaves","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"carry_forward","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a537e1d834","idx":14,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"carry_forwarded_leaves","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2013-02-20 19:10:38","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Total Leaves Allocated","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":1,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5aa314e10a","idx":15,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"total_leaves_allocated","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"oldfieldtype":"Data","creation":"2013-02-20 19:10:38","search_fields":["employee","employee_name","leave_type","total_leaves_allocated"],"doctype":"DocField","oldfieldname":"amended_from","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":1,"length":0,"label":"Amended From","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Leave Allocation","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9625cf58d3","idx":16,"in_standard_filter":0,"modified":"2017-09-29 01:32:38.386062","parenttype":"DocType","fieldname":"amended_from","fieldtype":"Link","options":"Leave Allocation","report_hide":0,"parentfield":"fields"}],"timeline_field":"employee","image_view":0,"allow_import":1,"creation":"2013-02-20 19:10:38","search_fields":"employee,employee_name,leave_type,total_leaves_allocated","track_changes":0,"track_seen":0,"sort_order":"DESC","__linked_with":null,"__dashboard":{},"owner":"Administrator","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"Setup","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":0,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/hr/doctype/leave_allocation/leave_allocation.js */\n\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\ncur_frm.add_fetch('employee','employee_name','employee_name');\n\nfrappe.ui.form.on(\"Leave Allocation\", {\n\tonload: function(frm) {\n\t\tif(!frm.doc.from_date) frm.set_value(\"from_date\", frappe.datetime.get_today());\n\n\t\tfrm.set_query(\"employee\", function() {\n\t\t\treturn {\n\t\t\t\tquery: \"erpnext.controllers.queries.employee_query\"\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"leave_type\", function() {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\tis_lwp: 0\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\n\temployee: function(frm) {\n\t\tfrm.trigger(\"calculate_total_leaves_allocated\");\n\t},\n\n\tleave_type: function(frm) {\n\t\tfrm.trigger(\"calculate_total_leaves_allocated\");\n\t},\n\n\tcarry_forward: function(frm) {\n\t\tfrm.trigger(\"calculate_total_leaves_allocated\");\n\t},\n\n\tcarry_forwarded_leaves: function(frm) {\n\t\tfrm.set_value(\"total_leaves_allocated\",\n\t\t\tflt(frm.doc.carry_forwarded_leaves) + flt(frm.doc.new_leaves_allocated));\n\t},\n\n\tnew_leaves_allocated: function(frm) {\n\t\tfrm.set_value(\"total_leaves_allocated\",\n\t\t\tflt(frm.doc.carry_forwarded_leaves) + flt(frm.doc.new_leaves_allocated));\n\t},\n\n\tcalculate_total_leaves_allocated: function(frm) {\n\t\tif (cint(frm.doc.carry_forward) == 1 && frm.doc.leave_type && frm.doc.employee) {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"erpnext.hr.doctype.leave_allocation.leave_allocation.get_carry_forwarded_leaves\",\n\t\t\t\targs: {\n\t\t\t\t\t\"employee\": frm.doc.employee,\n\t\t\t\t\t\"date\": frm.doc.from_date,\n\t\t\t\t\t\"leave_type\": frm.doc.leave_type,\n\t\t\t\t\t\"carry_forward\": frm.doc.carry_forward\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exc && r.message) {\n\t\t\t\t\t\tfrm.set_value('carry_forwarded_leaves', r.message);\n\t\t\t\t\t\tfrm.set_value(\"total_leaves_allocated\",\n\t\t\t\t\t\t\tflt(r.message) + flt(frm.doc.new_leaves_allocated));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t} else if (cint(frm.doc.carry_forward) == 0) {\n\t\t\tfrm.set_value(\"carry_forwarded_leaves\", 0);\n\t\t\tfrm.set_value(\"total_leaves_allocated\", flt(frm.doc.new_leaves_allocated));\n\t\t}\n\t}\n})\n","__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"engine":"InnoDB","allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":1,"beta":0,"read_only_onload":0,"module":"HR","doctype":"DocType","autoname":"naming_series:","__kanban_boards":[],"issingle":0,"icon":"fa fa-ok","__listview_template":null,"name":"Leave Allocation","idx":1,"hide_toolbar":0,"__workflow_docs":[],"modified":"2017-06-13 14:29:01.066538","is_submittable":1,"__calendar_js":null,"__list_js":null,"permissions":[{"creation":"2013-02-20 19:10:38","share":1,"doctype":"DocPerm","owner":"Administrator","export":0,"cancel":1,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":1,"write":1,"role":"HR User","print":1,"docstatus":0,"permlevel":0,"parent":"Leave Allocation","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"3dfa0c3cf4","idx":1,"amend":1,"modified":"2017-09-29 01:32:38.386062","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1},{"creation":"2013-02-20 19:10:38","share":1,"doctype":"DocPerm","owner":"Administrator","export":0,"cancel":1,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":1,"write":1,"role":"HR Manager","print":1,"docstatus":0,"permlevel":0,"parent":"Leave Allocation","read":1,"import":0,"report":1,"apply_user_permissions":0,"name":"341bb6648d","idx":2,"amend":1,"modified":"2017-09-29 01:32:38.386062","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":0,"__custom_js":"","__print_formats":[]}],"user_settings":"{}"}