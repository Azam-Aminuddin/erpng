{"docs":[{"fields":[{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Type of Payment","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"aef34312be","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"type_of_payment","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Series","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":1,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"41dd31ed27","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"naming_series","fieldtype":"Select","options":"PE-","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Payment Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8f5d8a84b9","idx":3,"in_standard_filter":1,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"payment_type","fieldtype":"Select","options":"Receive\nPay\nInternal Transfer","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"989a594519","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_5","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Posting Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"755ade61f1","idx":5,"default":"Today","in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"posting_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Company","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":1,"unique":0,"name":"32ee7b8c90","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"company","fieldtype":"Link","options":"Company","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Mode of Payment","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5908733e28","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"mode_of_payment","fieldtype":"Link","options":"Mode of Payment","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Payment From / To","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8d4d7ea946","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"party_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":["module"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Party Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Document","set_only_once":0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) && doc.docstatus==0","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"9327e96e30","idx":9,"default":"","in_standard_filter":1,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"party_type","fieldtype":"Link","options":"DocType","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Party","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) && doc.party_type","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"b6774e4456","idx":10,"in_standard_filter":1,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"party","fieldtype":"Dynamic Link","options":"party_type","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"81e029f478","idx":11,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_11","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":1,"description":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Party Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) && doc.party_type","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":1,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"566f3b815e","idx":12,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"party_name","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":1,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Accounts","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c8e8e5bd57","idx":13,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"payment_accounts_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Party Balance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"party","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e0c510585e","idx":14,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"party_balance","fieldtype":"Currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":1,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Paid From","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"eval:(in_list([\"Internal Transfer\", \"Pay\"], doc.payment_type) || doc.party)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8b466709d3","idx":15,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_from","fieldtype":"Link","options":"Account","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Currency","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"paid_from","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"2dce0e78e9","idx":16,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_from_account_currency","fieldtype":"Link","options":"Currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Balance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"paid_from","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"915101ae59","idx":17,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_from_account_balance","fieldtype":"Currency","options":"paid_from_account_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a03b7f2cfd","idx":18,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_18","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":1,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Paid To","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"eval:(in_list([\"Internal Transfer\", \"Receive\"], doc.payment_type) || doc.party)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"4070ba8377","idx":19,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_to","fieldtype":"Link","options":"Account","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Currency","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"paid_to","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a9b601b427","idx":20,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_to_account_currency","fieldtype":"Link","options":"Currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account Balance","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"paid_to","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"084b6d1c1a","idx":21,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_to_account_balance","fieldtype":"Currency","options":"paid_to_account_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"collapsible_depends_on":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_to && doc.paid_from)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e428fb87b3","idx":22,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"payment_amounts_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Paid Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3d6e84911e","idx":23,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"paid_amount","fieldtype":"Currency","options":"paid_from_account_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Exchange Rate","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"11bdbb48e8","idx":24,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"source_exchange_rate","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Paid Amount (Company Currency)","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f5e21cbe48","idx":25,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"base_paid_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"1721ecbae2","idx":26,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_21","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Received Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"2e4ba2cc3a","idx":27,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"received_amount","fieldtype":"Currency","options":"paid_to_account_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Exchange Rate","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f9102a1bb7","idx":28,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"target_exchange_rate","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Received Amount (Company Currency)","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"363de7a7a4","idx":29,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"base_received_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":1,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"collapsible_depends_on":"references","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Reference","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.party && doc.paid_from && doc.paid_to && doc.paid_amount && doc.received_amount)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"021f607b52","idx":30,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"section_break_14","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Allocate Payment Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:in_list(['Pay', 'Receive'], doc.payment_type)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3a2ed0b4f6","idx":31,"default":"1","in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"allocate_payment_amount","fieldtype":"Check","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Payment References","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"c1c9e3eb52","idx":32,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"references","fieldtype":"Table","options":"Payment Entry Reference","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Writeoff","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3d6bdd137a","idx":33,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"section_break_34","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Total Allocated Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_amount && doc.received_amount && doc.references)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"dd0160b68a","idx":34,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"total_allocated_amount","fieldtype":"Currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Total Allocated Amount (Company Currency)","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3e110641f7","idx":35,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"base_total_allocated_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Set Exchange Gain / Loss","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f805bcc255","idx":36,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"set_exchange_gain_loss","fieldtype":"Button","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5bef5fdf05","idx":37,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_36","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Unallocated Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_amount && doc.received_amount && doc.references)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8f8624fb09","idx":38,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"unallocated_amount","fieldtype":"Currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Difference Amount (Company Currency)","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_amount && doc.received_amount)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"cf07a2989f","idx":39,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"difference_amount","fieldtype":"Currency","options":"Company:company:default_currency","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Write Off Difference Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"difference_amount","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"3c4edb692c","idx":40,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"write_off_difference_amount","fieldtype":"Button","report_hide":0,"parentfield":"fields"},{"collapsible":1,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"collapsible_depends_on":"deductions","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Deductions or Loss","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_amount && doc.received_amount)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"25a85ab2e2","idx":41,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"deductions_or_loss_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Payment Deductions or Loss","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"93c6ecd2e4","idx":42,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"deductions","fieldtype":"Table","options":"Payment Entry Deduction","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Transaction ID","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d95d397769","idx":43,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"transaction_references","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Cheque/Reference No","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_from && doc.paid_to)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"b4a0e35347","idx":44,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"reference_no","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f3a0b5fccb","idx":45,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_23","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Cheque/Reference Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_from && doc.paid_to)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":1,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d4f04b8531","idx":46,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"reference_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Clearance Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:doc.docstatus==1","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"2f2c37359a","idx":47,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"clearance_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":1,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"collapsible_depends_on":"","read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"More Information","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.paid_from && doc.paid_to && doc.paid_amount && doc.received_amount)","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"74cf1ffa5f","idx":48,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"section_break_12","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":["customer","status","priority","is_active"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Project","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"4bcaad675e","idx":49,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"project","fieldtype":"Link","options":"Project","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Remarks","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"51c41d5ca1","idx":50,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"remarks","fieldtype":"Small Text","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"7dd2d901fc","idx":51,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"column_break_16","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Letter Head","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"d0cf0999ac","idx":52,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"letter_head","fieldtype":"Link","options":"Letter Head","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":["print_heading"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Print Heading","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f92be2f2e8","idx":53,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"print_heading","fieldtype":"Link","options":"Print Heading","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Subscription Section","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"a79846c42c","idx":54,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"subscription_section","fieldtype":"Section Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2016-06-01 14:38:51.012597","search_fields":["reference_document"],"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Subscription","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":1,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"e185bfe008","idx":55,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"subscription","fieldtype":"Link","options":"Subscription","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Amended From","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"54024c8d0f","idx":56,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"amended_from","fieldtype":"Link","options":"Payment Entry","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 14:38:51.012597","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Title","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":1,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"27ee773e44","idx":57,"in_standard_filter":0,"modified":"2017-09-29 01:32:17.862634","parenttype":"DocType","fieldname":"title","fieldtype":"Data","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":1,"creation":"2016-06-01 14:38:51.012597","__list_js":null,"track_changes":1,"track_seen":0,"sort_order":"DESC","__linked_with":null,"__dashboard":{},"owner":"Administrator","editable_grid":0,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":[],"custom":0,"max_attachments":0,"__js":"\n\n/* Adding /home/frappe/frappe-bench/apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.js */\n\n// Copyright (c) 2016, Frappe Technologies Pvt. Ltd. and contributors\n// For license information, please see license.txt\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n// get tax rate\nfrappe.provide(\"erpnext.taxes\");\nfrappe.provide(\"erpnext.taxes.flags\");\n\nfrappe.ui.form.on(cur_frm.doctype, {\n\tsetup: function(frm) {\n\t\t// set conditional display for rate column in taxes\n\t\t$(frm.wrapper).on('grid-row-render', function(e, grid_row) {\n\t\t\tif(in_list(['Sales Taxes and Charges', 'Purchase Taxes and Charges'], grid_row.doc.doctype)) {\n\t\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(grid_row);\n\t\t\t}\n\t\t});\n\t},\n\tonload: function(frm) {\n\t\tif(frm.get_field(\"taxes\")) {\n\t\t\tfrm.set_query(\"account_head\", \"taxes\", function(doc) {\n\t\t\t\tif(frm.cscript.tax_table == \"Sales Taxes and Charges\") {\n\t\t\t\t\tvar account_type = [\"Tax\", \"Chargeable\", \"Expense Account\"];\n\t\t\t\t} else {\n\t\t\t\t\tvar account_type = [\"Tax\", \"Chargeable\", \"Income Account\"];\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tquery: \"erpnext.controllers.queries.tax_account_query\",\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\"account_type\": account_type,\n\t\t\t\t\t\t\"company\": doc.company\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfrm.set_query(\"cost_center\", \"taxes\", function(doc) {\n\t\t\t\treturn {\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t'company': doc.company,\n\t\t\t\t\t\t\"is_group\": 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tvalidate: function(frm) {\n\t\t// neither is absolutely mandatory\n\t\tif(frm.get_docfield(\"taxes\")) {\n\t\t\tfrm.get_docfield(\"taxes\", \"rate\").reqd = 0;\n\t\t\tfrm.get_docfield(\"taxes\", \"tax_amount\").reqd = 0;\n\t\t}\n\n\t},\n\ttaxes_on_form_rendered: function(frm) {\n\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.open_grid_row());\n\t}\n});\n\nfrappe.ui.form.on('Sales Invoice Payment', {\n\tmode_of_payment: function(frm, cdt, cdn) {\n\t\tvar d = locals[cdt][cdn];\n\t\tget_payment_mode_account(frm, d.mode_of_payment, function(account){\n\t\t\tfrappe.model.set_value(cdt, cdn, 'account', account)\n\t\t})\n\t}\n})\n\nfrappe.ui.form.on('Purchase Invoice', {\n\tmode_of_payment: function(frm) {\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\n\t\t\tfrm.set_value('cash_bank_account', account);\n\t\t})\n\t}\n})\n\nfrappe.ui.form.on('Payment Entry', {\n\tmode_of_payment: function(frm) {\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\n\t\t\tvar payment_account_field = frm.doc.payment_type == \"Receive\" ? \"paid_to\" : \"paid_from\";\n\t\t\tfrm.set_value(payment_account_field, account);\n\t\t})\n\t}\n})\n\nfrappe.ui.form.on('Salary Structure', {\n\tmode_of_payment: function(frm) {\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\n\t\t\tfrm.set_value(\"payment_account\", account);\n\t\t})\n\t}\n})\n\nvar get_payment_mode_account = function(frm, mode_of_payment, callback) {\n\tif(!frm.doc.company) {\n\t\tfrappe.throw(__(\"Please select the Company first\"));\n\t}\n\n\tif(!mode_of_payment) {\n\t\treturn;\n\t}\n\n\treturn  frappe.call({\n\t\tmethod: \"erpnext.accounts.doctype.sales_invoice.sales_invoice.get_bank_cash_account\",\n\t\targs: {\n\t\t\t\"mode_of_payment\": mode_of_payment,\n\t\t\t\"company\": frm.doc.company\n\t\t},\n\t\tcallback: function(r, rt) {\n\t\t\tif(r.message) {\n\t\t\t\tcallback(r.message.account)\n\t\t\t}\n\t\t}\n\t});\n}\n\n\ncur_frm.cscript.account_head = function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\tif(!d.charge_type && d.account_head){\n\t\tfrappe.msgprint(\"Please select Charge Type first\");\n\t\tfrappe.model.set_value(cdt, cdn, \"account_head\", \"\");\n\t} else if(d.account_head && d.charge_type!==\"Actual\") {\n\t\tfrappe.call({\n\t\t\ttype:\"GET\",\n\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_tax_rate\",\n\t\t\targs: {\"account_head\":d.account_head},\n\t\t\tcallback: function(r) {\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"rate\", r.message.tax_rate || 0);\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"description\", r.message.account_name);\n\t\t\t}\n\t\t})\n\t}\n}\n\ncur_frm.cscript.validate_taxes_and_charges = function(cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\tvar msg = \"\";\n\n\tif(d.account_head && !d.description) {\n\t\t// set description from account head\n\t\td.description = d.account_head.split(' - ').slice(0, -1).join(' - ');\n\t}\n\n\tif(!d.charge_type && (d.row_id || d.rate || d.tax_amount)) {\n\t\tmsg = __(\"Please select Charge Type first\");\n\t\td.row_id = \"\";\n\t\td.rate = d.tax_amount = 0.0;\n\t} else if((d.charge_type == 'Actual' || d.charge_type == 'On Net Total') && d.row_id) {\n\t\tmsg = __(\"Can refer row only if the charge type is 'On Previous Row Amount' or 'Previous Row Total'\");\n\t\td.row_id = \"\";\n\t} else if((d.charge_type == 'On Previous Row Amount' || d.charge_type == 'On Previous Row Total') && d.row_id) {\n\t\tif (d.idx == 1) {\n\t\t\tmsg = __(\"Cannot select charge type as 'On Previous Row Amount' or 'On Previous Row Total' for first row\");\n\t\t\td.charge_type = '';\n\t\t} else if (!d.row_id) {\n\t\t\tmsg = __(\"Please specify a valid Row ID for row {0} in table {1}\", [d.idx, __(d.doctype)]);\n\t\t\td.row_id = \"\";\n\t\t} else if(d.row_id && d.row_id >= d.idx) {\n\t\t\tmsg = __(\"Cannot refer row number greater than or equal to current row number for this Charge type\");\n\t\t\td.row_id = \"\";\n\t\t}\n\t}\n\tif(msg) {\n\t\tfrappe.validated = false;\n\t\trefresh_field(\"taxes\");\n\t\tfrappe.throw(msg);\n\t}\n\n}\n\ncur_frm.cscript.validate_inclusive_tax = function(tax) {\n\tvar actual_type_error = function() {\n\t\tvar msg = __(\"Actual type tax cannot be included in Item rate in row {0}\", [tax.idx])\n\t\tfrappe.throw(msg);\n\t};\n\n\tvar on_previous_row_error = function(row_range) {\n\t\tvar msg = __(\"For row {0} in {1}. To include {2} in Item rate, rows {3} must also be included\",\n\t\t\t[tax.idx, __(tax.doctype), tax.charge_type, row_range])\n\t\tfrappe.throw(msg);\n\t};\n\n\tif(cint(tax.included_in_print_rate)) {\n\t\tif(tax.charge_type == \"Actual\") {\n\t\t\t// inclusive tax cannot be of type Actual\n\t\t\tactual_type_error();\n\t\t} else if(tax.charge_type == \"On Previous Row Amount\" &&\n\t\t\t!cint(this.frm.doc[\"taxes\"][tax.row_id - 1].included_in_print_rate)\n\t\t) {\n\t\t\t// referred row should also be an inclusive tax\n\t\t\ton_previous_row_error(tax.row_id);\n\t\t} else if(tax.charge_type == \"On Previous Row Total\") {\n\t\t\tvar taxes_not_included = $.map(this.frm.doc[\"taxes\"].slice(0, tax.row_id),\n\t\t\t\tfunction(t) { return cint(t.included_in_print_rate) ? null : t; });\n\t\t\tif(taxes_not_included.length > 0) {\n\t\t\t\t// all rows above this tax should be inclusive\n\t\t\t\ton_previous_row_error(tax.row_id == 1 ? \"1\" : \"1 - \" + tax.row_id);\n\t\t\t}\n\t\t} else if(tax.category == \"Valuation\") {\n\t\t\tfrappe.throw(__(\"Valuation type charges can not marked as Inclusive\"));\n\t\t}\n\t}\n}\n\nif(!erpnext.taxes.flags[cur_frm.cscript.tax_table]) {\n\terpnext.taxes.flags[cur_frm.cscript.tax_table] = true;\n\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"row_id\", function(frm, cdt, cdn) {\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\n\t});\n\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"rate\", function(frm, cdt, cdn) {\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\n\t});\n\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"tax_amount\", function(frm, cdt, cdn) {\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\n\t});\n\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"charge_type\", function(frm, cdt, cdn) {\n\t\tfrm.cscript.validate_taxes_and_charges(cdt, cdn);\n\t\tvar open_form = frm.open_grid_row();\n\t\tif(open_form) {\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(open_form);\n\t\t} else {\n\t\t\t// apply in current row\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.get_field('taxes').grid.get_row(cdn));\n\t\t}\n\t});\n\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"included_in_print_rate\", function(frm, cdt, cdn) {\n\t\tvar tax = frappe.get_doc(cdt, cdn);\n\t\ttry {\n\t\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\n\t\t\tcur_frm.cscript.validate_inclusive_tax(tax);\n\t\t} catch(e) {\n\t\t\ttax.included_in_print_rate = 0;\n\t\t\trefresh_field(\"included_in_print_rate\", tax.name, tax.parentfield);\n\t\t\tthrow e;\n\t\t}\n\t});\n}\n\nerpnext.taxes.set_conditional_mandatory_rate_or_amount = function(grid_row) {\n\tif(grid_row) {\n\t\tif(grid_row.doc.charge_type===\"Actual\") {\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", true);\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", true);\n\t\t\tgrid_row.toggle_editable(\"rate\", false);\n\t\t\tgrid_row.toggle_reqd(\"rate\", false);\n\t\t} else {\n\t\t\tgrid_row.toggle_editable(\"rate\", true);\n\t\t\tgrid_row.toggle_reqd(\"rate\", true);\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", false);\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", false);\n\t\t}\n\t}\n}\n\n\n// For customizing print\ncur_frm.pformat.total = function(doc) { return ''; }\ncur_frm.pformat.discount_amount = function(doc) { return ''; }\ncur_frm.pformat.grand_total = function(doc) { return ''; }\ncur_frm.pformat.rounded_total = function(doc) { return ''; }\ncur_frm.pformat.in_words = function(doc) { return ''; }\n\ncur_frm.pformat.taxes= function(doc){\n\t//function to make row of table\n\tvar make_row = function(title, val, bold, is_negative) {\n\t\tvar bstart = '<b>'; var bend = '</b>';\n\t\treturn '<tr><td style=\"width:50%;\">' + (bold?bstart:'') + title + (bold?bend:'') + '</td>'\n\t\t\t+ '<td style=\"width:50%;text-align:right;\">' + (is_negative ? '- ' : '')\n\t\t+ format_currency(val, doc.currency) + '</td></tr>';\n\t}\n\n\tfunction print_hide(fieldname) {\n\t\tvar doc_field = frappe.meta.get_docfield(doc.doctype, fieldname, doc.name);\n\t\treturn doc_field.print_hide;\n\t}\n\n\tout ='';\n\tif (!doc.print_without_amount) {\n\t\tvar cl = doc.taxes || [];\n\n\t\t// outer table\n\t\tvar out='<div><table class=\"noborder\" style=\"width:100%\"><tr><td style=\"width: 60%\"></td><td>';\n\n\t\t// main table\n\n\t\tout +='<table class=\"noborder\" style=\"width:100%\">';\n\n\t\tif(!print_hide('total')) {\n\t\t\tout += make_row('Total', doc.total, 1);\n\t\t}\n\n\t\t// Discount Amount on net total\n\t\tif(!print_hide('discount_amount') && doc.apply_discount_on == \"Net Total\" && doc.discount_amount)\n\t\t\tout += make_row('Discount Amount', doc.discount_amount, 0, 1);\n\n\t\t// add rows\n\t\tif(cl.length){\n\t\t\tfor(var i=0;i<cl.length;i++) {\n\t\t\t\tif(cl[i].tax_amount!=0 && !cl[i].included_in_print_rate)\n\t\t\t\t\tout += make_row(cl[i].description, cl[i].tax_amount, 0);\n\t\t\t}\n\t\t}\n\n\t\t// Discount Amount on grand total\n\t\tif(!print_hide('discount_amount') && doc.apply_discount_on == \"Grand Total\" && doc.discount_amount)\n\t\t\tout += make_row('Discount Amount', doc.discount_amount, 0, 1);\n\n\t\t// grand total\n\t\tif(!print_hide('grand_total'))\n\t\t\tout += make_row('Grand Total', doc.grand_total, 1);\n\n\t\tif(!print_hide('rounded_total'))\n\t\t\tout += make_row('Rounded Total', doc.rounded_total, 1);\n\n\t\tif(doc.in_words && !print_hide('in_words')) {\n\t\t\tout +='</table></td></tr>';\n\t\t\tout += '<tr><td colspan = \"2\">';\n\t\t\tout += '<table><tr><td style=\"width:25%;\"><b>In Words</b></td>';\n\t\t\tout += '<td style=\"width:50%;\">' + doc.in_words + '</td></tr>';\n\t\t}\n\t\tout += '</table></td></tr></table></div>';\n\t}\n\treturn out;\n}\n\n\nfrappe.ui.form.on('Payment Entry', {\n\tonload: function(frm) {\n\t\tif(frm.doc.__islocal) {\n\t\t\tif (!frm.doc.paid_from) frm.set_value(\"paid_from_account_currency\", null);\n\t\t\tif (!frm.doc.paid_to) frm.set_value(\"paid_to_account_currency\", null);\n\t\t}\n\t},\n\n\tsetup: function(frm) {\n\t\tfrm.set_query(\"paid_from\", function() {\n\t\t\tvar party_account_type = in_list([\"Customer\", \"Student\"], frm.doc.party_type) ?\n\t\t\t\t\"Receivable\" : \"Payable\";\n\t\t\tvar account_types = in_list([\"Pay\", \"Internal Transfer\"], frm.doc.payment_type) ?\n\t\t\t\t[\"Bank\", \"Cash\"] : party_account_type;\n\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"account_type\": [\"in\", account_types],\n\t\t\t\t\t\"is_group\": 0,\n\t\t\t\t\t\"company\": frm.doc.company\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrm.set_query(\"party_type\", function() {\n\t\t\treturn{\n\t\t\t\t\"filters\": {\n\t\t\t\t\t\"name\": [\"in\",[\"Customer\",\"Supplier\", \"Employee\", \"Student\"]],\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrm.set_query(\"paid_to\", function() {\n\t\t\tvar party_account_type = in_list([\"Customer\", \"Student\"], frm.doc.party_type) ?\n\t\t\t\t\"Receivable\" : \"Payable\";\n\t\t\tvar account_types = in_list([\"Receive\", \"Internal Transfer\"], frm.doc.payment_type) ?\n\t\t\t\t[\"Bank\", \"Cash\"] : party_account_type;\n\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"account_type\": [\"in\", account_types],\n\t\t\t\t\t\"is_group\": 0,\n\t\t\t\t\t\"company\": frm.doc.company\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrm.set_query(\"account\", \"deductions\", function() {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"is_group\": 0,\n\t\t\t\t\t\"company\": frm.doc.company\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrm.set_query(\"cost_center\", \"deductions\", function() {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"is_group\": 0,\n\t\t\t\t\t\"company\": frm.doc.company\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrm.set_query(\"reference_doctype\", \"references\", function() {\n\t\t\tif (frm.doc.party_type==\"Customer\") {\n\t\t\t\tvar doctypes = [\"Sales Order\", \"Sales Invoice\", \"Journal Entry\"];\n\t\t\t} else if (frm.doc.party_type==\"Supplier\") {\n\t\t\t\tvar doctypes = [\"Purchase Order\", \"Purchase Invoice\", \"Journal Entry\"];\n\t\t\t} else if (frm.doc.party_type==\"Employee\") {\n\t\t\t\tvar doctypes = [\"Expense Claim\", \"Journal Entry\"];\n\t\t\t} else if (frm.doc.party_type==\"Student\") {\n\t\t\t\tvar doctypes = [\"Fees\"];\n\t\t\t} else {\n\t\t\t\tvar doctypes = [\"Journal Entry\"];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tfilters: { \"name\": [\"in\", doctypes] }\n\t\t\t};\n\t\t});\n\n\t\tfrm.set_query(\"reference_name\", \"references\", function(doc, cdt, cdn) {\n\t\t\tchild = locals[cdt][cdn];\n\t\t\tfilters = {\"docstatus\": 1, \"company\": doc.company};\n\t\t\tparty_type_doctypes = ['Sales Invoice', 'Sales Order', 'Purchase Invoice', \n\t\t\t\t'Purchase Order', 'Expense Claim', 'Fees'];\n\n\t\t\tif (in_list(party_type_doctypes, child.reference_doctype)) {\n\t\t\t\tfilters[doc.party_type.toLowerCase()] = doc.party;\n\t\t\t}\n\n\t\t\tif(child.reference_doctype == \"Expense Claim\") {\n\t\t\t\tfilters[\"status\"] = \"Approved\";\n\t\t\t\tfilters[\"is_paid\"] = 0;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tfilters: filters\n\t\t\t};\n\t\t});\n\t},\n\n\trefresh: function(frm) {\n\t\terpnext.hide_company();\n\t\tfrm.events.hide_unhide_fields(frm);\n\t\tfrm.events.set_dynamic_labels(frm);\n\t\tfrm.events.show_general_ledger(frm);\n\t},\n\n\tcompany: function(frm) {\n\t\tfrm.events.hide_unhide_fields(frm);\n\t\tfrm.events.set_dynamic_labels(frm);\n\t},\n\n\thide_unhide_fields: function(frm) {\n\t\tvar company_currency = frm.doc.company? frappe.get_doc(\":Company\", frm.doc.company).default_currency: \"\";\n\n\t\tfrm.toggle_display(\"source_exchange_rate\",\n\t\t\t(frm.doc.paid_amount && frm.doc.paid_from_account_currency != company_currency));\n\n\t\tfrm.toggle_display(\"target_exchange_rate\", (frm.doc.received_amount &&\n\t\t\tfrm.doc.paid_to_account_currency != company_currency &&\n\t\t\tfrm.doc.paid_from_account_currency != frm.doc.paid_to_account_currency));\n\n\t\tfrm.toggle_display(\"base_paid_amount\", frm.doc.paid_from_account_currency != company_currency);\n\n\t\tfrm.toggle_display(\"base_received_amount\", (frm.doc.paid_to_account_currency != company_currency &&\n\t\t\tfrm.doc.paid_from_account_currency != frm.doc.paid_to_account_currency));\n\n\t\tfrm.toggle_display(\"received_amount\", (frm.doc.payment_type==\"Internal Transfer\" ||\n\t\t\tfrm.doc.paid_from_account_currency != frm.doc.paid_to_account_currency))\n\n\t\tfrm.toggle_display([\"base_total_allocated_amount\"],\n\t\t\t(frm.doc.paid_amount && frm.doc.received_amount && frm.doc.base_total_allocated_amount &&\n\t\t\t((frm.doc.payment_type==\"Receive\" && frm.doc.paid_from_account_currency != company_currency) ||\n\t\t\t(frm.doc.payment_type==\"Pay\" && frm.doc.paid_to_account_currency != company_currency))));\n\n\t\tvar party_amount = frm.doc.payment_type==\"Receive\" ?\n\t\t\tfrm.doc.paid_amount : frm.doc.received_amount;\n\n\t\tfrm.toggle_display(\"write_off_difference_amount\", (frm.doc.difference_amount && frm.doc.party &&\n\t\t\t(frm.doc.paid_from_account_currency == frm.doc.paid_to_account_currency) &&\n\t\t\t(frm.doc.total_allocated_amount > party_amount)));\n\n\t\tfrm.toggle_display(\"set_exchange_gain_loss\",\n\t\t\t(frm.doc.paid_amount && frm.doc.received_amount && frm.doc.difference_amount &&\n\t\t\t\t(frm.doc.paid_from_account_currency != company_currency ||\n\t\t\t\t\tfrm.doc.paid_to_account_currency != company_currency)));\n\n\t\tfrm.refresh_fields();\n\t},\n\n\tset_dynamic_labels: function(frm) {\n\t\tvar company_currency = frm.doc.company? frappe.get_doc(\":Company\", frm.doc.company).default_currency: \"\";\n\n\t\tfrm.set_currency_labels([\"base_paid_amount\", \"base_received_amount\", \"base_total_allocated_amount\",\n\t\t\t\"difference_amount\"], company_currency);\n\n\t\tfrm.set_currency_labels([\"paid_amount\"], frm.doc.paid_from_account_currency);\n\t\tfrm.set_currency_labels([\"received_amount\"], frm.doc.paid_to_account_currency);\n\n\t\tvar party_account_currency = frm.doc.payment_type==\"Receive\" ?\n\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency;\n\n\t\tfrm.set_currency_labels([\"total_allocated_amount\", \"unallocated_amount\"], party_account_currency);\n\n\t\tvar currency_field = (frm.doc.payment_type==\"Receive\") ? \"paid_from_account_currency\" : \"paid_to_account_currency\"\n\t\tfrm.set_df_property(\"total_allocated_amount\", \"options\", currency_field);\n\t\tfrm.set_df_property(\"unallocated_amount\", \"options\", currency_field);\n\t\tfrm.set_df_property(\"party_balance\", \"options\", currency_field);\n\n\t\tfrm.set_currency_labels([\"total_amount\", \"outstanding_amount\", \"allocated_amount\"],\n\t\t\tparty_account_currency, \"references\");\n\n\t\tfrm.set_currency_labels([\"amount\"], company_currency, \"deductions\");\n\n\t\tcur_frm.set_df_property(\"source_exchange_rate\", \"description\",\n\t\t\t(\"1 \" + frm.doc.paid_from_account_currency + \" = [?] \" + company_currency));\n\n\t\tcur_frm.set_df_property(\"target_exchange_rate\", \"description\",\n\t\t\t(\"1 \" + frm.doc.paid_to_account_currency + \" = [?] \" + company_currency));\n\n\t\tfrm.refresh_fields();\n\t},\n\n\tshow_general_ledger: function(frm) {\n\t\tif(frm.doc.docstatus==1) {\n\t\t\tfrm.add_custom_button(__('Ledger'), function() {\n\t\t\t\tfrappe.route_options = {\n\t\t\t\t\t\"voucher_no\": frm.doc.name,\n\t\t\t\t\t\"from_date\": frm.doc.posting_date,\n\t\t\t\t\t\"to_date\": frm.doc.posting_date,\n\t\t\t\t\t\"company\": frm.doc.company,\n\t\t\t\t\tgroup_by_voucher: 0\n\t\t\t\t};\n\t\t\t\tfrappe.set_route(\"query-report\", \"General Ledger\");\n\t\t\t}, \"fa fa-table\");\n\t\t}\n\t},\n\n\tpayment_type: function(frm) {\n\t\tif(frm.doc.payment_type == \"Internal Transfer\") {\n\t\t\t$.each([\"party\", \"party_balance\", \"paid_from\", \"paid_to\",\n\t\t\t\t\"references\", \"total_allocated_amount\"], function(i, field) {\n\t\t\t\tfrm.set_value(field, null);\n\t\t\t});\n\t\t} else {\n\t\t\tif(frm.doc.party) {\n\t\t\t\tfrm.events.party(frm);\t\n\t\t\t}\n\n\t\t\tif(frm.doc.mode_of_payment) {\n\t\t\t\tfrm.events.mode_of_payment(frm);\n\t\t\t}\n\t\t}\n\t},\n\n\tparty_type: function(frm) {\n\t\tif(frm.doc.party) {\n\t\t\t$.each([\"party\", \"party_balance\", \"paid_from\", \"paid_to\",\n\t\t\t\t\"paid_from_account_currency\", \"paid_from_account_balance\",\n\t\t\t\t\"paid_to_account_currency\", \"paid_to_account_balance\",\n\t\t\t\t\"references\", \"total_allocated_amount\"],\n\t\t\t\tfunction(i, field) {\n\t\t\t\t\tfrm.set_value(field, null);\n\t\t\t\t})\n\t\t}\n\t},\n\n\tparty: function(frm) {\n\t\tif(frm.doc.payment_type && frm.doc.party_type && frm.doc.party) {\n\t\t\tif(!frm.doc.posting_date) {\n\t\t\t\tfrappe.msgprint(__(\"Please select Posting Date before selecting Party\"))\n\t\t\t\tfrm.set_value(\"party\", \"\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\t\n\t\t\tfrm.set_party_account_based_on_party = true;\n\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_party_details\",\n\t\t\t\targs: {\n\t\t\t\t\tcompany: frm.doc.company,\n\t\t\t\t\tparty_type: frm.doc.party_type,\n\t\t\t\t\tparty: frm.doc.party,\n\t\t\t\t\tdate: frm.doc.posting_date\n\t\t\t\t},\n\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\tconsole.log(r, rt);\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tif(frm.doc.payment_type == \"Receive\") {\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from\", r.message.party_account);\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from_account_currency\", r.message.party_account_currency);\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from_account_balance\", r.message.account_balance);\n\t\t\t\t\t\t} else if (frm.doc.payment_type == \"Pay\"){\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to\", r.message.party_account);\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to_account_currency\", r.message.party_account_currency);\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to_account_balance\", r.message.account_balance);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfrm.set_value(\"party_balance\", r.message.party_balance);\n\t\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\n\t\t\t\t\t\tfrm.events.hide_unhide_fields(frm);\n\t\t\t\t\t\tfrm.events.set_dynamic_labels(frm);\n\t\t\t\t\t\tfrm.set_party_account_based_on_party = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tpaid_from: function(frm) {\n\t\tif(frm.set_party_account_based_on_party) return;\n\n\t\tfrm.events.set_account_currency_and_balance(frm, frm.doc.paid_from,\n\t\t\t\"paid_from_account_currency\", \"paid_from_account_balance\", function(frm) {\n\t\t\t\tif (frm.doc.payment_type == \"Receive\") {\n\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\n\t\t\t\t} else if (frm.doc.payment_type == \"Pay\") {\n\t\t\t\t\tfrm.events.paid_amount(frm);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\n\tpaid_to: function(frm) {\n\t\tif(frm.set_party_account_based_on_party) return;\n\n\t\tfrm.events.set_account_currency_and_balance(frm, frm.doc.paid_to,\n\t\t\t\"paid_to_account_currency\", \"paid_to_account_balance\", function(frm) {\n\t\t\t\tif(frm.doc.payment_type == \"Pay\") {\n\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\n\t\t\t\t} else if (frm.doc.payment_type == \"Receive\") {\n\t\t\t\t\tfrm.events.received_amount(frm);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\n\tset_account_currency_and_balance: function(frm, account, currency_field,\n\t\t\tbalance_field, callback_function) {\n\t\tif (frm.doc.posting_date && account) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_account_details\",\n\t\t\t\targs: {\n\t\t\t\t\t\"account\": account,\n\t\t\t\t\t\"date\": frm.doc.posting_date\n\t\t\t\t},\n\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tfrm.set_value(currency_field, r.message['account_currency']);\n\t\t\t\t\t\tfrm.set_value(balance_field, r.message['account_balance']);\n\n\t\t\t\t\t\tif(frm.doc.payment_type==\"Receive\" && currency_field==\"paid_to_account_currency\") {\n\t\t\t\t\t\t\tfrm.toggle_reqd([\"reference_no\", \"reference_date\"],\n\t\t\t\t\t\t\t\t(r.message['account_type'] == \"Bank\" ? 1 : 0));\n\t\t\t\t\t\t\tif(!frm.doc.received_amount && frm.doc.paid_amount)\n\t\t\t\t\t\t\t\tfrm.events.paid_amount(frm);\n\t\t\t\t\t\t} else if(frm.doc.payment_type==\"Pay\" && currency_field==\"paid_from_account_currency\") {\n\t\t\t\t\t\t\tfrm.toggle_reqd([\"reference_no\", \"reference_date\"],\n\t\t\t\t\t\t\t\t(r.message['account_type'] == \"Bank\" ? 1 : 0));\n\n\t\t\t\t\t\t\tif(!frm.doc.paid_amount && frm.doc.received_amount)\n\t\t\t\t\t\t\t\tfrm.events.received_amount(frm);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(callback_function) callback_function(frm);\n\n\t\t\t\t\t\tfrm.events.hide_unhide_fields(frm);\n\t\t\t\t\t\tfrm.events.set_dynamic_labels(frm);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\t\t\t\n\t\t}\n\t},\n\n\tpaid_from_account_currency: function(frm) {\n\t\tif(!frm.doc.paid_from_account_currency) return;\n\t\tvar company_currency = frappe.get_doc(\":Company\", frm.doc.company).default_currency;\n\n\t\tif (frm.doc.paid_from_account_currency == company_currency) {\n\t\t\tfrm.set_value(\"source_exchange_rate\", 1);\n\t\t} else if (frm.doc.paid_from){\n\t\t\tif (in_list([\"Internal Transfer\", \"Pay\"], frm.doc.payment_type)) {\n\t\t\t\tvar company_currency = frappe.get_doc(\":Company\", frm.doc.company).default_currency;\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.setup.utils.get_exchange_rate\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tfrom_currency: frm.doc.paid_from_account_currency,\n\t\t\t\t\t\tto_currency: company_currency,\n\t\t\t\t\t\ttransaction_date: frm.doc.posting_date\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\t\tfrm.set_value(\"source_exchange_rate\", r.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tfrm.events.set_current_exchange_rate(frm, \"source_exchange_rate\",\n\t\t\t\t\tfrm.doc.paid_from_account_currency, company_currency);\n\t\t\t}\n\t\t}\n\t},\n\n\tpaid_to_account_currency: function(frm) {\n\t\tif(!frm.doc.paid_to_account_currency) return;\n\t\tvar company_currency = frappe.get_doc(\":Company\", frm.doc.company).default_currency;\n\n\t\tfrm.events.set_current_exchange_rate(frm, \"target_exchange_rate\",\n\t\t\tfrm.doc.paid_to_account_currency, company_currency);\n\t},\n\n\tset_current_exchange_rate: function(frm, exchange_rate_field, from_currency, to_currency) {\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.setup.utils.get_exchange_rate\",\n\t\t\targs: {\n\t\t\t\ttransaction_date: frm.doc.posting_date,\n\t\t\t\tfrom_currency: from_currency,\n\t\t\t\tto_currency: to_currency\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tfrm.set_value(exchange_rate_field, r.message);\n\t\t\t}\n\t\t})\n\t},\n\t\n\tposting_date: function(frm) {\n\t\tfrm.events.paid_from_account_currency(frm);\n\t},\n\n\tsource_exchange_rate: function(frm) {\n\t\tif (frm.doc.paid_amount) {\n\t\t\tfrm.set_value(\"base_paid_amount\", flt(frm.doc.paid_amount) * flt(frm.doc.source_exchange_rate));\n\t\t\tif(!frm.set_paid_amount_based_on_received_amount &&\n\t\t\t\t\t(frm.doc.paid_from_account_currency == frm.doc.paid_to_account_currency)) {\n\t\t\t\tfrm.set_value(\"target_exchange_rate\", frm.doc.source_exchange_rate);\n\t\t\t\tfrm.set_value(\"base_received_amount\", frm.doc.base_paid_amount);\n\t\t\t}\n\t\t\t\n\t\t\tfrm.events.set_difference_amount(frm);\n\t\t}\n\n\t\t// Make read only if Accounts Settings doesn't allow stale rates\n\t\tfrappe.model.get_value(\"Accounts Settings\", null, \"allow_stale\",\n\t\t\tfunction(d){\n\t\t\t\tfrm.set_df_property(\"source_exchange_rate\", \"read_only\", cint(d.allow_stale) ? 0 : 1);\n\t\t\t}\n\t\t);\n\t},\n\n\ttarget_exchange_rate: function(frm) {\n\t\tfrm.set_paid_amount_based_on_received_amount = true;\n\t\t\n\t\tif (frm.doc.received_amount) {\n\t\t\tfrm.set_value(\"base_received_amount\",\n\t\t\t\tflt(frm.doc.received_amount) * flt(frm.doc.target_exchange_rate));\n\t\t\t\t\n\t\t\tif(!frm.doc.source_exchange_rate && \n\t\t\t\t\t(frm.doc.paid_from_account_currency == frm.doc.paid_to_account_currency)) {\n\t\t\t\tfrm.set_value(\"source_exchange_rate\", frm.doc.target_exchange_rate);\n\t\t\t\tfrm.set_value(\"base_paid_amount\", frm.doc.base_received_amount);\n\t\t\t}\n\t\t\t\n\t\t\tfrm.events.set_difference_amount(frm);\n\t\t}\n\t\tfrm.set_paid_amount_based_on_received_amount = false;\n\n\t\t// Make read only if Accounts Settings doesn't allow stale rates\n\t\tfrappe.model.get_value(\"Accounts Settings\", null, \"allow_stale\",\n\t\t\tfunction(d){\n\t\t\t\tfrm.set_df_property(\"target_exchange_rate\", \"read_only\", cint(d.allow_stale) ? 0 : 1);\n\t\t\t}\n\t\t);\n\t},\n\n\tpaid_amount: function(frm) {\n\t\tfrm.set_value(\"base_paid_amount\", flt(frm.doc.paid_amount) * flt(frm.doc.source_exchange_rate));\n\t\tfrm.trigger(\"reset_received_amount\");\n\t},\n\n\treceived_amount: function(frm) {\n\t\tfrm.set_paid_amount_based_on_received_amount = true;\n\n\t\tif(!frm.doc.paid_amount && frm.doc.paid_from_account_currency == frm.doc.paid_to_account_currency) {\n\t\t\tfrm.set_value(\"paid_amount\", frm.doc.received_amount);\n\n\t\t\tif(frm.doc.target_exchange_rate) {\n\t\t\t\tfrm.set_value(\"source_exchange_rate\", frm.doc.target_exchange_rate);\n\t\t\t}\n\t\t\tfrm.set_value(\"base_paid_amount\", frm.doc.base_received_amount);\n\t\t}\n\n\t\tfrm.set_value(\"base_received_amount\",\n\t\t\tflt(frm.doc.received_amount) * flt(frm.doc.target_exchange_rate));\n\n\t\tif(frm.doc.payment_type == \"Pay\")\n\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.received_amount);\n\t\telse\n\t\t\tfrm.events.set_difference_amount(frm);\n\t\t\n\t\tfrm.set_paid_amount_based_on_received_amount = false;\n\t},\n\t\n\treset_received_amount: function(frm) {\n\t\tif(!frm.set_paid_amount_based_on_received_amount &&\n\t\t\t\t(frm.doc.paid_from_account_currency == frm.doc.paid_to_account_currency)) {\n\t\t\t\n\t\t\tfrm.set_value(\"received_amount\", frm.doc.paid_amount);\n\n\t\t\tif(frm.doc.source_exchange_rate) {\n\t\t\t\tfrm.set_value(\"target_exchange_rate\", frm.doc.source_exchange_rate);\n\t\t\t}\n\t\t\tfrm.set_value(\"base_received_amount\", frm.doc.base_paid_amount);\n\t\t}\n\t\t\n\t\tif(frm.doc.payment_type == \"Receive\")\n\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.paid_amount);\n\t\telse\n\t\t\tfrm.events.set_difference_amount(frm);\n\t},\n\n\tget_outstanding_documents: function(frm) {\n\t\tfrm.clear_table(\"references\");\n\n\t\tif(!frm.doc.party) return;\n\n\t\tfrm.events.check_mandatory_to_fetch(frm);\n\t\tvar company_currency = frappe.get_doc(\":Company\", frm.doc.company).default_currency;\n\n\t\treturn  frappe.call({\n\t\t\tmethod: 'erpnext.accounts.doctype.payment_entry.payment_entry.get_outstanding_reference_documents',\n\t\t\targs: {\n\t\t\t\targs: {\n\t\t\t\t\t\"posting_date\": frm.doc.posting_date,\n\t\t\t\t\t\"company\": frm.doc.company,\n\t\t\t\t\t\"party_type\": frm.doc.party_type,\n\t\t\t\t\t\"payment_type\": frm.doc.payment_type,\n\t\t\t\t\t\"party\": frm.doc.party,\n\t\t\t\t\t\"party_account\": frm.doc.payment_type==\"Receive\" ? frm.doc.paid_from : frm.doc.paid_to\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\tvar total_positive_outstanding = 0;\n\t\t\t\t\tvar total_negative_outstanding = 0;\n\n\t\t\t\t\t$.each(r.message, function(i, d) {\n\t\t\t\t\t\tvar c = frm.add_child(\"references\");\n\t\t\t\t\t\tc.reference_doctype = d.voucher_type;\n\t\t\t\t\t\tc.reference_name = d.voucher_no;\n\t\t\t\t\t\tc.due_date = d.due_date\n\t\t\t\t\t\tc.total_amount = d.invoice_amount;\n\t\t\t\t\t\tc.outstanding_amount = d.outstanding_amount;\n\t\t\t\t\t\tc.bill_no = d.bill_no;\n\n\t\t\t\t\t\tif(!in_list([\"Sales Order\", \"Purchase Order\", \"Expense Claim\"], d.voucher_type)) {\n\t\t\t\t\t\t\tif(flt(d.outstanding_amount) > 0)\n\t\t\t\t\t\t\t\ttotal_positive_outstanding += flt(d.outstanding_amount);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\ttotal_negative_outstanding += Math.abs(flt(d.outstanding_amount));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar party_account_currency = frm.doc.payment_type==\"Receive\" ?\n\t\t\t\t\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency;\n\n\t\t\t\t\t\tif(party_account_currency != company_currency) {\n\t\t\t\t\t\t\tc.exchange_rate = d.exchange_rate;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.exchange_rate = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (in_list(['Sales Invoice', 'Purchase Invoice', \"Expense Claim\"], d.reference_doctype)){\n\t\t\t\t\t\t\tc.due_date = d.due_date;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif(\n\t\t\t\t\t\t(frm.doc.payment_type==\"Receive\" && frm.doc.party_type==\"Customer\") ||\n\t\t\t\t\t\t(frm.doc.payment_type==\"Pay\" && frm.doc.party_type==\"Supplier\")  ||\n\t\t\t\t\t\t(frm.doc.payment_type==\"Pay\" && frm.doc.party_type==\"Employee\")\n\t\t\t\t\t) {\n\t\t\t\t\t\tif(total_positive_outstanding > total_negative_outstanding)\n\t\t\t\t\t\t\tfrm.set_value(\"paid_amount\",\n\t\t\t\t\t\t\t\ttotal_positive_outstanding - total_negative_outstanding);\n\t\t\t\t\t} else if (\n\t\t\t\t\t\ttotal_negative_outstanding &&\n\t\t\t\t\t\ttotal_positive_outstanding < total_negative_outstanding\n\t\t\t\t\t) {\n\t\t\t\t\t\tfrm.set_value(\"received_amount\",\n\t\t\t\t\t\t\ttotal_negative_outstanding - total_positive_outstanding);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm,\n\t\t\t\t\t(frm.doc.payment_type==\"Receive\" ? frm.doc.paid_amount : frm.doc.received_amount));\n\t\t\t}\n\t\t});\n\t},\n\n\tallocate_payment_amount: function(frm) {\n\t\tif(frm.doc.payment_type == 'Internal Transfer'){\n\t\t\treturn\n\t\t}\n\n\t\tif(frm.doc.references.length == 0){\n\t\t\tfrm.events.get_outstanding_documents(frm);\n\t\t}\n\n\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.received_amount);\n\t},\n\n\tallocate_party_amount_against_ref_docs: function(frm, paid_amount) {\n\t\tvar total_positive_outstanding_including_order = 0;\n\t\tvar total_negative_outstanding = 0;\n\n\t\t$.each(frm.doc.references || [], function(i, row) {\n\t\t\tif(flt(row.outstanding_amount) > 0)\n\t\t\t\ttotal_positive_outstanding_including_order += flt(row.outstanding_amount);\n\t\t\telse\n\t\t\t\ttotal_negative_outstanding += Math.abs(flt(row.outstanding_amount));\n\t\t})\n\n\t\tvar allocated_negative_outstanding = 0;\n\t\tif ((frm.doc.payment_type==\"Receive\" && frm.doc.party_type==\"Customer\") ||\n\t\t\t\t(frm.doc.payment_type==\"Pay\" && frm.doc.party_type==\"Supplier\") ||\n\t\t\t\t(frm.doc.payment_type==\"Pay\" && frm.doc.party_type==\"Employee\")) {\n\t\t\tif(total_positive_outstanding_including_order > paid_amount) {\n\t\t\t\tvar remaining_outstanding = total_positive_outstanding_including_order - paid_amount;\n\t\t\t\tallocated_negative_outstanding = total_negative_outstanding < remaining_outstanding ?\n\t\t\t\t\ttotal_negative_outstanding : remaining_outstanding;\n\t\t\t}\n\n\t\t\tvar allocated_positive_outstanding =  paid_amount + allocated_negative_outstanding;\n\t\t} else if (in_list([\"Customer\", \"Supplier\"], frm.doc.party_type)) {\n\t\t\tif(paid_amount > total_negative_outstanding) {\n\t\t\t\tif(total_negative_outstanding == 0) {\n\t\t\t\t\tfrappe.msgprint(__(\"Cannot {0} {1} {2} without any negative outstanding invoice\",\n\t\t\t\t\t\t[frm.doc.payment_type,\n\t\t\t\t\t\t\t(frm.doc.party_type==\"Customer\" ? \"to\" : \"from\"), frm.doc.party_type]));\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__(\"Paid Amount cannot be greater than total negative outstanding amount {0}\", [total_negative_outstanding]));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tallocated_positive_outstanding = total_negative_outstanding - paid_amount;\n\t\t\t\tallocated_negative_outstanding = paid_amount +\n\t\t\t\t\t(total_positive_outstanding_including_order < allocated_positive_outstanding ?\n\t\t\t\t\t\ttotal_positive_outstanding_including_order : allocated_positive_outstanding)\n\t\t\t}\n\t\t}\n\n\t\t$.each(frm.doc.references || [], function(i, row) {\n\t\t\trow.allocated_amount = 0 //If allocate payment amount checkbox is unchecked, set zero to allocate amount\n\t\t\tif(frm.doc.allocate_payment_amount){\n\t\t\t\tif(row.outstanding_amount > 0 && allocated_positive_outstanding > 0) {\n\t\t\t\t\tif(row.outstanding_amount >= allocated_positive_outstanding) {\n\t\t\t\t\t\trow.allocated_amount = allocated_positive_outstanding;\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.allocated_amount = row.outstanding_amount;\n\t\t\t\t\t}\n\n\t\t\t\t\tallocated_positive_outstanding -= flt(row.allocated_amount);\n\t\t\t\t} else if (row.outstanding_amount < 0 && allocated_negative_outstanding) {\n\t\t\t\t\tif(Math.abs(row.outstanding_amount) >= allocated_negative_outstanding)\n\t\t\t\t\t\trow.allocated_amount = -1*allocated_negative_outstanding;\n\t\t\t\t\telse row.allocated_amount = row.outstanding_amount;\n\n\t\t\t\t\tallocated_negative_outstanding -= Math.abs(flt(row.allocated_amount));\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfrm.refresh_fields()\n\t\tfrm.events.set_total_allocated_amount(frm);\n\t},\n\n\tset_total_allocated_amount: function(frm) {\n\t\tvar total_allocated_amount = 0.0;\n\t\tvar base_total_allocated_amount = 0.0;\n\t\t$.each(frm.doc.references || [], function(i, row) {\n\t\t\tif (row.allocated_amount) {\n\t\t\t\ttotal_allocated_amount += flt(row.allocated_amount);\n\t\t\t\tbase_total_allocated_amount += flt(flt(row.allocated_amount)*flt(row.exchange_rate),\n\t\t\t\t\tprecision(\"base_paid_amount\"));\n\t\t\t}\n\t\t});\n\t\tfrm.set_value(\"total_allocated_amount\", Math.abs(total_allocated_amount));\n\t\tfrm.set_value(\"base_total_allocated_amount\", Math.abs(base_total_allocated_amount));\n\n\t\tfrm.events.set_difference_amount(frm);\n\t},\n\n\tset_difference_amount: function(frm) {\n\t\tvar unallocated_amount = 0;\n\t\tif(frm.doc.party) {\n\t\t\tvar party_amount = frm.doc.payment_type==\"Receive\" ?\n\t\t\t\tfrm.doc.paid_amount : frm.doc.received_amount;\n\n\t\t\tif(frm.doc.total_allocated_amount < party_amount) {\n\t\t\t\tunallocated_amount = party_amount - frm.doc.total_allocated_amount;\n\t\t\t}\n\t\t}\n\t\tfrm.set_value(\"unallocated_amount\", unallocated_amount);\n\n\t\tvar difference_amount = 0;\n\t\tvar base_unallocated_amount = flt(frm.doc.unallocated_amount) *\n\t\t\t(frm.doc.payment_type==\"Receive\" ? frm.doc.source_exchange_rate : frm.doc.target_exchange_rate);\n\n\t\tvar base_party_amount = flt(frm.doc.base_total_allocated_amount) + base_unallocated_amount;\n\n\t\tif(frm.doc.payment_type == \"Receive\") {\n\t\t\tdifference_amount = base_party_amount - flt(frm.doc.base_received_amount);\n\t\t} else if (frm.doc.payment_type == \"Pay\") {\n\t\t\tdifference_amount = flt(frm.doc.base_paid_amount) - base_party_amount;\n\t\t} else {\n\t\t\tdifference_amount = flt(frm.doc.base_paid_amount) - flt(frm.doc.base_received_amount);\n\t\t}\n\n\t\tvar total_deductions = frappe.utils.sum($.map(frm.doc.deductions || [],\n\t\t\tfunction(d) { return flt(d.amount) }));\n\n\t\tfrm.set_value(\"difference_amount\", difference_amount - total_deductions);\n\n\t\tfrm.events.hide_unhide_fields(frm);\n\t},\n\n\tcheck_mandatory_to_fetch: function(frm) {\n\t\t$.each([\"Company\", \"Party Type\", \"Party\", \"payment_type\"], function(i, field) {\n\t\t\tif(!frm.doc[frappe.model.scrub(field)]) {\n\t\t\t\tfrappe.msgprint(__(\"Please select {0} first\", [field]));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t});\n\t},\n\n\tvalidate_reference_document: function(frm, row) {\n\t\tvar _validate = function(i, row) {\n\t\t\tif (!row.reference_doctype) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(frm.doc.party_type==\"Customer\" &&\n\t\t\t\t!in_list([\"Sales Order\", \"Sales Invoice\", \"Journal Entry\"], row.reference_doctype)\n\t\t\t) {\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"reference_doctype\", null);\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Sales Order, Sales Invoice or Journal Entry\", [row.idx]));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif(frm.doc.party_type==\"Supplier\" &&\n\t\t\t\t!in_list([\"Purchase Order\", \"Purchase Invoice\", \"Journal Entry\"], row.reference_doctype)\n\t\t\t) {\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"against_voucher_type\", null);\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Purchase Order, Purchase Invoice or Journal Entry\", [row.idx]));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif(frm.doc.party_type==\"Employee\" &&\n\t\t\t\t!in_list([\"Expense Claim\", \"Journal Entry\"], row.reference_doctype)\n\t\t\t) {\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"against_voucher_type\", null);\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Expense Claim or Journal Entry\", [row.idx]));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (row) {\n\t\t\t_validate(0, row);\n\t\t} else {\n\t\t\t$.each(frm.doc.vouchers || [], _validate);\n\t\t}\n\t},\n\n\twrite_off_difference_amount: function(frm) {\n\t\tfrm.events.set_deductions_entry(frm, \"write_off_account\");\n\t},\n\n\tset_exchange_gain_loss: function(frm) {\n\t\tfrm.events.set_deductions_entry(frm, \"exchange_gain_loss_account\");\n\t},\n\n\tset_deductions_entry: function(frm, account) {\n\t\tif(frm.doc.difference_amount) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_company_defaults\",\n\t\t\t\targs: {\n\t\t\t\t\tcompany: frm.doc.company\n\t\t\t\t},\n\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tvar write_off_row = $.map(frm.doc[\"deductions\"] || [], function(t) {\n\t\t\t\t\t\t\treturn t.account==r.message[account] ? t : null; });\n\n\t\t\t\t\t\tif (!write_off_row.length) {\n\t\t\t\t\t\t\tvar row = frm.add_child(\"deductions\");\n\t\t\t\t\t\t\trow.account = r.message[account];\n\t\t\t\t\t\t\trow.cost_center = r.message[\"cost_center\"];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar row = write_off_row[0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.amount = flt(row.amount) + flt(frm.doc.difference_amount);\n\t\t\t\t\t\trefresh_field(\"deductions\");\n\n\t\t\t\t\t\tfrm.events.set_difference_amount(frm);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n});\n\n\nfrappe.ui.form.on('Payment Entry Reference', {\n\treference_doctype: function(frm, cdt, cdn) {\n\t\tvar row = locals[cdt][cdn];\n\t\tfrm.events.validate_reference_document(frm, row);\n\t},\n\n\treference_name: function(frm, cdt, cdn) {\n\t\tvar row = locals[cdt][cdn];\n\t\treturn frappe.call({\n\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_reference_details\",\n\t\t\targs: {\n\t\t\t\treference_doctype: row.reference_doctype,\n\t\t\t\treference_name: row.reference_name,\n\t\t\t\tparty_account_currency: frm.doc.payment_type==\"Receive\" ?\n\t\t\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\t$.each(r.message, function(field, value) {\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, field, value);\n\t\t\t\t\t})\n\t\t\t\t\tfrm.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\n\tallocated_amount: function(frm) {\n\t\tfrm.events.set_total_allocated_amount(frm);\n\t},\n\n\treferences_remove: function(frm) {\n\t\tfrm.events.set_total_allocated_amount(frm);\n\t}\n})\n\nfrappe.ui.form.on('Payment Entry Deduction', {\n\tamount: function(frm) {\n\t\tfrm.events.set_difference_amount(frm);\n\t},\n\n\tdeductions_remove: function(frm) {\n\t\tfrm.events.set_difference_amount(frm);\n\t}\n})\n","__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"allow_guest_to_view":0,"istable":0,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":1,"beta":0,"read_only_onload":0,"module":"Accounts","doctype":"DocType","autoname":"naming_series:","__kanban_boards":[],"issingle":0,"__listview_template":null,"name":"Payment Entry","idx":0,"hide_toolbar":0,"__workflow_docs":[],"title_field":"title","modified":"2017-08-31 11:20:37.578469","is_submittable":1,"name_case":"","__calendar_js":null,"permissions":[{"creation":"2016-06-01 14:38:51.012597","share":1,"doctype":"DocPerm","owner":"Administrator","export":1,"cancel":1,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":1,"write":1,"role":"Accounts User","print":1,"docstatus":0,"permlevel":0,"parent":"Payment Entry","read":1,"import":1,"report":1,"apply_user_permissions":0,"name":"b2e52ca73d","idx":1,"amend":1,"modified":"2017-09-29 01:32:17.862634","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1},{"creation":"2016-06-01 14:38:51.012597","share":1,"doctype":"DocPerm","owner":"Administrator","export":1,"cancel":1,"set_user_permissions":0,"modified_by":"Administrator","create":1,"submit":1,"write":1,"role":"Accounts Manager","print":1,"docstatus":0,"permlevel":0,"parent":"Payment Entry","read":1,"import":1,"report":1,"apply_user_permissions":0,"name":"946ca98a75","idx":2,"amend":1,"modified":"2017-09-29 01:32:17.862634","email":1,"parenttype":"DocType","parentfield":"permissions","if_owner":0,"delete":1}],"quick_entry":0,"__custom_js":"","__print_formats":[]},{"fields":[{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":["module"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Type","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Document","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"8a2f03749c","idx":1,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"reference_doctype","fieldtype":"Link","options":"DocType","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":1,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Name","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"38054a4a17","idx":2,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"reference_name","fieldtype":"Dynamic Link","options":"reference_doctype","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Due Date","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"7edc569a80","idx":3,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"due_date","fieldtype":"Date","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":1,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Supplier Invoice No","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"ac84573200","idx":4,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"bill_no","fieldtype":"Data","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"92031a28fb","idx":5,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"column_break_4","fieldtype":"Column Break","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Total Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"edda097308","idx":6,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"total_amount","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Outstanding","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"0b9df001a9","idx":7,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"outstanding_amount","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Allocated","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":2,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"0d3d6e68fc","idx":8,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"allocated_amount","fieldtype":"Float","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-01 16:55:32.196722","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":0,"reqd":0,"ignore_xss_filter":0,"in_global_search":0,"read_only":1,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Exchange Rate","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"depends_on":"eval:(doc.reference_doctype=='Purchase Invoice')","docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Reference","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5c11edcbf9","idx":9,"in_standard_filter":0,"modified":"2017-09-29 01:32:32.747838","parenttype":"DocType","fieldname":"exchange_rate","fieldtype":"Float","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2016-06-01 16:55:32.196722","__list_js":null,"track_changes":1,"track_seen":0,"sort_order":"DESC","__linked_with":null,"owner":"Administrator","editable_grid":1,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":null,"custom":0,"max_attachments":0,"__js":null,"__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"engine":"InnoDB","allow_guest_to_view":0,"istable":1,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"Accounts","doctype":"DocType","__dashboard":null,"__kanban_boards":null,"issingle":0,"__listview_template":null,"name":"Payment Entry Reference","idx":0,"hide_toolbar":0,"__workflow_docs":null,"modified":"2017-09-04 17:37:01.192312","is_submittable":0,"name_case":"","__calendar_js":null,"permissions":[],"quick_entry":1,"__custom_js":null,"__print_formats":null},{"fields":[{"collapsible":0,"no_copy":0,"creation":"2016-06-15 15:56:30.815503","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Account","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Deduction","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"5bb33f3e78","idx":1,"in_standard_filter":0,"modified":"2017-06-09 23:51:41.208460","parenttype":"DocType","fieldname":"account","fieldtype":"Link","options":"Account","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-15 15:56:30.815503","search_fields":["parent_cost_center","is_group"],"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":1,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Cost Center","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":"Setup","set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Deduction","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"f07087ae15","idx":2,"in_standard_filter":0,"modified":"2017-06-09 23:51:41.208460","parenttype":"DocType","fieldname":"cost_center","fieldtype":"Link","options":"Cost Center","report_hide":0,"parentfield":"fields"},{"collapsible":0,"no_copy":0,"creation":"2016-06-15 15:56:30.815503","search_fields":null,"doctype":"DocField","owner":"Administrator","in_list_view":1,"reqd":1,"ignore_xss_filter":0,"in_global_search":0,"read_only":0,"print_hide":0,"modified_by":"Administrator","ignore_user_permissions":0,"length":0,"label":"Amount","print_hide_if_no_value":0,"allow_bulk_edit":0,"linked_document_type":null,"set_only_once":0,"docstatus":0,"hidden":0,"in_filter":0,"permlevel":0,"columns":0,"bold":0,"parent":"Payment Entry Deduction","search_index":0,"allow_on_submit":0,"precision":"","is_custom_field":null,"remember_last_selected_value":0,"unique":0,"name":"beffb3247c","idx":3,"in_standard_filter":0,"modified":"2017-06-09 23:51:41.208460","parenttype":"DocType","fieldname":"amount","fieldtype":"Currency","report_hide":0,"parentfield":"fields"}],"image_view":0,"allow_import":0,"creation":"2016-06-15 15:56:30.815503","__list_js":null,"track_changes":0,"track_seen":0,"sort_order":"DESC","__linked_with":null,"owner":"Administrator","editable_grid":1,"__form_grid_templates":null,"in_create":0,"read_only":0,"__templates":null,"document_type":"","hide_heading":0,"modified_by":"Administrator","allow_rename":0,"__kanban_column_fields":null,"custom":0,"max_attachments":0,"__js":null,"__tree_js":null,"docstatus":0,"sort_field":"modified","__messages":null,"allow_copy":0,"allow_guest_to_view":0,"istable":1,"has_web_view":0,"__map_js":null,"__css":null,"show_name_in_global_search":0,"beta":0,"read_only_onload":0,"module":"Accounts","doctype":"DocType","__dashboard":null,"__kanban_boards":null,"issingle":0,"__listview_template":null,"name":"Payment Entry Deduction","idx":0,"hide_toolbar":0,"__workflow_docs":null,"modified":"2016-07-11 03:28:03.420683","is_submittable":0,"name_case":"","__calendar_js":null,"permissions":[],"quick_entry":1,"__custom_js":null,"__print_formats":null}],"user_settings":"{}"}