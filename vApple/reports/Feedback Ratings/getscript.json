{"message":{"html_format":null,"script":"// Copyright (c) 2016, Frappe Technologies Pvt. Ltd. and contributors\n// For license information, please see license.txt\n\nfrappe.query_reports[\"Feedback Ratings\"] = {\n\t\"filters\": [\n\t\t{\n\t\t\t\"fieldname\": \"document_type\",\n\t\t\t\"label\": __(\"Document Type\"),\n\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\"options\": \"DocType\",\n\t\t\t\"reqd\": 1,\n\t\t\t\"default\": \"Issue\",\n\t\t\t\"get_query\": function() {\n\t\t\t\treturn {\n\t\t\t\t\t\"query\": \"frappe.core.report.feedback_ratings.feedback_ratings.get_document_type\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"fieldname\": \"document_id\",\n\t\t\t\"label\": __(\"Document ID\"),\n\t\t\t\"fieldtype\": \"Dynamic Link\",\n\t\t\t\"get_options\": function() {\n\t\t\t\tvar document_type = frappe.query_report_filters_by_name.document_type.get_value();\n\t\t\t\tif(!document_type) {\n\t\t\t\t\tfrappe.throw(__(\"Please select Document Type first\"));\n\t\t\t\t}\n\t\t\t\treturn document_type;\n\t\t\t}\n\t\t},\n\t\t{ \n\t\t\t\"fieldname\":\"from_date\",\n\t\t\t\"label\": __(\"From Date\"),\n\t\t\t\"fieldtype\": \"Date\",\n\t\t\t'reqd': 1,\n\t\t\t\"default\": frappe.datetime.add_days(frappe.datetime.nowdate(), -30)\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"to_date\",\n\t\t\t\"label\": __(\"To Date\"),\n\t\t\t\"fieldtype\": \"Date\",\n\t\t\t'reqd': 1,\n\t\t\t\"default\":frappe.datetime.nowdate()\n\t\t}\n\t],\n\n\tget_chart_data: function(columns, result) {\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tx: 'Date',\n\t\t\t\tcolumns: [\n\t\t\t\t\t['Date'].concat($.map(result, function(d) { return d[0]; })),\n\t\t\t\t\t['Average Feedback'].concat($.map(result, function(d) { return d[1]; }))\n\t\t\t\t]\n\t\t\t},\n\t\t\tchart_type: 'line',\n\n\t\t}\n\t}\n}\n"}}