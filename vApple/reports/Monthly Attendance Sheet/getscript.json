{"message":{"html_format":null,"script":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n\nfrappe.query_reports[\"Monthly Attendance Sheet\"] = {\n\t\"filters\": [\n\t\t{\n\t\t\t\"fieldname\":\"month\",\n\t\t\t\"label\": __(\"Month\"),\n\t\t\t\"fieldtype\": \"Select\",\n\t\t\t\"options\": \"Jan\\nFeb\\nMar\\nApr\\nMay\\nJun\\nJul\\nAug\\nSep\\nOct\\nNov\\nDec\",\n\t\t\t\"default\": [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\",\n\t\t\t\t\"Dec\"][frappe.datetime.str_to_obj(frappe.datetime.get_today()).getMonth()],\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"year\",\n\t\t\t\"label\": __(\"Year\"),\n\t\t\t\"fieldtype\": \"Select\",\n\t\t\t\"reqd\": 1\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"employee\",\n\t\t\t\"label\": __(\"Employee\"),\n\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\"options\": \"Employee\"\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"company\",\n\t\t\t\"label\": __(\"Company\"),\n\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\"options\": \"Company\",\n\t\t\t\"default\": frappe.defaults.get_user_default(\"Company\"),\n\t\t\t\"reqd\": 1\n\t\t}\n\t],\n\n\t\"onload\": function() {\n\t\treturn  frappe.call({\n\t\t\tmethod: \"erpnext.hr.report.monthly_attendance_sheet.monthly_attendance_sheet.get_attendance_years\",\n\t\t\tcallback: function(r) {\n\t\t\t\tvar year_filter = frappe.query_report_filters_by_name.year;\n\t\t\t\tyear_filter.df.options = r.message;\n\t\t\t\tyear_filter.df.default = r.message.split(\"\\n\")[0];\n\t\t\t\tyear_filter.refresh();\n\t\t\t\tyear_filter.set_input(year_filter.df.default);\n\t\t\t}\n\t\t});\n\t}\n}\n"}}