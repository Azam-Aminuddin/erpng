{"message":{"html_format":"{%\n\tif (report.columns.length > 8) {\n\t\tfrappe.throw(__(\"Too many columns. Export the report and print it using a spreadsheet application.\"));\n\t}\n%}\n\n<style>\n\t.financial-statements-important td {\n\t\tfont-weight: bold;\n\t}\n\n\t.financial-statements-blank-row td {\n\t\theight: 37px;\n\t}\n</style>\n{% var letterhead= filters.letter_head || (frappe.get_doc(\":Company\", filters.company) && frappe.get_doc(\":Company\", filters.company).default_letter_head) || frappe.defaults.get_default(\"letter_head\"); %}\n{% if(letterhead) { %} \n<div style=\"margin-bottom: 7px;\" class=\"text-center\">\n\t{%= frappe.boot.letter_heads[letterhead].header %}\n</div>\n{% } %}\n<h2 class=\"text-center\">{%= __(report.report_name) %}</h2>\n<h3 class=\"text-center\">{%= filters.company %}</h3>\n<h3 class=\"text-center\">{%= filters.fiscal_year %}</h3>\n<h5 class=\"text-center\">{%=  __(\"Currency\") %} : {%= erpnext.get_currency(filters.company) %} </h4>\n{% if (filters.from_date) { %}\n\t<h4 class=\"text-center\">{%= dateutil.str_to_user(filters.from_date) %} - {%= dateutil.str_to_user(filters.to_date) %}</h3>\n{% } %}\n<hr>\n<table class=\"table table-bordered\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th style=\"width: {%= 100 - (report.columns.length - 2) * 13 %}%\"></th>\n\t\t\t{% for(var i=2, l=report.columns.length; i<l; i++) { %}\n\t\t\t\t<th class=\"text-right\">{%= report.columns[i].label %}</th>\n\t\t\t{% } %}\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t{% for(var j=0, k=data.length; j<k; j++) { %}\n\t\t\t{%\n\t\t\t\tvar row = data[j];\n\t\t\t\tvar row_class = data[j].parent_account ? \"\" : \"financial-statements-important\";\n\t\t\t\trow_class += data[j].account_name ? \"\" : \" financial-statements-blank-row\";\n\t\t\t%}\n\t\t\t<tr class=\"{%= row_class %}\">\n\t\t\t\t<td>\n\t\t\t\t\t<span style=\"padding-left: {%= cint(data[j].indent) * 2 %}em\">{%= row.account_name %}</span>\n\t\t\t\t</td>\n\t\t\t\t{% for(var i=2, l=report.columns.length; i<l; i++) { %}\n\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t{% var fieldname = report.columns[i].field; %}\n\t\t\t\t\t\t{% if (!is_null(row[fieldname])) { %}\n\t\t\t\t\t\t\t{%= format_number(row[fieldname], null)%}\n\t\t\t\t\t\t{% } %}\n\t\t\t\t\t</td>\n\t\t\t\t{% } %}\n\t\t\t</tr>\n\t\t{% } %}\n\t</tbody>\n</table>\n<p class=\"text-right text-muted\">Printed On {%= dateutil.str_to_user(dateutil.get_datetime_as_string()) %}</p>\n\n","script":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.require(\"assets/erpnext/js/financial_statements.js\", function() {\n\tfrappe.query_reports[\"Trial Balance\"] = {\n\t\t\"filters\": [\n\t\t\t{\n\t\t\t\t\"fieldname\": \"company\",\n\t\t\t\t\"label\": __(\"Company\"),\n\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\"options\": \"Company\",\n\t\t\t\t\"default\": frappe.defaults.get_user_default(\"Company\"),\n\t\t\t\t\"reqd\": 1\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"fiscal_year\",\n\t\t\t\t\"label\": __(\"Fiscal Year\"),\n\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\"options\": \"Fiscal Year\",\n\t\t\t\t\"default\": frappe.defaults.get_user_default(\"fiscal_year\"),\n\t\t\t\t\"reqd\": 1,\n\t\t\t\t\"on_change\": function(query_report) {\n\t\t\t\t\tvar fiscal_year = query_report.get_values().fiscal_year;\n\t\t\t\t\tif (!fiscal_year) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.model.with_doc(\"Fiscal Year\", fiscal_year, function(r) {\n\t\t\t\t\t\tvar fy = frappe.model.get_doc(\"Fiscal Year\", fiscal_year);\n\t\t\t\t\t\tfrappe.query_report_filters_by_name.from_date.set_input(fy.year_start_date);\n\t\t\t\t\t\tfrappe.query_report_filters_by_name.to_date.set_input(fy.year_end_date);\n\t\t\t\t\t\tquery_report.trigger_refresh();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"from_date\",\n\t\t\t\t\"label\": __(\"From Date\"),\n\t\t\t\t\"fieldtype\": \"Date\",\n\t\t\t\t\"default\": frappe.defaults.get_user_default(\"year_start_date\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"to_date\",\n\t\t\t\t\"label\": __(\"To Date\"),\n\t\t\t\t\"fieldtype\": \"Date\",\n\t\t\t\t\"default\": frappe.defaults.get_user_default(\"year_end_date\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"with_period_closing_entry\",\n\t\t\t\t\"label\": __(\"Period Closing Entry\"),\n\t\t\t\t\"fieldtype\": \"Check\",\n\t\t\t\t\"default\": 1\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"show_zero_values\",\n\t\t\t\t\"label\": __(\"Show zero values\"),\n\t\t\t\t\"fieldtype\": \"Check\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldname\": \"show_unclosed_fy_pl_balances\",\n\t\t\t\t\"label\": __(\"Show unclosed fiscal year's P&L balances\"),\n\t\t\t\t\"fieldtype\": \"Check\"\n\t\t\t}\n\t\t],\n\t\t\"formatter\": erpnext.financial_statements.formatter,\n\t\t\"tree\": true,\n\t\t\"name_field\": \"account\",\n\t\t\"parent_field\": \"parent_account\",\n\t\t\"initial_depth\": 3\n\t}\n});\n\n"}}