{"message":{"html_format":null,"script":"// Copyright (c) 2013, Frappe Technologies Pvt. Ltd. and contributors\n// For license information, please see license.txt\n\nfrappe.query_reports[\"Trial Balance for Party\"] = {\n\t\"filters\": [\n\t\t{\n\t\t\t\"fieldname\": \"company\",\n\t\t\t\"label\": __(\"Company\"),\n\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\"options\": \"Company\",\n\t\t\t\"default\": frappe.defaults.get_user_default(\"Company\"),\n\t\t\t\"reqd\": 1\n\t\t},\n\t\t{\n\t\t\t\"fieldname\": \"fiscal_year\",\n\t\t\t\"label\": __(\"Fiscal Year\"),\n\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\"options\": \"Fiscal Year\",\n\t\t\t\"default\": frappe.defaults.get_user_default(\"fiscal_year\"),\n\t\t\t\"reqd\": 1,\n\t\t\t\"on_change\": function(query_report) {\n\t\t\t\tvar fiscal_year = query_report.get_values().fiscal_year;\n\t\t\t\tif (!fiscal_year) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfrappe.model.with_doc(\"Fiscal Year\", fiscal_year, function(r) {\n\t\t\t\t\tvar fy = frappe.model.get_doc(\"Fiscal Year\", fiscal_year);\n\t\t\t\t\tfrappe.query_report_filters_by_name.from_date.set_input(fy.year_start_date);\n\t\t\t\t\tfrappe.query_report_filters_by_name.to_date.set_input(fy.year_end_date);\n\t\t\t\t\tquery_report.trigger_refresh();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"fieldname\": \"from_date\",\n\t\t\t\"label\": __(\"From Date\"),\n\t\t\t\"fieldtype\": \"Date\",\n\t\t\t\"default\": frappe.defaults.get_user_default(\"year_start_date\"),\n\t\t},\n\t\t{\n\t\t\t\"fieldname\": \"to_date\",\n\t\t\t\"label\": __(\"To Date\"),\n\t\t\t\"fieldtype\": \"Date\",\n\t\t\t\"default\": frappe.defaults.get_user_default(\"year_end_date\"),\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"party_type\",\n\t\t\t\"label\": __(\"Party Type\"),\n\t\t\t\"fieldtype\": \"Select\",\n\t\t\t\"options\": [\"Customer\", \"Supplier\"],\n\t\t\t\"default\": \"Customer\"\n\t\t},\n\t\t{\n\t\t\t\"fieldname\":\"party\",\n\t\t\t\"label\": __(\"Party\"),\n\t\t\t\"fieldtype\": \"Dynamic Link\",\n\t\t\t\"get_options\": function() {\n\t\t\t\tvar party_type = frappe.query_report_filters_by_name.party_type.get_value();\n\t\t\t\tvar party = frappe.query_report_filters_by_name.party.get_value();\n\t\t\t\tif(party && !party_type) {\n\t\t\t\t\tfrappe.throw(__(\"Please select Party Type first\"));\n\t\t\t\t}\n\t\t\t\treturn party_type;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"fieldname\": \"show_zero_values\",\n\t\t\t\"label\": __(\"Show zero values\"),\n\t\t\t\"fieldtype\": \"Check\"\n\t\t}\n\t]\n}\n"}}