{"docs":[{"system_page":1,"parent":null,"creation":"2012-10-04 18:45:29","_dynamic_page":1,"module":"Core","standard":"Yes","doctype":"Page","owner":"Administrator","icon":"fa fa-cog","style":null,"modified_by":"Administrator","name":"modules_setup","roles":[],"script":"frappe.templates[\"modules_setup\"] = ' <div class=\"padding modules-setup\"> <div class=\"row\"> <div class=\"col-sm-3\" name=\"set_for\"> <select class=\"form-control\" name=\"setup_for\"> <option value=\"everyone\">For Everyone</option> <option value=\"user\" selected>For User</option> </select> </div> <div class=\"col-sm-3\"> <select class=\"form-control\" name=\"user\"> <option value=\"Administrator\" selected>  Administrator (Administrator)</option> <option value=\"user1@testcompany.com\" >  User 1 Test Company (user1@testcompany.com)</option> <option value=\"User3@textileclothing.com\" >  User3 Textile Clothing (User3@textileclothing.com)</option> <option value=\"user2@testcompany.com\" >  User 2 TestCompany (user2@testcompany.com)</option> <option value=\"jati@agmsolusindo.com\" >  Super User (jati@agmsolusindo.com)</option> <option value=\"Guest\" >  Guest (Guest)</option> </select> </div> <div class=\"col-sm-3\"> <div class=\"checkbox\" style=\"margin-top: 5px;\"> <label> <input type=\"checkbox\" class=\"check-all\"> Select All </label> </div> </div> </div> <div class=\"block-warning hidden\"> <div class=\"alert alert-warning small\" style=\"margin: 0px; margin-top: 15px;\">Global Settings: Users will only be able to choose checked icons</div> </div> </div> <div class=\"padding modules-setup-icons\"> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Item\" class=\"module-select\" checked> Item </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Desk\" class=\"module-select\" checked> Tools </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"File Manager\" class=\"module-select\" checked> File Manager </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Customer\" class=\"module-select\" checked> Customer </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Website\" class=\"module-select\" checked> Website </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Supplier\" class=\"module-select\" checked> Supplier </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Integrations\" class=\"module-select\" checked> Integrations </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Employee\" class=\"module-select\" checked> Employee </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Lead\" class=\"module-select\" checked> Lead </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Sales Order\" class=\"module-select\" checked> Sales Order </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Project\" class=\"module-select\" checked> Project </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Setup\" class=\"module-select\" checked> Setup </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Task\" class=\"module-select\" checked> Task </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Issue\" class=\"module-select\" checked> Issue </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Email Inbox\" class=\"module-select\" checked> Email Inbox </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Sales Invoice\" class=\"module-select\" checked> Sales Invoice </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Core\" class=\"module-select\" checked> Developer </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"CRM\" class=\"module-select\" checked> CRM </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Contacts\" class=\"module-select\" checked> Contacts </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Profit and Loss Statement\" class=\"module-select\" checked> Profit and Loss Statement </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Selling\" class=\"module-select\" checked> Selling </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Buying\" class=\"module-select\" checked> Buying </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Stock\" class=\"module-select\" checked> Stock </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Accounts\" class=\"module-select\" checked> Accounts </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"HR\" class=\"module-select\" checked> Human Resources </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"ToDo\" class=\"module-select\" checked> ToDo </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Manufacturing\" class=\"module-select\" checked> Manufacturing </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"POS\" class=\"module-select\" checked> POS </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Projects\" class=\"module-select\" checked> Projects </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Support\" class=\"module-select\" checked> Support </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Learn\" class=\"module-select\" checked> Learn </label> </div> </div> <div> <div class=\"checkbox\"> <label> <input type=\"checkbox\" data-module=\"Maintenance\" class=\"module-select\" checked> Maintenance </label> </div> </div> </div>';\nfrappe.pages['modules_setup'].on_page_load = function(wrapper) {\n\tvar page = frappe.ui.make_app_page({\n\t\tparent: wrapper,\n\t\ttitle: __('Show or Hide Desktop Icons'),\n\t\tsingle_column: true\n\t});\n\tfrappe.modules_setup_page = page;\n\n\tpage.content = $(frappe.templates.modules_setup).appendTo(page.body);\n\n\tpage.content.find('select[name=\"setup_for\"]').on('change', function() {\n\t\tvar val = $(this).val();\n\t\tpage.content.find('select[name=\"user\"]').toggle(val !== \"everyone\");\n\t\tpage.content.find('.block-warning').toggleClass('hidden', val !== 'everyone');\n\t\tfrappe.reload_modules_setup_icons(page);\n\t});\n\n\tpage.content.find('select[name=\"user\"]').on('change', function() {\n\t\tfrappe.reload_modules_setup_icons(page);\n\t});\n\n\t// return selected user or null (if everyone)\n\tpage.get_user = function() {\n\t\tvar selected_user = null;\n\t\tif(page.content.find('select[name=\"setup_for\"]').length) {\n\t\t\tif(page.content.find('select[name=\"setup_for\"]').val()===\"everyone\") {\n\t\t\t\tselected_user = null;\n\t\t\t} else {\n\t\t\t\tselected_user = page.content.find('select[name=\"user\"]').val();\n\t\t\t}\n\t\t} else {\n\t\t\tselected_user = frappe.boot.user.name;\n\t\t}\n\t\treturn selected_user;\n\t}\n\n\t// save action\n\tpage.set_primary_action('Save', function() {\n\t\tvar hidden_list = [];\n\t\tpage.wrapper.find('input.module-select').each(function() {\n\t\t\tif(!$(this).is(\":checked\")) {\n\t\t\t\thidden_list.push($(this).attr('data-module'));\n\t\t\t}\n\t\t});\n\n\t\tfrappe.call({\n\t\t\tmethod: 'frappe.core.page.modules_setup.modules_setup.update',\n\t\t\targs: {\n\t\t\t\thidden_list: hidden_list,\n\t\t\t\tuser: page.get_user()\n\t\t\t},\n\t\t\tfreeze: true\n\t\t});\n\t});\n\n\t// for ctrl+s\n\twrapper.save_action = function() {\n\t\tpage.btn_primary.trigger('click');\n\t};\n\n\t// application installer\n\tif(frappe.user_roles.includes('System Manager')) {\n\t\tpage.add_inner_button('Install Apps', function() {\n\t\t\tfrappe.set_route('applications');\n\t\t});\n\t}\n\n\t// setup select all\n\t$('.check-all').on('click', function() {\n\t\t$(wrapper).find('input.module-select').prop('checked', $(this).prop('checked'));\n\t});\n}\n\nfrappe.pages['modules_setup'].on_page_show = function(wrapper) {\n\tif(frappe.route_options) {\n\t\tfrappe.modules_setup_page.content.find('select[name=\"setup_for\"]')\n\t\t\t.val('user').trigger('change');\n\t\tfrappe.modules_setup_page.content.find('select[name=\"user\"]')\n\t\t\t.val(frappe.route_options.user).trigger('change');\n\n\t\tfrappe.route_options = null;\n\t}\n}\n\n// reload modules html (with new hidden / blocked settings for given user)\nfrappe.reload_modules_setup_icons = function(page) {\n\tfrappe.call({\n\t\tmethod: 'frappe.core.page.modules_setup.modules_setup.get_module_icons_html',\n\t\targs: {\n\t\t\tuser: page.get_user()\n\t\t},\n\t\tfreeze: true,\n\t\tcallback: function(r) {\n\t\t\tpage.wrapper.find('.modules-setup-icons').replaceWith(r.message);\n\t\t}\n\t});\n}\n","title":"Modules Setup","restrict_to_domain":null,"modified":"2017-04-12 18:44:53.283640","content":null,"idx":1,"parenttype":null,"page_name":"modules_setup","docstatus":0,"parentfield":null}]}