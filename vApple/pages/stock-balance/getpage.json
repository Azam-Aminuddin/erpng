{"docs":[{"system_page":0,"parent":null,"creation":"2016-04-21 04:59:00.141546","module":"Stock","standard":"Yes","doctype":"Page","owner":"Administrator","icon":null,"style":null,"modified_by":"Administrator","name":"stock-balance","roles":[{"modified_by":"Administrator","name":null,"parent":"stock-balance","creation":"2016-04-21 04:59:00.141546","modified":"2017-06-09 23:52:07.883216","doctype":"Has Role","idx":1,"parenttype":"Page","role":"Stock User","owner":"Administrator","docstatus":0,"parentfield":"roles"}],"script":"frappe.pages['stock-balance'].on_page_load = function(wrapper) {\n\tvar page = frappe.ui.make_app_page({\n\t\tparent: wrapper,\n\t\ttitle: 'Stock Summary',\n\t\tsingle_column: true\n\t});\n\tpage.start = 0;\n\n\tpage.warehouse_field = page.add_field({\n\t\tfieldname: 'warehouse',\n\t\tlabel: __('Warehouse'),\n\t\tfieldtype:'Link',\n\t\toptions:'Warehouse',\n\t\tchange: function() {\n\t\t\tpage.item_dashboard.start = 0;\n\t\t\tpage.item_dashboard.refresh();\n\t\t}\n\t});\n\n\tpage.item_field = page.add_field({\n\t\tfieldname: 'item_code',\n\t\tlabel: __('Item'),\n\t\tfieldtype:'Link',\n\t\toptions:'Item',\n\t\tchange: function() {\n\t\t\tpage.item_dashboard.start = 0;\n\t\t\tpage.item_dashboard.refresh();\n\t\t}\n\t});\n\n\tpage.item_group_field = page.add_field({\n\t\tfieldname: 'item_group',\n\t\tlabel: __('Item Group'),\n\t\tfieldtype:'Link',\n\t\toptions:'Item Group',\n\t\tchange: function() {\n\t\t\tpage.item_dashboard.start = 0;\n\t\t\tpage.item_dashboard.refresh();\n\t\t}\n\t});\n\n\tpage.sort_selector = new frappe.ui.SortSelector({\n\t\tparent: page.wrapper.find('.page-form'),\n\t\targs: {\n\t\t\tsort_by: 'projected_qty',\n\t\t\tsort_order: 'asc',\n\t\t\toptions: [\n\t\t\t\t{fieldname: 'projected_qty', label: __('Projected qty')},\n\t\t\t\t{fieldname: 'reserved_qty', label: __('Reserved for sale')},\n\t\t\t\t{fieldname: 'reserved_qty_for_production', label: __('Reserved for manufacturing')},\n\t\t\t\t{fieldname: 'actual_qty', label: __('Actual qty in stock')},\n\t\t\t]\n\t\t},\n\t\tchange: function(sort_by, sort_order) {\n\t\t\tpage.item_dashboard.sort_by = sort_by;\n\t\t\tpage.item_dashboard.sort_order = sort_order;\n\t\t\tpage.item_dashboard.start = 0;\n\t\t\tpage.item_dashboard.refresh();\n\t\t}\n\t});\n\n\tpage.sort_selector.wrapper.css({'margin-right': '15px', 'margin-top': '4px'});\n\n\tfrappe.require('assets/js/item-dashboard.min.js', function() {\n\t\tpage.item_dashboard = new erpnext.stock.ItemDashboard({\n\t\t\tparent: page.main,\n\t\t})\n\n\t\tpage.item_dashboard.before_refresh = function() {\n\t\t\tthis.item_code = page.item_field.get_value();\n\t\t\tthis.warehouse = page.warehouse_field.get_value();\n\t\t\tthis.item_group = page.item_group_field.get_value();\n\t\t}\n\n\t\tpage.item_dashboard.refresh();\n\n\t\t// item click\n\t\tvar setup_click = function(doctype) {\n\t\t\tpage.main.on('click', 'a[data-type=\"'+ doctype.toLowerCase() +'\"]', function() {\n\t\t\t\tvar name = $(this).attr('data-name');\n\t\t\t\tvar field = page[doctype.toLowerCase() + '_field'];\n\t\t\t\tif(field.get_value()===name) {\n\t\t\t\t\tfrappe.set_route('Form', doctype, name)\n\t\t\t\t} else {\n\t\t\t\t\tfield.set_input(name);\n\t\t\t\t\tpage.item_dashboard.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tsetup_click('Item');\n\t\tsetup_click('Warehouse');\n\t});\n\n\n}\n","title":"Stock Summary","restrict_to_domain":null,"modified":"2016-07-14 06:39:09.096256","content":null,"idx":0,"parenttype":null,"page_name":"stock-balance","docstatus":0,"parentfield":null}]}