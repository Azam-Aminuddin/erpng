{"docs":[{"allow_copy":0,"allow_guest_to_view":0,"allow_import":0,"allow_rename":0,"autoname":"naming_series:","beta":0,"creation":"2013-03-28 10:35:31","custom":0,"description":"This tool helps you to update or fix the quantity and valuation of stock in the system. It is typically used to synchronise the system values and what actually exists in your warehouses.","docstatus":0,"doctype":"DocType","document_type":"Document","editable_grid":0,"fields":[{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"naming_series","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Series","length":0,"no_copy":1,"options":"SR/","permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":1,"unique":0,"doctype":"DocField","name":"7q1rodc2ul","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"company","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Company","length":0,"no_copy":0,"options":"Company","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":1,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"lejik11el","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"amended_from","fieldtype":"Link","hidden":0,"ignore_user_permissions":1,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Amended From","length":0,"no_copy":1,"options":"Stock Reconciliation","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"63db2gkl5d","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"col1","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"530bnqluua","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"default":"Today","fieldname":"posting_date","fieldtype":"Date","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Posting Date","length":0,"no_copy":0,"oldfieldname":"reconciliation_date","oldfieldtype":"Date","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6prblintnl","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"posting_time","fieldtype":"Time","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Posting Time","length":0,"no_copy":0,"oldfieldname":"reconciliation_time","oldfieldtype":"Time","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"19qcboib49","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"set_posting_time","fieldtype":"Check","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Edit Posting Date and Time","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7tvqn2g113","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"sb9","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"69fveemqrt","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":1,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"items","fieldtype":"Table","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Items","length":0,"no_copy":0,"options":"Stock Reconciliation Item","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5rmqtoq334","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_9","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4mcluq4iuu","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"","fieldname":"expense_account","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":1,"label":"Difference Account","length":0,"no_copy":0,"options":"Account","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5nm4qv4ejc","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"","fieldname":"cost_center","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":1,"label":"Cost Center","length":0,"no_copy":0,"options":"Cost Center","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2hna6g0q8","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"reconciliation_json","fieldtype":"Long Text","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Reconciliation JSON","length":0,"no_copy":1,"permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5p2aclgodc","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_13","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"562t7etc4n","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"difference_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Difference Amount","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"13uo6mtv4v","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"has_web_view":0,"hide_heading":0,"hide_toolbar":0,"icon":"fa fa-upload-alt","idx":1.0,"image_view":0,"in_create":0,"is_submittable":1,"issingle":0,"istable":0,"max_attachments":1,"menu_index":0.0,"modified":"2017-08-02 23:54:28.516007","modified_by":"Administrator","module":"Stock","name":"Stock Reconciliation","owner":"Administrator","permissions":[{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":0.0,"read":1.0,"report":1.0,"role":"Stock Manager","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0,"doctype":"DocPerm","name":"1o1aqkt47d","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Stock Reconciliation","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"quick_entry":0,"read_only":0,"read_only_onload":0,"search_fields":"posting_date","show_name_in_global_search":1,"sort_field":"modified","sort_order":"DESC","track_changes":0,"track_seen":0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.provide(\"erpnext.stock\");\r\n\r\nfrappe.ui.form.on(\"Stock Reconciliation\", {\r\n\tonload: function(frm) {\r\n\t\tfrm.add_fetch(\"item_code\", \"item_name\", \"item_name\");\r\n\r\n\t\t// end of life\r\n\t\tfrm.set_query(\"item_code\", \"items\", function(doc, cdt, cdn) {\r\n\t\t\treturn {\r\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\r\n\t\t\t\tfilters:{\r\n\t\t\t\t\t\"is_stock_item\": 1,\r\n\t\t\t\t\t\"has_serial_no\": 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (frm.doc.company) {\r\n\t\t\terpnext.queries.setup_queries(frm, \"Warehouse\", function() {\r\n\t\t\t\treturn erpnext.queries.warehouse(frm.doc);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function(frm) {\r\n\t\tif(frm.doc.docstatus \u003c 1) {\r\n\t\t\tfrm.add_custom_button(__(\"Items\"), function() {\r\n\t\t\t\tfrm.events.get_items(frm);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(frm.doc.company) {\r\n\t\t\tfrm.trigger(\"toggle_display_account_head\");\r\n\t\t}\r\n\t},\r\n\r\n\tget_items: function(frm) {\r\n\t\tfrappe.prompt({label:\"Warehouse\", fieldtype:\"Link\", options:\"Warehouse\", reqd: 1},\r\n\t\t\tfunction(data) {\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod:\"erpnext.stock.doctype.stock_reconciliation.stock_reconciliation.get_items\",\r\n\t\t\t\t\targs: {\r\n\t\t\t\t\t\twarehouse: data.warehouse,\r\n\t\t\t\t\t\tposting_date: frm.doc.posting_date,\r\n\t\t\t\t\t\tposting_time: frm.doc.posting_time\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\tvar items \u003d [];\r\n\t\t\t\t\t\tfrm.clear_table(\"items\");\r\n\t\t\t\t\t\tfor(var i\u003d0; i\u003c r.message.length; i++) {\r\n\t\t\t\t\t\t\tvar d \u003d frm.add_child(\"items\");\r\n\t\t\t\t\t\t\t$.extend(d, r.message[i]);\r\n\t\t\t\t\t\t\tif(!d.qty) d.qty \u003d null;\r\n\t\t\t\t\t\t\tif(!d.valuation_rate) d.valuation_rate \u003d null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfrm.refresh_field(\"items\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t, __(\"Get Items\"), __(\"Update\"));\r\n\t},\r\n\r\n\tset_valuation_rate_and_qty: function(frm, cdt, cdn) {\r\n\t\tvar d \u003d frappe.model.get_doc(cdt, cdn);\r\n\t\tif(d.item_code \u0026\u0026 d.warehouse) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.stock.doctype.stock_reconciliation.stock_reconciliation.get_stock_balance_for\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\titem_code: d.item_code,\r\n\t\t\t\t\twarehouse: d.warehouse,\r\n\t\t\t\t\tposting_date: frm.doc.posting_date,\r\n\t\t\t\t\tposting_time: frm.doc.posting_time\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"qty\", r.message.qty);\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"valuation_rate\", r.message.rate);\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_qty\", r.message.qty);\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_valuation_rate\", r.message.rate);\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"current_amount\", r.message.rate * r.message.qty);\r\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"amount\", r.message.rate * r.message.qty);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tset_item_code: function(doc, cdt, cdn) {\r\n\t\tvar d \u003d frappe.model.get_doc(cdt, cdn);\r\n\t\tif (d.barcode) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_item_code\",\r\n\t\t\t\targs: {\"barcode\": d.barcode },\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif (!r.exe){\r\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", r.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tset_amount_quantity: function(doc, cdt, cdn) {\r\n\t\tvar d \u003d frappe.model.get_doc(cdt, cdn);\r\n\t\tif (d.qty \u0026 d.valuation_rate) {\r\n\t\t\tfrappe.model.set_value(cdt, cdn, \"amount\", flt(d.qty) * flt(d.valuation_rate));\r\n\t\t\tfrappe.model.set_value(cdt, cdn, \"quantity_difference\", flt(d.qty) - flt(d.current_qty));\r\n\t\t\tfrappe.model.set_value(cdt, cdn, \"amount_difference\", flt(d.amount) - flt(d.current_amount));\r\n\t\t}\r\n\t},\r\n\tcompany: function(frm) {\r\n\t\tfrm.trigger(\"toggle_display_account_head\");\r\n\t},\r\n\ttoggle_display_account_head: function(frm) {\r\n\t\tfrm.toggle_display([\u0027expense_account\u0027, \u0027cost_center\u0027],\r\n\t\t\terpnext.is_perpetual_inventory_enabled(frm.doc.company));\r\n\t}\r\n});\r\n\r\nfrappe.ui.form.on(\"Stock Reconciliation Item\", {\r\n\tbarcode: function(frm, cdt, cdn) {\r\n\t\tfrm.events.set_item_code(frm, cdt, cdn);\r\n\t},\r\n\twarehouse: function(frm, cdt, cdn) {\r\n\t\tfrm.events.set_valuation_rate_and_qty(frm, cdt, cdn);\r\n\t},\r\n\titem_code: function(frm, cdt, cdn) {\r\n\t\tfrm.events.set_valuation_rate_and_qty(frm, cdt, cdn);\r\n\t},\r\n\tqty: function(frm, cdt, cdn) {\r\n\t\tfrm.events.set_amount_quantity(frm, cdt, cdn);\r\n\t},\r\n\tvaluation_rate: function(frm, cdt, cdn) {\r\n\t\tfrm.events.set_amount_quantity(frm, cdt, cdn);\r\n\t}\r\n\r\n});\r\n\r\nerpnext.stock.StockReconciliation \u003d erpnext.stock.StockController.extend({\r\n\tonload: function() {\r\n\t\tthis.set_default_expense_account();\r\n\t},\r\n\r\n\tset_default_expense_account: function() {\r\n\t\tvar me \u003d this;\r\n\t\tif(this.frm.doc.company) {\r\n\t\t\tif (erpnext.is_perpetual_inventory_enabled(this.frm.doc.company) \u0026\u0026 !this.frm.doc.expense_account) {\r\n\t\t\t\treturn this.frm.call({\r\n\t\t\t\t\tmethod: \"erpnext.accounts.utils.get_company_default\",\r\n\t\t\t\t\targs: {\r\n\t\t\t\t\t\t\"fieldname\": \"stock_adjustment_account\",\r\n\t\t\t\t\t\t\"company\": this.frm.doc.company\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\tif (!r.exc) {\r\n\t\t\t\t\t\t\tme.frm.set_value(\"expense_account\", r.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetup: function() {\r\n\t\tvar me \u003d this;\r\n\r\n\t\tthis.setup_posting_date_time_check();\r\n\r\n\t\tif (me.frm.doc.company \u0026\u0026 erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\r\n\t\t\tthis.frm.add_fetch(\"company\", \"stock_adjustment_account\", \"expense_account\");\r\n\t\t\tthis.frm.add_fetch(\"company\", \"cost_center\", \"cost_center\");\r\n\t\t}\r\n\t\tthis.frm.fields_dict[\"expense_account\"].get_query \u003d function() {\r\n\t\t\tif(erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"filters\": {\r\n\t\t\t\t\t\t\u0027company\u0027: me.frm.doc.company,\r\n\t\t\t\t\t\t\"is_group\": 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.frm.fields_dict[\"cost_center\"].get_query \u003d function() {\r\n\t\t\tif(erpnext.is_perpetual_inventory_enabled(me.frm.doc.company)) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"filters\": {\r\n\t\t\t\t\t\t\u0027company\u0027: me.frm.doc.company,\r\n\t\t\t\t\t\t\"is_group\": 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tif(this.frm.doc.docstatus\u003d\u003d1) {\r\n\t\t\tthis.show_stock_ledger();\r\n\t\t\tif (erpnext.is_perpetual_inventory_enabled(this.frm.doc.company)) {\r\n\t\t\t\tthis.show_general_ledger();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n});\r\n\r\ncur_frm.cscript \u003d new erpnext.stock.StockReconciliation({frm: cur_frm});\r\n"},{"allow_copy":0,"allow_guest_to_view":0,"allow_import":0,"allow_rename":0,"beta":0,"creation":"2015-02-17 01:06:05.072764","custom":0,"docstatus":0,"doctype":"DocType","document_type":"Other","editable_grid":1,"engine":"InnoDB","fields":[{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"barcode","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Barcode","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1l3h336331","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":3,"fieldname":"item_code","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":1,"in_list_view":1,"in_standard_filter":0,"label":"Item Code","length":0,"no_copy":0,"options":"Item","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7ckbcfbi65","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"item_name","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":1,"in_list_view":0,"in_standard_filter":0,"label":"Item Name","length":0,"no_copy":1,"permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"444civsehk","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":3,"fieldname":"warehouse","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Warehouse","length":0,"no_copy":0,"options":"Warehouse","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7lmeerlq00","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_6","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2j8e4rd1e9","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"description":"","fieldname":"qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Quantity","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6un07umgb8","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"description":"","fieldname":"valuation_rate","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Valuation Rate","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"ap78v5vl9","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Amount","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6dckdgsbu9","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_3","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Before reconciliation","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2c2hftc7g3","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"current_qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Current Qty","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5k3j855mm6","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_9","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1bkj2fgidb","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"current_valuation_rate","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Current Valuation Rate","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"287gj4jgf3","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"current_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Current Amount","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5j09b8m0vl","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_14","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"58n4lrln5","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"quantity_difference","fieldtype":"Read Only","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Quantity Difference","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6ajvhuovq7","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_16","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4qvq3mps2h","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"amount_difference","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Amount Difference","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"hnpr7n7fd","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"Stock Reconciliation Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"has_web_view":0,"hide_heading":0,"hide_toolbar":0,"idx":0.0,"image_view":0,"in_create":0,"is_submittable":0,"issingle":0,"istable":1,"max_attachments":0,"menu_index":0.0,"modified":"2017-08-03 00:03:40.412071","modified_by":"Administrator","module":"Stock","name":"Stock Reconciliation Item","name_case":"","owner":"Administrator","permissions":[],"quick_entry":1,"read_only":0,"read_only_onload":0,"show_name_in_global_search":0,"sort_field":"modified","sort_order":"DESC","track_changes":1,"track_seen":0}],"user_settings":"{}"}