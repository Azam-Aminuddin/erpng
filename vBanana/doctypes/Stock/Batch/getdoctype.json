{"docs":[{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":1.0,"allow_rename":0.0,"autoname":"","beta":0.0,"creation":"2013-03-05 14:50:38","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"Setup","editable_grid":0.0,"engine":"InnoDB","fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:doc.__islocal","fieldname":"batch_id","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Batch ID","length":0.0,"no_copy":1.0,"oldfieldname":"batch_id","oldfieldtype":"Data","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"item","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Item","length":0.0,"no_copy":0.0,"oldfieldname":"item","oldfieldtype":"Link","options":"Item","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"image","fieldtype":"Attach Image","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"image","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:doc.parent_batch","fieldname":"parent_batch","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Parent Batch","length":0.0,"no_copy":0.0,"options":"Batch","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_3","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"expiry_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Expiry Date","length":0.0,"no_copy":0.0,"oldfieldname":"expiry_date","oldfieldtype":"Date","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"source","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Source","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"supplier","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Supplier","length":0.0,"no_copy":0.0,"options":"Supplier","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_9","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"reference_doctype","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Source Document Type","length":0.0,"no_copy":0.0,"options":"DocType","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"reference_name","fieldtype":"Dynamic Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Source Document Name","length":0.0,"no_copy":0.0,"options":"reference_doctype","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"section_break_7","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"description","fieldtype":"Small Text","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Batch Description","length":0.0,"no_copy":0.0,"oldfieldname":"description","oldfieldtype":"Small Text","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"width":"300px"}],"has_web_view":0.0,"hide_heading":0.0,"hide_toolbar":0.0,"icon":"fa fa-archive","idx":1.0,"image_field":"image","image_view":0.0,"in_create":0.0,"is_submittable":0.0,"issingle":0.0,"istable":0.0,"max_attachments":5.0,"modified":"2017-05-21 21:00:11.096038","modified_by":"Administrator","module":"Stock","name":"Batch","owner":"harshada@webnotestech.com","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Item Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0}],"quick_entry":1.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":0.0,"sort_order":"DESC","title_field":"item","track_changes":0.0,"track_seen":0.0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.ui.form.on(\u0027Batch\u0027, {\r\n\tsetup: (frm) \u003d\u003e {\r\n\t\tfrm.fields_dict[\u0027item\u0027].get_query \u003d function(doc, cdt, cdn) {\r\n\t\t\treturn {\r\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\r\n\t\t\t\tfilters:{\r\n\t\t\t\t\t\u0027is_stock_item\u0027: 1,\r\n\t\t\t\t\t\u0027has_batch_no\u0027: 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefresh: (frm) \u003d\u003e {\r\n\t\tif(!frm.is_new()) {\r\n\t\t\tfrm.add_custom_button(__(\"View Ledger\"), () \u003d\u003e {\r\n\t\t\t\tfrappe.route_options \u003d {\r\n\t\t\t\t\tbatch_no: frm.doc.name\r\n\t\t\t\t};\r\n\t\t\t\tfrappe.set_route(\"query-report\", \"Stock Ledger\");\r\n\t\t\t});\r\n\t\t\tfrm.trigger(\u0027make_dashboard\u0027);\r\n\t\t}\r\n\t},\r\n\tmake_dashboard: (frm) \u003d\u003e {\r\n\t\tif(!frm.is_new()) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \u0027erpnext.stock.doctype.batch.batch.get_batch_qty\u0027,\r\n\t\t\t\targs: {batch_no: frm.doc.name},\r\n\t\t\t\tcallback: (r) \u003d\u003e {\r\n\t\t\t\t\tif(!r.message) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar section \u003d frm.dashboard.add_section(`\u003ch5 style\u003d\"margin-top: 0px;\"\u003e\r\n\t\t\t\t\t\t${ __(\"Stock Levels\") }\u003c/a\u003e\u003c/h5\u003e`);\r\n\r\n\t\t\t\t\t// sort by qty\r\n\t\t\t\t\tr.message.sort(function(a, b) { a.qty \u003e b.qty ? 1 : -1 });\r\n\r\n\t\t\t\t\tvar rows \u003d $(\u0027\u003cdiv\u003e\u003c/div\u003e\u0027).appendTo(section);\r\n\r\n\t\t\t\t\t// show\r\n\t\t\t\t\t(r.message || []).forEach(function(d) {\r\n\t\t\t\t\t\tif(d.qty \u003e 0) {\r\n\t\t\t\t\t\t\t$(`\u003cdiv class\u003d\u0027row\u0027 style\u003d\u0027margin-bottom: 10px;\u0027\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class\u003d\u0027col-sm-3 small\u0027 style\u003d\u0027padding-top: 3px;\u0027\u003e${d.warehouse}\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class\u003d\u0027col-sm-3 small text-right\u0027 style\u003d\u0027padding-top: 3px;\u0027\u003e${d.qty}\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class\u003d\u0027col-sm-6\u0027\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cbutton class\u003d\u0027btn btn-default btn-xs btn-move\u0027 style\u003d\u0027margin-right: 7px;\u0027\r\n\t\t\t\t\t\t\t\t\t\tdata-qty \u003d \"${d.qty}\"\r\n\t\t\t\t\t\t\t\t\t\tdata-warehouse \u003d \"${d.warehouse}\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t${__(\u0027Move\u0027)}\u003c/button\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cbutton class\u003d\u0027btn btn-default btn-xs btn-split\u0027\r\n\t\t\t\t\t\t\t\t\t\tdata-qty \u003d \"${d.qty}\"\r\n\t\t\t\t\t\t\t\t\t\tdata-warehouse \u003d \"${d.warehouse}\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t${__(\u0027Split\u0027)}\u003c/button\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\u003c/div\u003e`).appendTo(rows);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// move - ask for target warehouse and make stock entry\r\n\t\t\t\t\trows.find(\u0027.btn-move\u0027).on(\u0027click\u0027, function() {\r\n\t\t\t\t\t\tvar $btn \u003d $(this);\r\n\t\t\t\t\t\tfrappe.prompt({\r\n\t\t\t\t\t\t\tfieldname: \u0027to_warehouse\u0027,\r\n\t\t\t\t\t\t\tlabel: __(\u0027To Warehouse\u0027),\r\n\t\t\t\t\t\t\tfieldtype: \u0027Link\u0027,\r\n\t\t\t\t\t\t\toptions: \u0027Warehouse\u0027\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(data) \u003d\u003e {\r\n\t\t\t\t\t\t\tfrappe.call({\r\n\t\t\t\t\t\t\t\tmethod: \u0027erpnext.stock.doctype.stock_entry.stock_entry_utils.make_stock_entry\u0027,\r\n\t\t\t\t\t\t\t\targs: {\r\n\t\t\t\t\t\t\t\t\titem_code: frm.doc.item,\r\n\t\t\t\t\t\t\t\t\tbatch_no: frm.doc.name,\r\n\t\t\t\t\t\t\t\t\tqty: $btn.attr(\u0027data-qty\u0027),\r\n\t\t\t\t\t\t\t\t\tfrom_warehouse: $btn.attr(\u0027data-warehouse\u0027),\r\n\t\t\t\t\t\t\t\t\tto_warehouse: data.to_warehouse\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcallback: (r) \u003d\u003e {\r\n\t\t\t\t\t\t\t\t\tfrappe.show_alert(__(\u0027Stock Entry {0} created\u0027,\r\n\t\t\t\t\t\t\t\t\t\t[\u0027\u003ca href\u003d\"#Form/Stock Entry/\u0027+r.message.name+\u0027\"\u003e\u0027 + r.message.name+ \u0027\u003c/a\u003e\u0027]));\r\n\t\t\t\t\t\t\t\t\tfrm.refresh();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t__(\u0027Select Target Warehouse\u0027),\r\n\t\t\t\t\t\t__(\u0027Move\u0027)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// split - ask for new qty and batch ID (optional)\r\n\t\t\t\t\t// and make stock entry via batch.batch_split\r\n\t\t\t\t\trows.find(\u0027.btn-split\u0027).on(\u0027click\u0027, function() {\r\n\t\t\t\t\t\tvar $btn \u003d $(this);\r\n\t\t\t\t\t\tfrappe.prompt([{\r\n\t\t\t\t\t\t\tfieldname: \u0027qty\u0027,\r\n\t\t\t\t\t\t\tlabel: __(\u0027New Batch Qty\u0027),\r\n\t\t\t\t\t\t\tfieldtype: \u0027Float\u0027,\r\n\t\t\t\t\t\t\t\u0027default\u0027: $btn.attr(\u0027data-qty\u0027)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfieldname: \u0027new_batch_id\u0027,\r\n\t\t\t\t\t\t\tlabel: __(\u0027New Batch ID (Optional)\u0027),\r\n\t\t\t\t\t\t\tfieldtype: \u0027Data\u0027,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t(data) \u003d\u003e {\r\n\t\t\t\t\t\t\tfrappe.call({\r\n\t\t\t\t\t\t\t\tmethod: \u0027erpnext.stock.doctype.batch.batch.split_batch\u0027,\r\n\t\t\t\t\t\t\t\targs: {\r\n\t\t\t\t\t\t\t\t\titem_code: frm.doc.item,\r\n\t\t\t\t\t\t\t\t\tbatch_no: frm.doc.name,\r\n\t\t\t\t\t\t\t\t\tqty: data.qty,\r\n\t\t\t\t\t\t\t\t\twarehouse: $btn.attr(\u0027data-warehouse\u0027),\r\n\t\t\t\t\t\t\t\t\tnew_batch_id: data.new_batch_id\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcallback: (r) \u003d\u003e {\r\n\t\t\t\t\t\t\t\t\tfrm.refresh();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t__(\u0027Split Batch\u0027),\r\n\t\t\t\t\t\t__(\u0027Split\u0027)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tfrm.dashboard.show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})\r\n\r\n","__list_js":"frappe.listview_settings[\u0027Batch\u0027] \u003d {\r\n\tadd_fields: [\"item\", \"expiry_date\"],\r\n\tget_indicator: function(doc) {\r\n\t\tif(doc.expiry_date \u0026\u0026 frappe.datetime.get_diff(doc.expiry_date) \u003c\u003d 0) {\r\n\t\t\treturn [__(\"Expired\"), \"red\", \"expiry_date,\u003e\u003d,Today\"]\r\n\t\t} else if(doc.expiry_date) {\r\n\t\t\treturn [__(\"Not Expired\"), \"green\", \"expiry_date,\u003c,Today\"]\r\n\t\t} else {\r\n\t\t\treturn [\"Not Set\", \"darkgrey\", \"\"];\r\n\t\t}\r\n\t}\r\n};\r\n"}],"user_settings":"{}"}