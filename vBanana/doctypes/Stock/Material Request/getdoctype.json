{"docs":[{"allow_copy":0,"allow_guest_to_view":0,"allow_import":1,"allow_rename":0,"autoname":"naming_series:","beta":0,"creation":"2013-03-07 14:48:38","custom":0,"docstatus":0,"doctype":"DocType","document_type":"Document","editable_grid":0,"fields":[{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"type_section","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"","length":0,"no_copy":0,"options":"fa fa-pushpin","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"144i3sa84s","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"naming_series","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Series","length":0,"no_copy":1,"oldfieldname":"naming_series","oldfieldtype":"Select","options":"MREQ-","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":1,"unique":0,"doctype":"DocField","name":"jhvq7qkde","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"default":"{material_request_type}","fieldname":"title","fieldtype":"Data","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Title","length":0,"no_copy":1,"permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"71mg39jcmr","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"material_request_type","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":1,"label":"Type","length":0,"no_copy":0,"options":"Purchase\nMaterial Transfer\nMaterial Issue\nManufacture","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3ffp9d7ims","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_2","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"18uo86u5dv","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"fieldname":"schedule_date","fieldtype":"Date","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Required Date","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5dckqgi61a","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"company","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":1,"label":"Company","length":0,"no_copy":0,"oldfieldname":"company","oldfieldtype":"Link","options":"Company","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"150px","read_only":0,"remember_last_selected_value":1,"report_hide":0,"reqd":1,"search_index":1,"set_only_once":0,"unique":0,"width":"150px","doctype":"DocField","name":"37mtv4nnvk","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"amended_from","fieldtype":"Link","hidden":0,"ignore_user_permissions":1,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Amended From","length":0,"no_copy":1,"oldfieldname":"amended_from","oldfieldtype":"Data","options":"Material Request","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"150px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"150px","doctype":"DocField","name":"61cprlqn9p","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"items_section","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"","length":0,"no_copy":0,"oldfieldtype":"Section Break","options":"fa fa-shopping-cart","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"30jvsuio5q","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"items","fieldtype":"Table","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Items","length":0,"no_copy":0,"oldfieldname":"indent_details","oldfieldtype":"Table","options":"Material Request Item","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3c6dll9j6u","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":1,"columns":0,"fieldname":"more_info","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"More Information","length":0,"no_copy":0,"oldfieldtype":"Section Break","options":"fa fa-file-text","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4kqk0rrln3","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"requested_by","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":1,"label":"Requested For","length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6dnpqv5neu","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"default":"Today","fieldname":"transaction_date","fieldtype":"Date","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Transaction Date","length":0,"no_copy":1,"oldfieldname":"transaction_date","oldfieldtype":"Date","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"100px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":1,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"6ttn3m4ku5","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break2","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"oldfieldtype":"Column Break","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"50%","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"50%","doctype":"DocField","name":"en4h3l0t0","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"status","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":1,"label":"Status","length":0,"no_copy":1,"oldfieldname":"status","oldfieldtype":"Select","options":"\nDraft\nSubmitted\nStopped\nCancelled\nPending\nPartially Ordered\nOrdered\nIssued\nTransferred","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"100px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":1,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"4ev7d4a8rj","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"per_ordered","fieldtype":"Percent","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"% Ordered","length":0,"no_copy":1,"oldfieldname":"per_ordered","oldfieldtype":"Currency","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5mqjb75q1","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":1,"columns":0,"fieldname":"printing_details","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Printing Details","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"bqba6akob","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"fieldname":"letter_head","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Letter Head","length":0,"no_copy":0,"oldfieldname":"letter_head","oldfieldtype":"Select","options":"Letter Head","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"73cncuoboh","docstatus":0,"idx":17,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"fieldname":"select_print_heading","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Print Heading","length":0,"no_copy":0,"options":"Print Heading","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7tnng8ponb","docstatus":0,"idx":18,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":1,"collapsible_depends_on":"terms","columns":0,"fieldname":"terms_section_break","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Terms and Conditions","length":0,"no_copy":0,"oldfieldtype":"Section Break","options":"fa fa-legal","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2tbb56jsak","docstatus":0,"idx":19,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"tc_name","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Terms","length":0,"no_copy":0,"oldfieldname":"tc_name","oldfieldtype":"Link","options":"Terms and Conditions","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":1,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"47ladhjuu5","docstatus":0,"idx":20,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_bulk_edit":0,"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"terms","fieldtype":"Text Editor","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Terms and Conditions Content","length":0,"no_copy":0,"oldfieldname":"terms","oldfieldtype":"Text Editor","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"37m6qtls7i","docstatus":0,"idx":21,"parenttype":"DocType","parentfield":"fields","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"has_web_view":0,"hide_heading":0,"hide_toolbar":0,"icon":"fa fa-ticket","idx":70.0,"image_view":0,"in_create":0,"is_submittable":1,"issingle":0,"istable":0,"max_attachments":0,"menu_index":0.0,"modified":"2017-10-05 18:24:17.148782","modified_by":"Administrator","module":"Stock","name":"Material Request","owner":"Administrator","permissions":[{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Purchase Manager","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0,"doctype":"DocPerm","name":"680crc9h0h","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Stock Manager","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0,"doctype":"DocPerm","name":"1n4r2iaolf","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"permissions","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Stock User","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0,"doctype":"DocPerm","name":"pe50dmmd2","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"permissions","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Purchase User","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0,"doctype":"DocPerm","name":"5cfodde896","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"permissions","parent":"Material Request","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"quick_entry":1,"read_only":0,"read_only_onload":1,"search_fields":"status,transaction_date","show_name_in_global_search":1,"sort_field":"modified","sort_order":"DESC","title_field":"title","track_changes":0,"track_seen":0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\n/* Adding /erpnext/public/js/controllers/buying.js */\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.provide(\"erpnext.buying\");\r\n\r\ncur_frm.cscript.tax_table \u003d \"Purchase Taxes and Charges\";\r\n\r\n/* Adding /erpnext/accounts/doctype/purchase_taxes_and_charges_template/purchase_taxes_and_charges_template.js */\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\ncur_frm.cscript.tax_table \u003d \"Purchase Taxes and Charges\";\r\n\r\n/* Adding /erpnext/public/js/controllers/accounts.js */\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\n// get tax rate\r\nfrappe.provide(\"erpnext.taxes\");\r\nfrappe.provide(\"erpnext.taxes.flags\");\r\n\r\nfrappe.ui.form.on(cur_frm.doctype, {\r\n\tsetup: function(frm) {\r\n\t\t// set conditional display for rate column in taxes\r\n\t\t$(frm.wrapper).on(\u0027grid-row-render\u0027, function(e, grid_row) {\r\n\t\t\tif(in_list([\u0027Sales Taxes and Charges\u0027, \u0027Purchase Taxes and Charges\u0027], grid_row.doc.doctype)) {\r\n\t\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(grid_row);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tonload: function(frm) {\r\n\t\tif(frm.get_field(\"taxes\")) {\r\n\t\t\tfrm.set_query(\"account_head\", \"taxes\", function(doc) {\r\n\t\t\t\tif(frm.cscript.tax_table \u003d\u003d \"Sales Taxes and Charges\") {\r\n\t\t\t\t\tvar account_type \u003d [\"Tax\", \"Chargeable\", \"Expense Account\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar account_type \u003d [\"Tax\", \"Chargeable\", \"Income Account\"];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tquery: \"erpnext.controllers.queries.tax_account_query\",\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t\"account_type\": account_type,\r\n\t\t\t\t\t\t\"company\": doc.company\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfrm.set_query(\"cost_center\", \"taxes\", function(doc) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t\u0027company\u0027: doc.company,\r\n\t\t\t\t\t\t\"is_group\": 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tvalidate: function(frm) {\r\n\t\t// neither is absolutely mandatory\r\n\t\tif(frm.get_docfield(\"taxes\")) {\r\n\t\t\tfrm.get_docfield(\"taxes\", \"rate\").reqd \u003d 0;\r\n\t\t\tfrm.get_docfield(\"taxes\", \"tax_amount\").reqd \u003d 0;\r\n\t\t}\r\n\r\n\t},\r\n\ttaxes_on_form_rendered: function(frm) {\r\n\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.open_grid_row());\r\n\t}\r\n});\r\n\r\nfrappe.ui.form.on(\u0027Sales Invoice Payment\u0027, {\r\n\tmode_of_payment: function(frm, cdt, cdn) {\r\n\t\tvar d \u003d locals[cdt][cdn];\r\n\t\tget_payment_mode_account(frm, d.mode_of_payment, function(account){\r\n\t\t\tfrappe.model.set_value(cdt, cdn, \u0027account\u0027, account)\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Purchase Invoice\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tfrm.set_value(\u0027cash_bank_account\u0027, account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Payment Entry\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tvar payment_account_field \u003d frm.doc.payment_type \u003d\u003d \"Receive\" ? \"paid_to\" : \"paid_from\";\r\n\t\t\tfrm.set_value(payment_account_field, account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Salary Structure\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tfrm.set_value(\"payment_account\", account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nvar get_payment_mode_account \u003d function(frm, mode_of_payment, callback) {\r\n\tif(!frm.doc.company) {\r\n\t\tfrappe.throw(__(\"Please select the Company first\"));\r\n\t}\r\n\r\n\tif(!mode_of_payment) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn  frappe.call({\r\n\t\tmethod: \"erpnext.accounts.doctype.sales_invoice.sales_invoice.get_bank_cash_account\",\r\n\t\targs: {\r\n\t\t\t\"mode_of_payment\": mode_of_payment,\r\n\t\t\t\"company\": frm.doc.company\r\n\t\t},\r\n\t\tcallback: function(r, rt) {\r\n\t\t\tif(r.message) {\r\n\t\t\t\tcallback(r.message.account)\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\ncur_frm.cscript.account_head \u003d function(doc, cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\tif(!d.charge_type \u0026\u0026 d.account_head){\r\n\t\tfrappe.msgprint(\"Please select Charge Type first\");\r\n\t\tfrappe.model.set_value(cdt, cdn, \"account_head\", \"\");\r\n\t} else if(d.account_head \u0026\u0026 d.charge_type!\u003d\u003d\"Actual\") {\r\n\t\tfrappe.call({\r\n\t\t\ttype:\"GET\",\r\n\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_tax_rate\",\r\n\t\t\targs: {\"account_head\":d.account_head},\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"rate\", r.message.tax_rate || 0);\r\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"description\", r.message.account_name);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\ncur_frm.cscript.validate_taxes_and_charges \u003d function(cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\tvar msg \u003d \"\";\r\n\r\n\tif(d.account_head \u0026\u0026 !d.description) {\r\n\t\t// set description from account head\r\n\t\td.description \u003d d.account_head.split(\u0027 - \u0027).slice(0, -1).join(\u0027 - \u0027);\r\n\t}\r\n\r\n\tif(!d.charge_type \u0026\u0026 (d.row_id || d.rate || d.tax_amount)) {\r\n\t\tmsg \u003d __(\"Please select Charge Type first\");\r\n\t\td.row_id \u003d \"\";\r\n\t\td.rate \u003d d.tax_amount \u003d 0.0;\r\n\t} else if((d.charge_type \u003d\u003d \u0027Actual\u0027 || d.charge_type \u003d\u003d \u0027On Net Total\u0027) \u0026\u0026 d.row_id) {\r\n\t\tmsg \u003d __(\"Can refer row only if the charge type is \u0027On Previous Row Amount\u0027 or \u0027Previous Row Total\u0027\");\r\n\t\td.row_id \u003d \"\";\r\n\t} else if((d.charge_type \u003d\u003d \u0027On Previous Row Amount\u0027 || d.charge_type \u003d\u003d \u0027On Previous Row Total\u0027) \u0026\u0026 d.row_id) {\r\n\t\tif (d.idx \u003d\u003d 1) {\r\n\t\t\tmsg \u003d __(\"Cannot select charge type as \u0027On Previous Row Amount\u0027 or \u0027On Previous Row Total\u0027 for first row\");\r\n\t\t\td.charge_type \u003d \u0027\u0027;\r\n\t\t} else if (!d.row_id) {\r\n\t\t\tmsg \u003d __(\"Please specify a valid Row ID for row {0} in table {1}\", [d.idx, __(d.doctype)]);\r\n\t\t\td.row_id \u003d \"\";\r\n\t\t} else if(d.row_id \u0026\u0026 d.row_id \u003e\u003d d.idx) {\r\n\t\t\tmsg \u003d __(\"Cannot refer row number greater than or equal to current row number for this Charge type\");\r\n\t\t\td.row_id \u003d \"\";\r\n\t\t}\r\n\t}\r\n\tif(msg) {\r\n\t\tfrappe.validated \u003d false;\r\n\t\trefresh_field(\"taxes\");\r\n\t\tfrappe.throw(msg);\r\n\t}\r\n\r\n}\r\n\r\ncur_frm.cscript.validate_inclusive_tax \u003d function(tax) {\r\n\tvar actual_type_error \u003d function() {\r\n\t\tvar msg \u003d __(\"Actual type tax cannot be included in Item rate in row {0}\", [tax.idx])\r\n\t\tfrappe.throw(msg);\r\n\t};\r\n\r\n\tvar on_previous_row_error \u003d function(row_range) {\r\n\t\tvar msg \u003d __(\"For row {0} in {1}. To include {2} in Item rate, rows {3} must also be included\",\r\n\t\t\t[tax.idx, __(tax.doctype), tax.charge_type, row_range])\r\n\t\tfrappe.throw(msg);\r\n\t};\r\n\r\n\tif(cint(tax.included_in_print_rate)) {\r\n\t\tif(tax.charge_type \u003d\u003d \"Actual\") {\r\n\t\t\t// inclusive tax cannot be of type Actual\r\n\t\t\tactual_type_error();\r\n\t\t} else if(tax.charge_type \u003d\u003d \"On Previous Row Amount\" \u0026\u0026\r\n\t\t\t!cint(this.frm.doc[\"taxes\"][tax.row_id - 1].included_in_print_rate)\r\n\t\t) {\r\n\t\t\t// referred row should also be an inclusive tax\r\n\t\t\ton_previous_row_error(tax.row_id);\r\n\t\t} else if(tax.charge_type \u003d\u003d \"On Previous Row Total\") {\r\n\t\t\tvar taxes_not_included \u003d $.map(this.frm.doc[\"taxes\"].slice(0, tax.row_id),\r\n\t\t\t\tfunction(t) { return cint(t.included_in_print_rate) ? null : t; });\r\n\t\t\tif(taxes_not_included.length \u003e 0) {\r\n\t\t\t\t// all rows above this tax should be inclusive\r\n\t\t\t\ton_previous_row_error(tax.row_id \u003d\u003d 1 ? \"1\" : \"1 - \" + tax.row_id);\r\n\t\t\t}\r\n\t\t} else if(tax.category \u003d\u003d \"Valuation\") {\r\n\t\t\tfrappe.throw(__(\"Valuation type charges can not marked as Inclusive\"));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif(!erpnext.taxes.flags[cur_frm.cscript.tax_table]) {\r\n\terpnext.taxes.flags[cur_frm.cscript.tax_table] \u003d true;\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"row_id\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"rate\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"tax_amount\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"charge_type\", function(frm, cdt, cdn) {\r\n\t\tfrm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t\tvar open_form \u003d frm.open_grid_row();\r\n\t\tif(open_form) {\r\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(open_form);\r\n\t\t} else {\r\n\t\t\t// apply in current row\r\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.get_field(\u0027taxes\u0027).grid.get_row(cdn));\r\n\t\t}\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"included_in_print_rate\", function(frm, cdt, cdn) {\r\n\t\tvar tax \u003d frappe.get_doc(cdt, cdn);\r\n\t\ttry {\r\n\t\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t\t\tcur_frm.cscript.validate_inclusive_tax(tax);\r\n\t\t} catch(e) {\r\n\t\t\ttax.included_in_print_rate \u003d 0;\r\n\t\t\trefresh_field(\"included_in_print_rate\", tax.name, tax.parentfield);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nerpnext.taxes.set_conditional_mandatory_rate_or_amount \u003d function(grid_row) {\r\n\tif(grid_row) {\r\n\t\tif(grid_row.doc.charge_type\u003d\u003d\u003d\"Actual\") {\r\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", true);\r\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", true);\r\n\t\t\tgrid_row.toggle_editable(\"rate\", false);\r\n\t\t\tgrid_row.toggle_reqd(\"rate\", false);\r\n\t\t} else {\r\n\t\t\tgrid_row.toggle_editable(\"rate\", true);\r\n\t\t\tgrid_row.toggle_reqd(\"rate\", true);\r\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", false);\r\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", false);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// For customizing print\r\ncur_frm.pformat.total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.discount_amount \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.grand_total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.rounded_total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.in_words \u003d function(doc) { return \u0027\u0027; }\r\n\r\ncur_frm.pformat.taxes\u003d function(doc){\r\n\t//function to make row of table\r\n\tvar make_row \u003d function(title, val, bold, is_negative) {\r\n\t\tvar bstart \u003d \u0027\u003cb\u003e\u0027; var bend \u003d \u0027\u003c/b\u003e\u0027;\r\n\t\treturn \u0027\u003ctr\u003e\u003ctd style\u003d\"width:50%;\"\u003e\u0027 + (bold?bstart:\u0027\u0027) + title + (bold?bend:\u0027\u0027) + \u0027\u003c/td\u003e\u0027\r\n\t\t\t+ \u0027\u003ctd style\u003d\"width:50%;text-align:right;\"\u003e\u0027 + (is_negative ? \u0027- \u0027 : \u0027\u0027)\r\n\t\t+ format_currency(val, doc.currency) + \u0027\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t}\r\n\r\n\tfunction print_hide(fieldname) {\r\n\t\tvar doc_field \u003d frappe.meta.get_docfield(doc.doctype, fieldname, doc.name);\r\n\t\treturn doc_field.print_hide;\r\n\t}\r\n\r\n\tout \u003d\u0027\u0027;\r\n\tif (!doc.print_without_amount) {\r\n\t\tvar cl \u003d doc.taxes || [];\r\n\r\n\t\t// outer table\r\n\t\tvar out\u003d\u0027\u003cdiv\u003e\u003ctable class\u003d\"noborder\" style\u003d\"width:100%\"\u003e\u003ctr\u003e\u003ctd style\u003d\"width: 60%\"\u003e\u003c/td\u003e\u003ctd\u003e\u0027;\r\n\r\n\t\t// main table\r\n\r\n\t\tout +\u003d\u0027\u003ctable class\u003d\"noborder\" style\u003d\"width:100%\"\u003e\u0027;\r\n\r\n\t\tif(!print_hide(\u0027total\u0027)) {\r\n\t\t\tout +\u003d make_row(\u0027Total\u0027, doc.total, 1);\r\n\t\t}\r\n\r\n\t\t// Discount Amount on net total\r\n\t\tif(!print_hide(\u0027discount_amount\u0027) \u0026\u0026 doc.apply_discount_on \u003d\u003d \"Net Total\" \u0026\u0026 doc.discount_amount)\r\n\t\t\tout +\u003d make_row(\u0027Discount Amount\u0027, doc.discount_amount, 0, 1);\r\n\r\n\t\t// add rows\r\n\t\tif(cl.length){\r\n\t\t\tfor(var i\u003d0;i\u003ccl.length;i++) {\r\n\t\t\t\tif(cl[i].tax_amount!\u003d0 \u0026\u0026 !cl[i].included_in_print_rate)\r\n\t\t\t\t\tout +\u003d make_row(cl[i].description, cl[i].tax_amount, 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Discount Amount on grand total\r\n\t\tif(!print_hide(\u0027discount_amount\u0027) \u0026\u0026 doc.apply_discount_on \u003d\u003d \"Grand Total\" \u0026\u0026 doc.discount_amount)\r\n\t\t\tout +\u003d make_row(\u0027Discount Amount\u0027, doc.discount_amount, 0, 1);\r\n\r\n\t\t// grand total\r\n\t\tif(!print_hide(\u0027grand_total\u0027))\r\n\t\t\tout +\u003d make_row(\u0027Grand Total\u0027, doc.grand_total, 1);\r\n\r\n\t\tif(!print_hide(\u0027rounded_total\u0027))\r\n\t\t\tout +\u003d make_row(\u0027Rounded Total\u0027, doc.rounded_total, 1);\r\n\r\n\t\tif(doc.in_words \u0026\u0026 !print_hide(\u0027in_words\u0027)) {\r\n\t\t\tout +\u003d\u0027\u003c/table\u003e\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctr\u003e\u003ctd colspan \u003d \"2\"\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctable\u003e\u003ctr\u003e\u003ctd style\u003d\"width:25%;\"\u003e\u003cb\u003eIn Words\u003c/b\u003e\u003c/td\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctd style\u003d\"width:50%;\"\u003e\u0027 + doc.in_words + \u0027\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t\t}\r\n\t\tout +\u003d \u0027\u003c/table\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/div\u003e\u0027;\r\n\t}\r\n\treturn out;\r\n}\r\n/* Adding /erpnext/public/js/controllers/accounts.js --- Done. */\n\n\r\n\r\nfrappe.ui.form.on(\"Purchase Taxes and Charges\", \"add_deduct_tax\", function(doc, cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\r\n\tif(!d.category \u0026\u0026 d.add_deduct_tax) {\r\n\t\tfrappe.msgprint(__(\"Please select Category first\"));\r\n\t\td.add_deduct_tax \u003d \u0027\u0027;\r\n\t}\r\n\telse if(d.category !\u003d \u0027Total\u0027 \u0026\u0026 d.add_deduct_tax \u003d\u003d \u0027Deduct\u0027) {\r\n\t\tfrappe.msgprint(__(\"Cannot deduct when category is for \u0027Valuation\u0027 or \u0027Valuation and Total\u0027\"));\r\n\t\td.add_deduct_tax \u003d \u0027\u0027;\r\n\t}\r\n\trefresh_field(\u0027add_deduct_tax\u0027, d.name, \u0027taxes\u0027);\r\n});\r\n\r\nfrappe.ui.form.on(\"Purchase Taxes and Charges\", \"category\", function(doc, cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\r\n\tif (d.category !\u003d \u0027Total\u0027 \u0026\u0026 d.add_deduct_tax \u003d\u003d \u0027Deduct\u0027) {\r\n\t\tfrappe.msgprint(__(\"Cannot deduct when category is for \u0027Valuation\u0027 or \u0027Vaulation and Total\u0027\"));\r\n\t\td.add_deduct_tax \u003d \u0027\u0027;\r\n\t}\r\n\trefresh_field(\u0027add_deduct_tax\u0027, d.name, \u0027taxes\u0027);\r\n});\r\n/* Adding /erpnext/accounts/doctype/purchase_taxes_and_charges_template/purchase_taxes_and_charges_template.js --- Done. */\n\n\r\n\r\ncur_frm.email_field \u003d \"contact_email\";\r\n\r\nerpnext.buying.BuyingController \u003d erpnext.TransactionController.extend({\r\n\tsetup: function() {\r\n\t\tthis._super();\r\n\t},\r\n\r\n\tonload: function() {\r\n\t\tthis.setup_queries();\r\n\t\tthis._super();\r\n\r\n\t\t/* eslint-disable */\r\n\t\t// no idea where me is coming from\r\n\t\tif(this.frm.get_field(\u0027shipping_address\u0027)) {\r\n\t\t\tthis.frm.set_query(\"shipping_address\", function() {\r\n\t\t\t\tif(me.frm.doc.customer) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tquery: \u0027frappe.contacts.doctype.address.address.address_query\u0027,\r\n\t\t\t\t\t\tfilters: { link_doctype: \u0027Customer\u0027, link_name: me.frm.doc.customer }\r\n\t\t\t\t\t};\r\n\t\t\t\t} else\r\n\t\t\t\t\treturn erpnext.queries.company_address_query(me.frm.doc)\r\n\t\t\t});\r\n\t\t}\r\n\t\t/* eslint-enable */\r\n\t},\r\n\r\n\tsetup_queries: function() {\r\n\t\tvar me \u003d this;\r\n\r\n\t\tif(this.frm.fields_dict.buying_price_list) {\r\n\t\t\tthis.frm.set_query(\"buying_price_list\", function() {\r\n\t\t\t\treturn{\r\n\t\t\t\t\tfilters: { \u0027buying\u0027: 1 }\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tme.frm.set_query(\u0027supplier\u0027, erpnext.queries.supplier);\r\n\t\tme.frm.set_query(\u0027contact_person\u0027, erpnext.queries.contact_query);\r\n\t\tme.frm.set_query(\u0027supplier_address\u0027, erpnext.queries.address_query);\r\n\r\n\t\tif(this.frm.fields_dict.supplier) {\r\n\t\t\tthis.frm.set_query(\"supplier\", function() {\r\n\t\t\t\treturn{\tquery: \"erpnext.controllers.queries.supplier_query\" }});\r\n\t\t}\r\n\r\n\t\tthis.frm.set_query(\"item_code\", \"items\", function() {\r\n\t\t\tif(me.frm.doc.is_subcontracted \u003d\u003d \"Yes\") {\r\n\t\t\t\treturn{\r\n\t\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\r\n\t\t\t\t\tfilters:{ \u0027is_sub_contracted_item\u0027: 1 }\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn{\r\n\t\t\t\t\tquery: \"erpnext.controllers.queries.item_query\",\r\n\t\t\t\t\tfilters: {\u0027is_purchase_item\u0027: 1}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\trefresh: function(doc) {\r\n\t\tfrappe.dynamic_link \u003d {doc: this.frm.doc, fieldname: \u0027supplier\u0027, doctype: \u0027Supplier\u0027};\r\n\r\n\t\tthis.frm.toggle_display(\"supplier_name\",\r\n\t\t\t(this.frm.doc.supplier_name \u0026\u0026 this.frm.doc.supplier_name!\u003d\u003dthis.frm.doc.supplier));\r\n\r\n\t\tif(this.frm.doc.docstatus\u003d\u003d0 \u0026\u0026\r\n\t\t\t(this.frm.doctype\u003d\u003d\u003d\"Purchase Order\" || this.frm.doctype\u003d\u003d\u003d\"Material Request\")) {\r\n\t\t\tthis.set_from_product_bundle();\r\n\t\t}\r\n\r\n\t\tthis._super();\r\n\t},\r\n\r\n\tsupplier: function() {\r\n\t\tvar me \u003d this;\r\n\t\terpnext.utils.get_party_details(this.frm, null, null, function(){me.apply_pricing_rule()});\r\n\t},\r\n\r\n\tsupplier_address: function() {\r\n\t\terpnext.utils.get_address_display(this.frm);\r\n\t},\r\n\r\n\tbuying_price_list: function() {\r\n\t\tthis.apply_price_list();\r\n\t},\r\n\r\n\tprice_list_rate: function(doc, cdt, cdn) {\r\n\t\tvar item \u003d frappe.get_doc(cdt, cdn);\r\n\t\tfrappe.model.round_floats_in(item, [\"price_list_rate\", \"discount_percentage\"]);\r\n\r\n\t\titem.rate \u003d flt(item.price_list_rate * (1 - item.discount_percentage / 100.0),\r\n\t\t\tprecision(\"rate\", item));\r\n\r\n\t\tthis.calculate_taxes_and_totals();\r\n\t},\r\n\r\n\tdiscount_percentage: function(doc, cdt, cdn) {\r\n\t\tthis.price_list_rate(doc, cdt, cdn);\r\n\t},\r\n\r\n\tqty: function(doc, cdt, cdn) {\r\n\t\tvar item \u003d frappe.get_doc(cdt, cdn);\r\n\t\tif ((doc.doctype \u003d\u003d \"Purchase Receipt\") || (doc.doctype \u003d\u003d \"Purchase Invoice\" \u0026\u0026 (doc.update_stock || doc.is_return))) {\r\n\t\t\tfrappe.model.round_floats_in(item, [\"qty\", \"received_qty\"]);\r\n\r\n\t\t\tif(!doc.is_return \u0026\u0026 this.validate_negative_quantity(cdt, cdn, item, [\"qty\", \"received_qty\"])){ return }\r\n\r\n\t\t\tif(!item.rejected_qty \u0026\u0026 item.qty) {\r\n\t\t\t\titem.received_qty \u003d item.qty;\r\n\t\t\t}\r\n\r\n\t\t\tfrappe.model.round_floats_in(item, [\"qty\", \"received_qty\"]);\r\n\t\t\titem.rejected_qty \u003d flt(item.received_qty - item.qty, precision(\"rejected_qty\", item));\r\n\t\t}\r\n\r\n\t\tthis._super(doc, cdt, cdn);\r\n\t},\r\n\r\n\treceived_qty: function(doc, cdt, cdn) {\r\n\t\tthis.calculate_accepted_qty(doc, cdt, cdn)\r\n\t},\r\n\r\n\trejected_qty: function(doc, cdt, cdn) {\r\n\t\tthis.calculate_accepted_qty(doc, cdt, cdn)\r\n\t},\r\n\r\n\tcalculate_accepted_qty: function(doc, cdt, cdn){\r\n\t\tvar item \u003d frappe.get_doc(cdt, cdn);\r\n\t\tfrappe.model.round_floats_in(item, [\"received_qty\", \"rejected_qty\"]);\r\n\r\n\t\tif(!doc.is_return \u0026\u0026 this.validate_negative_quantity(cdt, cdn, item, [\"received_qty\", \"rejected_qty\"])){ return }\r\n\r\n\t\titem.qty \u003d flt(item.received_qty - item.rejected_qty, precision(\"qty\", item));\r\n\t\tthis.qty(doc, cdt, cdn);\r\n\t},\r\n\r\n\tvalidate_negative_quantity: function(cdt, cdn, item, fieldnames){\r\n\t\tif(!item || !fieldnames) { return }\r\n\r\n\t\tvar is_negative_qty \u003d false;\r\n\t\tfor(var i \u003d 0; i\u003cfieldnames.length; i++) {\r\n\t\t\tif(item[fieldnames[i]] \u003c 0){\r\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: {1} can not be negative for item {2}\",\r\n\t\t\t\t\t[item.idx,__(frappe.meta.get_label(cdt, fieldnames[i], cdn)), item.item_code]));\r\n\t\t\t\tis_negative_qty \u003d true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn is_negative_qty\r\n\t},\r\n\r\n\twarehouse: function(doc, cdt, cdn) {\r\n\t\tvar item \u003d frappe.get_doc(cdt, cdn);\r\n\t\tif(item.item_code \u0026\u0026 item.warehouse) {\r\n\t\t\treturn this.frm.call({\r\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_bin_details\",\r\n\t\t\t\tchild: item,\r\n\t\t\t\targs: {\r\n\t\t\t\t\titem_code: item.item_code,\r\n\t\t\t\t\twarehouse: item.warehouse\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tproject: function(doc, cdt, cdn) {\r\n\t\tvar item \u003d frappe.get_doc(cdt, cdn);\r\n\t\tif(item.project) {\r\n\t\t\t$.each(this.frm.doc[\"items\"] || [],\r\n\t\t\t\tfunction(i, other_item) {\r\n\t\t\t\t\tif(!other_item.project) {\r\n\t\t\t\t\t\tother_item.project \u003d item.project;\r\n\t\t\t\t\t\trefresh_field(\"project\", other_item.name, other_item.parentfield);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tcategory: function(doc, cdt, cdn) {\r\n\t\t// should be the category field of tax table\r\n\t\tif(cdt !\u003d doc.doctype) {\r\n\t\t\tthis.calculate_taxes_and_totals();\r\n\t\t}\r\n\t},\r\n\tadd_deduct_tax: function(doc, cdt, cdn) {\r\n\t\tthis.calculate_taxes_and_totals();\r\n\t},\r\n\r\n\tset_from_product_bundle: function() {\r\n\t\tvar me \u003d this;\r\n\t\tthis.frm.add_custom_button(__(\"Product Bundle\"), function() {\r\n\t\t\terpnext.buying.get_items_from_product_bundle(me.frm);\r\n\t\t}, __(\"Get items from\"));\r\n\t},\r\n\r\n\tshipping_address: function(){\r\n\t\tvar me \u003d this;\r\n\t\terpnext.utils.get_address_display(this.frm, \"shipping_address\",\r\n\t\t\t\"shipping_address_display\", true);\r\n\t},\r\n\r\n\ttc_name: function() {\r\n\t\tthis.get_terms();\r\n\t},\r\n\tlink_to_mrs: function() {\r\n\t\tvar my_items \u003d [];\r\n\t\tfor (var i in cur_frm.doc.items) {\r\n\t\t\tif(!cur_frm.doc.items[i].material_request){\r\n\t\t\t\tmy_items.push(cur_frm.doc.items[i].item_code);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfrappe.call({\r\n\t\t\tmethod: \"erpnext.buying.utils.get_linked_material_requests\",\r\n\t\t\targs:{\r\n\t\t\t\titems: my_items\r\n\t\t\t},\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tif(r.exc) return;\r\n\r\n\t\t\t\tvar i \u003d 0;\r\n\t\t\t\tvar item_length \u003d cur_frm.doc.items.length;\r\n\t\t\t\twhile (i \u003c item_length) {\r\n\t\t\t\t\tvar qty \u003d cur_frm.doc.items[i].qty;\r\n\t\t\t\t\t(r.message[0] || []).forEach(function(d) {\r\n\t\t\t\t\t\tif (d.qty \u003e 0 \u0026\u0026 qty \u003e 0 \u0026\u0026 cur_frm.doc.items[i].item_code \u003d\u003d d.item_code \u0026\u0026 !cur_frm.doc.items[i].material_request_item)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcur_frm.doc.items[i].material_request \u003d d.mr_name;\r\n\t\t\t\t\t\t\tcur_frm.doc.items[i].material_request_item \u003d d.mr_item;\r\n\t\t\t\t\t\t\tvar my_qty \u003d Math.min(qty, d.qty);\r\n\t\t\t\t\t\t\tqty \u003d qty - my_qty;\r\n\t\t\t\t\t\t\td.qty \u003d d.qty  - my_qty;\r\n\t\t\t\t\t\t\tcur_frm.doc.items[i].stock_qty \u003d my_qty*cur_frm.doc.items[i].conversion_factor;\r\n\t\t\t\t\t\t\tcur_frm.doc.items[i].qty \u003d my_qty;\r\n\r\n\t\t\t\t\t\t\tfrappe.msgprint(\"Assigning \" + d.mr_name + \" to \" + d.item_code + \" (row \" + cur_frm.doc.items[i].idx + \")\");\r\n\t\t\t\t\t\t\tif (qty \u003e 0) {\r\n\t\t\t\t\t\t\t\tfrappe.msgprint(\"Splitting \" + qty + \" units of \" + d.item_code);\r\n\t\t\t\t\t\t\t\tvar newrow \u003d frappe.model.add_child(cur_frm.doc, cur_frm.doc.items[i].doctype, \"items\");\r\n\t\t\t\t\t\t\t\titem_length++;\r\n\r\n\t\t\t\t\t\t\t\tfor (var key in cur_frm.doc.items[i]) {\r\n\t\t\t\t\t\t\t\t\tnewrow[key] \u003d cur_frm.doc.items[i][key];\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tnewrow.idx \u003d item_length;\r\n\t\t\t\t\t\t\t\tnewrow[\"stock_qty\"] \u003d newrow.conversion_factor*qty;\r\n\t\t\t\t\t\t\t\tnewrow[\"qty\"] \u003d qty;\r\n\t\t\t\t\t\t\t\tnewrow[\"material_request\"] \u003d \"\";\r\n\t\t\t\t\t\t\t\tnewrow[\"material_request_item\"] \u003d \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\trefresh_field(\"items\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\ncur_frm.add_fetch(\u0027project\u0027, \u0027cost_center\u0027, \u0027cost_center\u0027);\r\n\r\nerpnext.buying.get_default_bom \u003d function(frm) {\r\n\t$.each(frm.doc[\"items\"] || [], function(i, d) {\r\n\t\tif (d.item_code \u0026\u0026 d.bom \u003d\u003d\u003d \"\") {\r\n\t\t\treturn frappe.call({\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\tmethod: \"erpnext.stock.get_item_details.get_default_bom\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\t\"item_code\": d.item_code,\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif(r) {\r\n\t\t\t\t\t\tfrappe.model.set_value(d.doctype, d.name, \"bom\", r.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t});\r\n}\r\n\r\nerpnext.buying.get_items_from_product_bundle \u003d function(frm) {\r\n\tvar dialog \u003d new frappe.ui.Dialog({\r\n\t\ttitle: __(\"Get Items from Product Bundle\"),\r\n\t\tfields: [\r\n\t\t\t{\r\n\t\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\t\"label\": __(\"Product Bundle\"),\r\n\t\t\t\t\"fieldname\": \"product_bundle\",\r\n\t\t\t\t\"options\":\"Product Bundle\",\r\n\t\t\t\t\"reqd\": 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"fieldtype\": \"Currency\",\r\n\t\t\t\t\"label\": __(\"Quantity\"),\r\n\t\t\t\t\"fieldname\": \"quantity\",\r\n\t\t\t\t\"reqd\": 1,\r\n\t\t\t\t\"default\": 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"fieldtype\": \"Button\",\r\n\t\t\t\t\"label\": __(\"Get Items\"),\r\n\t\t\t\t\"fieldname\": \"get_items\",\r\n\t\t\t\t\"cssClass\": \"btn-primary\"\r\n\t\t\t}\r\n\t\t]\r\n\t});\r\n\r\n\tdialog.fields_dict.get_items.$input.click(function() {\r\n\t\tvar args \u003d dialog.get_values();\r\n\t\tif(!args) return;\r\n\t\tdialog.hide();\r\n\t\treturn frappe.call({\r\n\t\t\ttype: \"GET\",\r\n\t\t\tmethod: \"erpnext.stock.doctype.packed_item.packed_item.get_items_from_product_bundle\",\r\n\t\t\targs: {\r\n\t\t\t\targs: {\r\n\t\t\t\t\titem_code: args.product_bundle,\r\n\t\t\t\t\tquantity: args.quantity,\r\n\t\t\t\t\tparenttype: frm.doc.doctype,\r\n\t\t\t\t\tparent: frm.doc.name,\r\n\t\t\t\t\tsupplier: frm.doc.supplier,\r\n\t\t\t\t\tcurrency: frm.doc.currency,\r\n\t\t\t\t\tconversion_rate: frm.doc.conversion_rate,\r\n\t\t\t\t\tprice_list: frm.doc.buying_price_list,\r\n\t\t\t\t\tprice_list_currency: frm.doc.price_list_currency,\r\n\t\t\t\t\tplc_conversion_rate: frm.doc.plc_conversion_rate,\r\n\t\t\t\t\tcompany: frm.doc.company,\r\n\t\t\t\t\tis_subcontracted: frm.doc.is_subcontracted,\r\n\t\t\t\t\ttransaction_date: frm.doc.transaction_date || frm.doc.posting_date,\r\n\t\t\t\t\tignore_pricing_rule: frm.doc.ignore_pricing_rule\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfreeze: true,\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tconst first_row_is_empty \u003d function(child_table){\r\n\t\t\t\t\tif($.isArray(child_table) \u0026\u0026 child_table.length \u003e 0) {\r\n\t\t\t\t\t\treturn !child_table[0].item_code;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst remove_empty_first_row \u003d function(frm){\r\n\t\t\t\tif (first_row_is_empty(frm.doc.items)){\r\n\t\t\t\t\tfrm.doc.items \u003d frm.doc.items.splice(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(!r.exc \u0026\u0026 r.message) {\r\n\t\t\t\t\tremove_empty_first_row(frm);\r\n\t\t\t\t\tfor ( var i\u003d0; i\u003c r.message.length; i++ ) {\r\n\t\t\t\t\t\tvar d \u003d frm.add_child(\"items\");\r\n\t\t\t\t\t\tvar item \u003d r.message[i];\r\n\t\t\t\t\t\tfor ( var key in  item) {\r\n\t\t\t\t\t\t\tif ( !is_null(item[key]) ) {\r\n\t\t\t\t\t\t\t\td[key] \u003d item[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(frappe.meta.get_docfield(d.doctype, \"price_list_rate\", d.name)) {\r\n\t\t\t\t\t\t\tfrm.script_manager.trigger(\"price_list_rate\", d.doctype, d.name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfrm.refresh_field(\"items\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\tdialog.show();\r\n}\r\n\r\n/* Adding /erpnext/public/js/controllers/buying.js --- Done. */\n\n;\r\n\r\nfrappe.ui.form.on(\u0027Material Request\u0027, {\r\n\tsetup: function(frm) {\r\n\t\tfrm.custom_make_buttons \u003d {\r\n\t\t\t\u0027Stock Entry\u0027: \u0027Issue Material\u0027,\r\n\t\t\t\u0027Purchase Order\u0027: \u0027Purchase Order\u0027,\r\n\t\t\t\u0027Request for Quotation\u0027: \u0027Request for Quotation\u0027,\r\n\t\t\t\u0027Supplier Quotation\u0027: \u0027Supplier Quotation\u0027,\r\n\t\t\t\u0027Production Order\u0027: \u0027Production Order\u0027\r\n\t\t}\r\n\t},\r\n\tonload: function(frm) {\r\n\t\t// add item, if previous view was item\r\n\t\terpnext.utils.add_item(frm);\r\n\r\n\t\t//set schedule_date\r\n\t\tset_schedule_date(frm);\r\n\r\n\t\t// formatter for material request item\r\n\t\tfrm.set_indicator_formatter(\u0027item_code\u0027,\r\n\t\t\tfunction(doc) { return (doc.qty\u003c\u003ddoc.ordered_qty) ? \"green\" : \"orange\" }),\r\n\r\n\t\tfrm.fields_dict[\"items\"].grid.get_field(\"warehouse\").get_query \u003d function(doc, cdt, cdn){\r\n\t\t\treturn{\r\n\t\t\t\tfilters: {\u0027company\u0027: doc.company}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfrappe.ui.form.on(\"Material Request Item\", {\r\n\tqty: function (frm, doctype, name) {\r\n\t\tvar d \u003d locals[doctype][name];\r\n\t\tif (flt(d.qty) \u003c flt(d.min_order_qty)) {\r\n\t\t\tfrappe.msgprint(__(\"Warning: Material Requested Qty is less than Minimum Order Qty\"));\r\n\t\t}\r\n\t},\r\n\r\n\titem_code: function(frm, doctype, name) {\r\n\t\tset_schedule_date(frm);\r\n\t},\r\n\r\n\tschedule_date: function(frm, cdt, cdn) {\r\n\t\tvar row \u003d locals[cdt][cdn];\r\n\t\tif (row.schedule_date) {\r\n\t\t\tif(!frm.doc.schedule_date) {\r\n\t\t\t\terpnext.utils.copy_value_in_all_row(frm.doc, cdt, cdn, \"items\", \"schedule_date\");\r\n\t\t\t} else {\r\n\t\t\t\tset_schedule_date(frm);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nerpnext.buying.MaterialRequestController \u003d erpnext.buying.BuyingController.extend({\r\n\tonload: function(doc) {\r\n\t\tthis._super();\r\n\t\tthis.frm.set_query(\"item_code\", \"items\", function() {\r\n\t\t\treturn {\r\n\t\t\t\tquery: \"erpnext.controllers.queries.item_query\"\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\trefresh: function(doc) {\r\n\t\tvar me \u003d this;\r\n\t\tthis._super();\r\n\r\n\t\tif(doc.docstatus\u003d\u003d0) {\r\n\t\t\tcur_frm.add_custom_button(__(\"Get Items from BOM\"),\r\n\t\t\t\tcur_frm.cscript.get_items_from_bom, \"fa fa-sitemap\", \"btn-default\");\r\n\t\t}\r\n\r\n\t\tif(doc.docstatus \u003d\u003d 1 \u0026\u0026 doc.status !\u003d \u0027Stopped\u0027) {\r\n\t\t\tif(flt(doc.per_ordered, 2) \u003c 100) {\r\n\t\t\t\t// make\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Material Transfer\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\"Transfer Material\"),\r\n\t\t\t\t\tthis.make_stock_entry, __(\"Make\"));\r\n\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Material Issue\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\"Issue Material\"),\r\n\t\t\t\t\tthis.make_stock_entry, __(\"Make\"));\r\n\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Purchase\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\u0027Purchase Order\u0027),\r\n\t\t\t\t\t\tthis.make_purchase_order, __(\"Make\"));\r\n\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Purchase\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\"Request for Quotation\"),\r\n\t\t\t\t\t\tthis.make_request_for_quotation, __(\"Make\"));\r\n\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Purchase\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\"Supplier Quotation\"),\r\n\t\t\t\t\tthis.make_supplier_quotation, __(\"Make\"));\r\n\r\n\t\t\t\tif(doc.material_request_type \u003d\u003d\u003d \"Manufacture\")\r\n\t\t\t\t\tcur_frm.add_custom_button(__(\"Production Order\"),\r\n\t\t\t\t\tfunction() { me.raise_production_orders() }, __(\"Make\"));\r\n\r\n\t\t\t\tcur_frm.page.set_inner_btn_group_as_primary(__(\"Make\"));\r\n\r\n\t\t\t\t// stop\r\n\t\t\t\tcur_frm.add_custom_button(__(\u0027Stop\u0027),\r\n\t\t\t\t\tcur_frm.cscript[\u0027Stop Material Request\u0027]);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.frm.doc.docstatus\u003d\u003d\u003d0) {\r\n\t\t\tthis.frm.add_custom_button(__(\u0027Sales Order\u0027),\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\terpnext.utils.map_current_doc({\r\n\t\t\t\t\t\tmethod: \"erpnext.selling.doctype.sales_order.sales_order.make_material_request\",\r\n\t\t\t\t\t\tsource_doctype: \"Sales Order\",\r\n\t\t\t\t\t\ttarget: me.frm,\r\n\t\t\t\t\t\tsetters: {\r\n\t\t\t\t\t\t\tcompany: me.frm.doc.company\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget_query_filters: {\r\n\t\t\t\t\t\t\tdocstatus: 1,\r\n\t\t\t\t\t\t\tstatus: [\"!\u003d\", \"Closed\"],\r\n\t\t\t\t\t\t\tper_delivered: [\"\u003c\", 99.99],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, __(\"Get items from\"));\r\n\t\t}\r\n\r\n\t\tif(doc.docstatus \u003d\u003d 1 \u0026\u0026 doc.status \u003d\u003d \u0027Stopped\u0027)\r\n\t\t\tcur_frm.add_custom_button(__(\u0027Re-open\u0027),\r\n\t\t\t\tcur_frm.cscript[\u0027Unstop Material Request\u0027]);\r\n\r\n\t},\r\n\r\n\tget_items_from_bom: function() {\r\n\t\tvar d \u003d new frappe.ui.Dialog({\r\n\t\t\ttitle: __(\"Get Items from BOM\"),\r\n\t\t\tfields: [\r\n\t\t\t\t{\"fieldname\":\"bom\", \"fieldtype\":\"Link\", \"label\":__(\"BOM\"),\r\n\t\t\t\t\toptions:\"BOM\", reqd: 1, get_query: function(){\r\n\t\t\t\t\t\treturn {filters: { docstatus:1 }}\r\n\t\t\t\t\t}},\r\n\t\t\t\t{\"fieldname\":\"warehouse\", \"fieldtype\":\"Link\", \"label\":__(\"Warehouse\"),\r\n\t\t\t\t\toptions:\"Warehouse\", reqd: 1},\r\n\t\t\t\t{\"fieldname\":\"fetch_exploded\", \"fieldtype\":\"Check\",\r\n\t\t\t\t\t\"label\":__(\"Fetch exploded BOM (including sub-assemblies)\"), \"default\":1},\r\n\t\t\t\t{fieldname:\"fetch\", \"label\":__(\"Get Items from BOM\"), \"fieldtype\":\"Button\"}\r\n\t\t\t]\r\n\t\t});\r\n\t\td.get_input(\"fetch\").on(\"click\", function() {\r\n\t\t\tvar values \u003d d.get_values();\r\n\t\t\tif(!values) return;\r\n\t\t\tvalues[\"company\"] \u003d cur_frm.doc.company;\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.manufacturing.doctype.bom.bom.get_bom_items\",\r\n\t\t\t\targs: values,\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif(!r.message) {\r\n\t\t\t\t\t\tfrappe.throw(__(\"BOM does not contain any stock item\"))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terpnext.utils.remove_empty_first_row(cur_frm, \"items\");\r\n\t\t\t\t\t\t$.each(r.message, function(i, item) {\r\n\t\t\t\t\t\t\tvar d \u003d frappe.model.add_child(cur_frm.doc, \"Material Request Item\", \"items\");\r\n\t\t\t\t\t\t\td.item_code \u003d item.item_code;\r\n\t\t\t\t\t\t\td.item_name \u003d item.item_name;\r\n\t\t\t\t\t\t\td.description \u003d item.description;\r\n\t\t\t\t\t\t\td.warehouse \u003d values.warehouse;\r\n\t\t\t\t\t\t\td.uom \u003d item.stock_uom;\r\n\t\t\t\t\t\t\td.qty \u003d item.qty;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\td.hide();\r\n\t\t\t\t\trefresh_field(\"items\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\td.show();\r\n\t},\r\n\r\n\ttc_name: function() {\r\n\t\tthis.get_terms();\r\n\t},\r\n\r\n\tvalidate_company_and_party: function(party_field) {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tcalculate_taxes_and_totals: function() {\r\n\t\treturn;\r\n\t},\r\n\r\n\tmake_purchase_order: function() {\r\n\t\tfrappe.model.open_mapped_doc({\r\n\t\t\tmethod: \"erpnext.stock.doctype.material_request.material_request.make_purchase_order\",\r\n\t\t\tfrm: cur_frm,\r\n\t\t\trun_link_triggers: true\r\n\t\t});\r\n\t},\r\n\r\n\tmake_request_for_quotation: function(){\r\n\t\tfrappe.model.open_mapped_doc({\r\n\t\t\tmethod: \"erpnext.stock.doctype.material_request.material_request.make_request_for_quotation\",\r\n\t\t\tfrm: cur_frm,\r\n\t\t\trun_link_triggers: true\r\n\t\t});\r\n\t},\r\n\r\n\tmake_supplier_quotation: function() {\r\n\t\tfrappe.model.open_mapped_doc({\r\n\t\t\tmethod: \"erpnext.stock.doctype.material_request.material_request.make_supplier_quotation\",\r\n\t\t\tfrm: cur_frm\r\n\t\t});\r\n\t},\r\n\r\n\tmake_stock_entry: function() {\r\n\t\tfrappe.model.open_mapped_doc({\r\n\t\t\tmethod: \"erpnext.stock.doctype.material_request.material_request.make_stock_entry\",\r\n\t\t\tfrm: cur_frm\r\n\t\t});\r\n\t},\r\n\r\n\traise_production_orders: function() {\r\n\t\tvar me \u003d this;\r\n\t\tfrappe.call({\r\n\t\t\tmethod:\"erpnext.stock.doctype.material_request.material_request.raise_production_orders\",\r\n\t\t\targs: {\r\n\t\t\t\t\"material_request\": me.frm.doc.name\r\n\t\t\t},\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tif(r.message.length) {\r\n\t\t\t\t\tme.frm.reload_doc();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tvalidate: function() {\r\n\t\tset_schedule_date(this.frm);\r\n\t},\r\n\r\n\titems_add: function(doc, cdt, cdn) {\r\n\t\tvar row \u003d frappe.get_doc(cdt, cdn);\r\n\t\tif(doc.schedule_date) {\r\n\t\t\trow.schedule_date \u003d doc.schedule_date;\r\n\t\t\trefresh_field(\"schedule_date\", cdn, \"items\");\r\n\t\t} else {\r\n\t\t\tthis.frm.script_manager.copy_from_first_row(\"items\", row, [\"schedule_date\"]);\r\n\t\t}\r\n\t},\r\n\r\n\titems_on_form_rendered: function() {\r\n\t\tset_schedule_date(this.frm);\r\n\t},\r\n\r\n\tschedule_date: function() {\r\n\t\tset_schedule_date(this.frm);\r\n\t}\r\n});\r\n\r\n// for backward compatibility: combine new and previous states\r\n$.extend(cur_frm.cscript, new erpnext.buying.MaterialRequestController({frm: cur_frm}));\r\n\r\ncur_frm.cscript[\u0027Stop Material Request\u0027] \u003d function() {\r\n\tvar doc \u003d cur_frm.doc;\r\n\t$c(\u0027runserverobj\u0027, args\u003d{\u0027method\u0027:\u0027update_status\u0027, \u0027arg\u0027: \u0027Stopped\u0027, \u0027docs\u0027: doc}, function(r,rt) {\r\n\t\tcur_frm.refresh();\r\n\t});\r\n};\r\n\r\ncur_frm.cscript[\u0027Unstop Material Request\u0027] \u003d function(){\r\n\tvar doc \u003d cur_frm.doc;\r\n\t$c(\u0027runserverobj\u0027, args\u003d{\u0027method\u0027:\u0027update_status\u0027, \u0027arg\u0027: \u0027Submitted\u0027,\u0027docs\u0027: doc}, function(r,rt) {\r\n\t\tcur_frm.refresh();\r\n\t});\r\n};\r\n\r\nfunction set_schedule_date(frm) {\r\n\tif(frm.doc.schedule_date){\r\n\t\terpnext.utils.copy_value_in_all_row(frm.doc, frm.doc.doctype, frm.doc.name, \"items\", \"schedule_date\");\r\n\t}\r\n}","__list_js":"frappe.listview_settings[\u0027Material Request\u0027] \u003d {\r\n\tadd_fields: [\"material_request_type\", \"status\", \"per_ordered\"],\r\n\tget_indicator: function(doc) {\r\n\t\tif(doc.status\u003d\u003d\"Stopped\") {\r\n\t\t\treturn [__(\"Stopped\"), \"red\", \"status,\u003d,Stopped\"];\r\n\t\t} else if(doc.docstatus\u003d\u003d1 \u0026\u0026 flt(doc.per_ordered, 2) \u003d\u003d 0) {\r\n\t\t\treturn [__(\"Pending\"), \"orange\", \"per_ordered,\u003d,0\"];\r\n\t\t}  else if(doc.docstatus\u003d\u003d1 \u0026\u0026 flt(doc.per_ordered, 2) \u003c 100) {\r\n\t\t\treturn [__(\"Partially ordered\"), \"yellow\", \"per_ordered,\u003c,100\"];\r\n\t\t} else if(doc.docstatus\u003d\u003d1 \u0026\u0026 flt(doc.per_ordered, 2) \u003d\u003d 100) {\r\n\t\t\tif (doc.material_request_type \u003d\u003d \"Purchase\") {\r\n\t\t\t\treturn [__(\"Ordered\"), \"green\", \"per_ordered,\u003d,100\"];\r\n\t\t\t} else if (doc.material_request_type \u003d\u003d \"Material Transfer\") {\r\n\t\t\t\treturn [__(\"Transfered\"), \"green\", \"per_ordered,\u003d,100\"];\r\n\t\t\t} else if (doc.material_request_type \u003d\u003d \"Material Issue\") {\r\n\t\t\t\treturn [__(\"Issued\"), \"green\", \"per_ordered,\u003d,100\"];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n","__dashboard":{"fieldname":"material_request","transactions":[{"label":"Related","items":["Request for Quotation","Supplier Quotation","Purchase Order"]},{"label":"Manufacturing","items":["Production Order"]}]},"__form_grid_templates":{"items":"{% var visible_columns \u003d row.get_visible_columns([\"item_code\", \"warehouse\",\r\n\t\"item_name\", \"amount\", \"stock_uom\", \"uom\", \"qty\", \"schedule_date\"]); %}\r\n\r\n{% if(!doc) { %}\r\n\t\u003cdiv class\u003d\"row\"\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-4\"\u003e{% \u003d __(\"Item\") %}\u003c/div\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-3\"\u003e{% \u003d __(\"Required On\") %}\u003c/div\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-3\"\u003e{% \u003d __(\"Warehouse\") %}\u003c/div\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-2 text-right\"\u003e{% \u003d __(\"Qty\") %}\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n{% } else { %}\r\n\t\u003cdiv class\u003d\"row\"\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-4\"\u003e\r\n            \u003cspan class\u003d\"indicator {% \u003d (doc.qty\u003c\u003ddoc.ordered_qty) ? \"green\" : \"orange\" %}\"\u003e{% \u003d doc.item_code %}\u003c/strong\u003e\r\n\t\t\t{% if(doc.item_name !\u003d doc.item_code) { %}\r\n\t\t\t\t\u003cbr\u003e{% \u003d doc.item_name %}{% } %}\r\n            \u003c!-- {% if(doc.item_name !\u003d doc.description) { %}\r\n                \u003cp\u003e{% \u003d doc.description %}\u003c/p\u003e{% } %} --\u003e\r\n\t\t\t{% $.each(visible_columns || [], function(i, df) { %}\r\n\t{% var val \u003d doc.get_formatted(df.fieldname);\r\n\tif((df.fieldname !\u003d\u003d \"description\" \u0026\u0026 df.fieldname !\u003d\u003d \"item_name\") \u0026\u0026 val) { %}\r\n\t\t\u003cdiv class\u003d\"row\"\u003e\r\n\t\t\t\u003cdiv class\u003d\"col-xs-4 ellipsis\"\u003e\r\n\t\t\t\t\u003cstrong title\u003d\"{% \u003d __(df.label) %}\"\u003e{% \u003d __(df.label) %}:\u003c/strong\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\t\u003cdiv class\u003d\"col-xs-8\"\u003e\r\n\t\t\t\t{% \u003d doc.get_formatted(df.fieldname) %}\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t{% } else if (df.fieldname\u003d\u003d\u003d\"description\") { %}\r\n\t\t\u003cp\u003e{{ doc.description }}\u003c/p\u003e\r\n\t{% } %}\r\n{% }); %}\r\n\r\n\t\t\u003c/div\u003e\r\n\r\n\r\n\t\t\u003cdiv class\u003d\"col-sm-3\"\u003e\r\n\t\t\t{% if(doc.schedule_date) { %}\r\n                \u003cspan title\u003d\"{% \u003d __(\"Reqd By Date\") %}\" class\u003d\"{% \u003d\r\n\t\t\t\t(frappe.datetime.get_diff(doc.schedule_date, frappe.datetime.get_today()) \u003c 0\r\n\t\t\t\t\t\u0026\u0026 doc.ordered_qty \u003c doc.qty)\r\n\t\t\t\t\t? \"text-danger\" : \"text-muted\" %}\"\u003e\r\n\t\t\t\t\t{% \u003d doc.get_formatted(\"schedule_date\") %}\u003c/span\u003e\r\n\t\t\t{% } %}\r\n        \u003c/div\u003e\r\n\r\n        \u003c!-- warehouse --\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-3\"\u003e\r\n\t\t\t{% if(doc.warehouse) { %}\r\n\t\t\t\t\u003cspan class\u003d\"label label-default\" title\u003d\"{% \u003d __(\"For Warehouse\") %}\"\r\n                    style\u003d\"margin-right: 10px;\"\u003e\r\n\t\t\t\t\t{% \u003d doc.warehouse %}\r\n\t\t\t\t\u003c/span\u003e\r\n\t\t\t{% } %}\r\n        \u003c/div\u003e\r\n\r\n\t\t\u003c!-- qty --\u003e\r\n\t\t\u003cdiv class\u003d\"col-sm-2 text-right\"\u003e\r\n\t\t\t{% \u003d doc.get_formatted(\"qty\") %}\r\n\t\t\t\u003cspan class\u003d\"small\"\u003e{% \u003d doc.uom || doc.stock_uom %}\u003c/span\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n{% } %}\r\n"}},{"allow_copy":0,"allow_import":0,"allow_rename":0,"autoname":"hash","beta":0,"creation":"2013-02-22 01:28:02","custom":0,"docstatus":0,"doctype":"DocType","document_type":"Setup","editable_grid":1,"engine":"InnoDB","fields":[{"allow_on_submit":0,"bold":1,"collapsible":0,"columns":3,"fieldname":"item_code","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":1,"in_list_view":1,"in_standard_filter":0,"label":"Item Code","length":0,"no_copy":0,"oldfieldname":"item_code","oldfieldtype":"Link","options":"Item","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"100px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":1,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"67m2udoq8l","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"col_break1","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"69e29202ts","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"item_name","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":1,"in_list_view":0,"in_standard_filter":0,"label":"Item Name","length":0,"no_copy":0,"oldfieldname":"item_name","oldfieldtype":"Data","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"100px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":1,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"667dfcfc4s","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":1,"columns":0,"fieldname":"section_break_4","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Description","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"54h830od1s","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"description","fieldtype":"Text Editor","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Description","length":0,"no_copy":0,"oldfieldname":"description","oldfieldtype":"Text","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"250px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"width":"250px","doctype":"DocField","name":"3peh0489to","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_6","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6bbcelsjcc","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"image","fieldtype":"Attach Image","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Image","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5s6dvt526m","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"quantity_and_warehouse","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Quantity and Warehouse","length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3o1kk2fg1s","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Quantity","length":0,"no_copy":0,"oldfieldname":"qty","oldfieldtype":"Currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"80px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"width":"80px","doctype":"DocField","name":"4ntcslhbjl","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"uom","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Stock UOM","length":0,"no_copy":0,"oldfieldname":"uom","oldfieldtype":"Link","options":"UOM","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"70px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"width":"70px","doctype":"DocField","name":"474k1u9osq","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":3,"fieldname":"warehouse","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"For Warehouse","length":0,"no_copy":0,"oldfieldname":"warehouse","oldfieldtype":"Link","options":"Warehouse","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"100px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"7v91b4eo8q","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"col_break2","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"303a6fsb8q","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":1,"collapsible":0,"columns":2,"default":"","fieldname":"schedule_date","fieldtype":"Date","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Required Date","length":0,"no_copy":0,"oldfieldname":"schedule_date","oldfieldtype":"Date","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"100px","read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"q1kdus55m","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"more_info","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"More Information","length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4o75doh50t","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"item_group","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Item Group","length":0,"no_copy":0,"oldfieldname":"item_group","oldfieldtype":"Link","options":"Item Group","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":1,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3k24jnn9sb","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"brand","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Brand","length":0,"no_copy":0,"oldfieldname":"brand","oldfieldtype":"Link","options":"Brand","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"100px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"100px","doctype":"DocField","name":"cah1od86e","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"lead_time_date","fieldtype":"Date","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Lead Time Date","length":0,"no_copy":1,"oldfieldname":"lead_time_date","oldfieldtype":"Date","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4rfturtl0p","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"sales_order","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Sales Order","length":0,"no_copy":0,"options":"Sales Order","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"75n19159uu","docstatus":0,"idx":17,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"project","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Project","length":0,"no_copy":0,"options":"Project","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"73rrsqiua9","docstatus":0,"idx":18,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"col_break3","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1gihd55gfe","docstatus":0,"idx":19,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"min_order_qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Min Order Qty","length":0,"no_copy":1,"oldfieldname":"min_order_qty","oldfieldtype":"Currency","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"70px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"70px","doctype":"DocField","name":"3l5hc9hsvo","docstatus":0,"idx":20,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"fieldname":"projected_qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Projected Qty","length":0,"no_copy":1,"oldfieldname":"projected_qty","oldfieldtype":"Currency","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"70px","read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"70px","doctype":"DocField","name":"3l5egjb59e","docstatus":0,"idx":21,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"actual_qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Actual Qty","length":0,"no_copy":1,"permlevel":0,"precision":"","print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":1,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6ur82csnjv","docstatus":0,"idx":22,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"ordered_qty","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Completed Qty","length":0,"no_copy":1,"oldfieldname":"ordered_qty","oldfieldtype":"Currency","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1v6tpvh774","docstatus":0,"idx":23,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":1,"bold":0,"collapsible":0,"columns":0,"fieldname":"page_break","fieldtype":"Check","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Page Break","length":0,"no_copy":1,"oldfieldname":"page_break","oldfieldtype":"Check","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"45hp7n6c2n","docstatus":0,"idx":24,"parenttype":"DocType","parentfield":"fields","parent":"Material Request Item","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"hide_heading":0,"hide_toolbar":0,"idx":1.0,"image_view":0,"in_create":0,"in_dialog":0.0,"is_submittable":0,"issingle":0,"istable":1,"max_attachments":0,"modified":"2017-02-20 13:31:50.143583","modified_by":"Administrator","module":"Stock","name":"Material Request Item","owner":"Administrator","permissions":[],"quick_entry":0,"read_only":0,"read_only_onload":0,"show_name_in_global_search":0,"sort_order":"DESC","track_changes":1,"track_seen":0}],"user_settings":"{}"}