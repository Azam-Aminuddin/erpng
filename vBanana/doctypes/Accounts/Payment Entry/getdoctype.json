{"docs":[{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":1.0,"allow_rename":0.0,"autoname":"naming_series:","beta":0.0,"creation":"2016-06-01 14:38:51.012597","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"","editable_grid":0.0,"fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"type_of_payment","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Type of Payment","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"fieldname":"naming_series","fieldtype":"Select","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Series","length":0.0,"no_copy":0.0,"options":"PE-","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":1.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"fieldname":"payment_type","fieldtype":"Select","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":1.0,"label":"Payment Type","length":0.0,"no_copy":0.0,"options":"Receive\nPay\nInternal Transfer","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_5","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"default":"Today","fieldname":"posting_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Posting Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"company","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Company","length":0.0,"no_copy":0.0,"options":"Company","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":1.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"mode_of_payment","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Mode of Payment","length":0.0,"no_copy":0.0,"options":"Mode of Payment","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type)","fieldname":"party_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Payment From / To","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"","depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) \u0026\u0026 doc.docstatus\u003d\u003d0","fieldname":"party_type","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Party Type","length":0.0,"no_copy":0.0,"options":"DocType","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) \u0026\u0026 doc.party_type","fieldname":"party","fieldtype":"Dynamic Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Party","length":0.0,"no_copy":0.0,"options":"party_type","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_11","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":1.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:in_list([\"Receive\", \"Pay\"], doc.payment_type) \u0026\u0026 doc.party_type","description":"","fieldname":"party_name","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Party Name","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":1.0,"columns":0.0,"fieldname":"payment_accounts_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Accounts","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"party","fieldname":"party_balance","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Party Balance","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(in_list([\"Internal Transfer\", \"Pay\"], doc.payment_type) || doc.party)","fieldname":"paid_from","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Paid From","length":0.0,"no_copy":0.0,"options":"Account","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"paid_from","fieldname":"paid_from_account_currency","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Currency","length":0.0,"no_copy":0.0,"options":"Currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"paid_from","fieldname":"paid_from_account_balance","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Balance","length":0.0,"no_copy":0.0,"options":"paid_from_account_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_18","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(in_list([\"Internal Transfer\", \"Receive\"], doc.payment_type) || doc.party)","fieldname":"paid_to","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Paid To","length":0.0,"no_copy":0.0,"options":"Account","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"paid_to","fieldname":"paid_to_account_currency","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Currency","length":0.0,"no_copy":0.0,"options":"Currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"paid_to","fieldname":"paid_to_account_balance","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Account Balance","length":0.0,"no_copy":0.0,"options":"paid_to_account_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"collapsible_depends_on":"","columns":0.0,"depends_on":"eval:(doc.paid_to \u0026\u0026 doc.paid_from)","fieldname":"payment_amounts_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"paid_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Paid Amount","length":0.0,"no_copy":0.0,"options":"paid_from_account_currency","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"source_exchange_rate","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Exchange Rate","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"base_paid_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Paid Amount (Company Currency)","length":0.0,"no_copy":0.0,"options":"Company:company:default_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_21","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"received_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Received Amount","length":0.0,"no_copy":0.0,"options":"paid_to_account_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"target_exchange_rate","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Exchange Rate","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"base_received_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Received Amount (Company Currency)","length":0.0,"no_copy":0.0,"options":"Company:company:default_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":1.0,"collapsible_depends_on":"references","columns":0.0,"depends_on":"eval:(doc.party \u0026\u0026 doc.paid_from \u0026\u0026 doc.paid_to \u0026\u0026 doc.paid_amount \u0026\u0026 doc.received_amount)","fieldname":"section_break_14","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Reference","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"1","depends_on":"eval:in_list([\u0027Pay\u0027, \u0027Receive\u0027], doc.payment_type)","fieldname":"allocate_payment_amount","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Allocate Payment Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"references","fieldtype":"Table","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Payment References","length":0.0,"no_copy":0.0,"options":"Payment Entry Reference","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"section_break_34","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Writeoff","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.paid_amount \u0026\u0026 doc.received_amount \u0026\u0026 doc.references)","fieldname":"total_allocated_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Total Allocated Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"base_total_allocated_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Total Allocated Amount (Company Currency)","length":0.0,"no_copy":0.0,"options":"Company:company:default_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"set_exchange_gain_loss","fieldtype":"Button","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Set Exchange Gain / Loss","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_36","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.paid_amount \u0026\u0026 doc.received_amount \u0026\u0026 doc.references)","fieldname":"unallocated_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Unallocated Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.paid_amount \u0026\u0026 doc.received_amount)","fieldname":"difference_amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Difference Amount (Company Currency)","length":0.0,"no_copy":0.0,"options":"Company:company:default_currency","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"difference_amount","fieldname":"write_off_difference_amount","fieldtype":"Button","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Write Off Difference Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":1.0,"collapsible_depends_on":"deductions","columns":0.0,"depends_on":"eval:(doc.paid_amount \u0026\u0026 doc.received_amount)","fieldname":"deductions_or_loss_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Deductions or Loss","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"deductions","fieldtype":"Table","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Payment Deductions or Loss","length":0.0,"no_copy":0.0,"options":"Payment Entry Deduction","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"transaction_references","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Transaction ID","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.paid_from \u0026\u0026 doc.paid_to)","fieldname":"reference_no","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Cheque/Reference No","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_23","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":1.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.paid_from \u0026\u0026 doc.paid_to)","fieldname":"reference_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Cheque/Reference Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:doc.docstatus\u003d\u003d1","fieldname":"clearance_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Clearance Date","length":0.0,"no_copy":1.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":1.0,"collapsible_depends_on":"","columns":0.0,"depends_on":"eval:(doc.paid_from \u0026\u0026 doc.paid_to \u0026\u0026 doc.paid_amount \u0026\u0026 doc.received_amount)","fieldname":"section_break_12","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"More Information","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"project","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Project","length":0.0,"no_copy":0.0,"options":"Project","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"remarks","fieldtype":"Small Text","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Remarks","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_16","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"letter_head","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Letter Head","length":0.0,"no_copy":0.0,"options":"Letter Head","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"print_heading","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Print Heading","length":0.0,"no_copy":0.0,"options":"Print Heading","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"subscription_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Subscription Section","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":1.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"subscription","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Subscription","length":0.0,"no_copy":1.0,"options":"Subscription","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"amended_from","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Amended From","length":0.0,"no_copy":1.0,"options":"Payment Entry","permlevel":0.0,"print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"title","fieldtype":"Data","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Title","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"has_web_view":0.0,"hide_heading":0.0,"hide_toolbar":0.0,"idx":0.0,"image_view":0.0,"in_create":0.0,"is_submittable":1.0,"issingle":0.0,"istable":0.0,"max_attachments":0.0,"modified":"2017-08-31 11:20:37.578469","modified_by":"Administrator","module":"Accounts","name":"Payment Entry","name_case":"","owner":"Administrator","permissions":[{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":0.0,"import":1.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Accounts User","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":0.0,"import":1.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Accounts Manager","set_user_permissions":0.0,"share":1.0,"submit":1.0,"write":1.0}],"quick_entry":0.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":1.0,"sort_field":"modified","sort_order":"DESC","title_field":"title","track_changes":1.0,"track_seen":0.0,"__js":"// Copyright (c) 2016, Frappe Technologies Pvt. Ltd. and contributors\r\n// For license information, please see license.txt\r\n{% include \"erpnext/public/js/controllers/accounts.js\" %}\r\n\r\nfrappe.ui.form.on(\u0027Payment Entry\u0027, {\r\n\tonload: function(frm) {\r\n\t\tif(frm.doc.__islocal) {\r\n\t\t\tif (!frm.doc.paid_from) frm.set_value(\"paid_from_account_currency\", null);\r\n\t\t\tif (!frm.doc.paid_to) frm.set_value(\"paid_to_account_currency\", null);\r\n\t\t}\r\n\t},\r\n\r\n\tsetup: function(frm) {\r\n\t\tfrm.set_query(\"paid_from\", function() {\r\n\t\t\tvar party_account_type \u003d in_list([\"Customer\", \"Student\"], frm.doc.party_type) ?\r\n\t\t\t\t\"Receivable\" : \"Payable\";\r\n\t\t\tvar account_types \u003d in_list([\"Pay\", \"Internal Transfer\"], frm.doc.payment_type) ?\r\n\t\t\t\t[\"Bank\", \"Cash\"] : party_account_type;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\t\"account_type\": [\"in\", account_types],\r\n\t\t\t\t\t\"is_group\": 0,\r\n\t\t\t\t\t\"company\": frm.doc.company\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"party_type\", function() {\r\n\t\t\treturn{\r\n\t\t\t\t\"filters\": {\r\n\t\t\t\t\t\"name\": [\"in\",[\"Customer\",\"Supplier\", \"Employee\", \"Student\"]],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"paid_to\", function() {\r\n\t\t\tvar party_account_type \u003d in_list([\"Customer\", \"Student\"], frm.doc.party_type) ?\r\n\t\t\t\t\"Receivable\" : \"Payable\";\r\n\t\t\tvar account_types \u003d in_list([\"Receive\", \"Internal Transfer\"], frm.doc.payment_type) ?\r\n\t\t\t\t[\"Bank\", \"Cash\"] : party_account_type;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\t\"account_type\": [\"in\", account_types],\r\n\t\t\t\t\t\"is_group\": 0,\r\n\t\t\t\t\t\"company\": frm.doc.company\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"account\", \"deductions\", function() {\r\n\t\t\treturn {\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\t\"is_group\": 0,\r\n\t\t\t\t\t\"company\": frm.doc.company\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"cost_center\", \"deductions\", function() {\r\n\t\t\treturn {\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\t\"is_group\": 0,\r\n\t\t\t\t\t\"company\": frm.doc.company\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"reference_doctype\", \"references\", function() {\r\n\t\t\tif (frm.doc.party_type\u003d\u003d\"Customer\") {\r\n\t\t\t\tvar doctypes \u003d [\"Sales Order\", \"Sales Invoice\", \"Journal Entry\"];\r\n\t\t\t} else if (frm.doc.party_type\u003d\u003d\"Supplier\") {\r\n\t\t\t\tvar doctypes \u003d [\"Purchase Order\", \"Purchase Invoice\", \"Journal Entry\"];\r\n\t\t\t} else if (frm.doc.party_type\u003d\u003d\"Employee\") {\r\n\t\t\t\tvar doctypes \u003d [\"Expense Claim\", \"Journal Entry\"];\r\n\t\t\t} else if (frm.doc.party_type\u003d\u003d\"Student\") {\r\n\t\t\t\tvar doctypes \u003d [\"Fees\"];\r\n\t\t\t} else {\r\n\t\t\t\tvar doctypes \u003d [\"Journal Entry\"];\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tfilters: { \"name\": [\"in\", doctypes] }\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"reference_name\", \"references\", function(doc, cdt, cdn) {\r\n\t\t\tchild \u003d locals[cdt][cdn];\r\n\t\t\tfilters \u003d {\"docstatus\": 1, \"company\": doc.company};\r\n\t\t\tparty_type_doctypes \u003d [\u0027Sales Invoice\u0027, \u0027Sales Order\u0027, \u0027Purchase Invoice\u0027, \r\n\t\t\t\t\u0027Purchase Order\u0027, \u0027Expense Claim\u0027, \u0027Fees\u0027];\r\n\r\n\t\t\tif (in_list(party_type_doctypes, child.reference_doctype)) {\r\n\t\t\t\tfilters[doc.party_type.toLowerCase()] \u003d doc.party;\r\n\t\t\t}\r\n\r\n\t\t\tif(child.reference_doctype \u003d\u003d \"Expense Claim\") {\r\n\t\t\t\tfilters[\"status\"] \u003d \"Approved\";\r\n\t\t\t\tfilters[\"is_paid\"] \u003d 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tfilters: filters\r\n\t\t\t};\r\n\t\t});\r\n\t},\r\n\r\n\trefresh: function(frm) {\r\n\t\terpnext.hide_company();\r\n\t\tfrm.events.hide_unhide_fields(frm);\r\n\t\tfrm.events.set_dynamic_labels(frm);\r\n\t\tfrm.events.show_general_ledger(frm);\r\n\t},\r\n\r\n\tcompany: function(frm) {\r\n\t\tfrm.events.hide_unhide_fields(frm);\r\n\t\tfrm.events.set_dynamic_labels(frm);\r\n\t},\r\n\r\n\thide_unhide_fields: function(frm) {\r\n\t\tvar company_currency \u003d frm.doc.company? frappe.get_doc(\":Company\", frm.doc.company).default_currency: \"\";\r\n\r\n\t\tfrm.toggle_display(\"source_exchange_rate\",\r\n\t\t\t(frm.doc.paid_amount \u0026\u0026 frm.doc.paid_from_account_currency !\u003d company_currency));\r\n\r\n\t\tfrm.toggle_display(\"target_exchange_rate\", (frm.doc.received_amount \u0026\u0026\r\n\t\t\tfrm.doc.paid_to_account_currency !\u003d company_currency \u0026\u0026\r\n\t\t\tfrm.doc.paid_from_account_currency !\u003d frm.doc.paid_to_account_currency));\r\n\r\n\t\tfrm.toggle_display(\"base_paid_amount\", frm.doc.paid_from_account_currency !\u003d company_currency);\r\n\r\n\t\tfrm.toggle_display(\"base_received_amount\", (frm.doc.paid_to_account_currency !\u003d company_currency \u0026\u0026\r\n\t\t\tfrm.doc.paid_from_account_currency !\u003d frm.doc.paid_to_account_currency));\r\n\r\n\t\tfrm.toggle_display(\"received_amount\", (frm.doc.payment_type\u003d\u003d\"Internal Transfer\" ||\r\n\t\t\tfrm.doc.paid_from_account_currency !\u003d frm.doc.paid_to_account_currency))\r\n\r\n\t\tfrm.toggle_display([\"base_total_allocated_amount\"],\r\n\t\t\t(frm.doc.paid_amount \u0026\u0026 frm.doc.received_amount \u0026\u0026 frm.doc.base_total_allocated_amount \u0026\u0026\r\n\t\t\t((frm.doc.payment_type\u003d\u003d\"Receive\" \u0026\u0026 frm.doc.paid_from_account_currency !\u003d company_currency) ||\r\n\t\t\t(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 frm.doc.paid_to_account_currency !\u003d company_currency))));\r\n\r\n\t\tvar party_amount \u003d frm.doc.payment_type\u003d\u003d\"Receive\" ?\r\n\t\t\tfrm.doc.paid_amount : frm.doc.received_amount;\r\n\r\n\t\tfrm.toggle_display(\"write_off_difference_amount\", (frm.doc.difference_amount \u0026\u0026 frm.doc.party \u0026\u0026\r\n\t\t\t(frm.doc.paid_from_account_currency \u003d\u003d frm.doc.paid_to_account_currency) \u0026\u0026\r\n\t\t\t(frm.doc.total_allocated_amount \u003e party_amount)));\r\n\r\n\t\tfrm.toggle_display(\"set_exchange_gain_loss\",\r\n\t\t\t(frm.doc.paid_amount \u0026\u0026 frm.doc.received_amount \u0026\u0026 frm.doc.difference_amount \u0026\u0026\r\n\t\t\t\t(frm.doc.paid_from_account_currency !\u003d company_currency ||\r\n\t\t\t\t\tfrm.doc.paid_to_account_currency !\u003d company_currency)));\r\n\r\n\t\tfrm.refresh_fields();\r\n\t},\r\n\r\n\tset_dynamic_labels: function(frm) {\r\n\t\tvar company_currency \u003d frm.doc.company? frappe.get_doc(\":Company\", frm.doc.company).default_currency: \"\";\r\n\r\n\t\tfrm.set_currency_labels([\"base_paid_amount\", \"base_received_amount\", \"base_total_allocated_amount\",\r\n\t\t\t\"difference_amount\"], company_currency);\r\n\r\n\t\tfrm.set_currency_labels([\"paid_amount\"], frm.doc.paid_from_account_currency);\r\n\t\tfrm.set_currency_labels([\"received_amount\"], frm.doc.paid_to_account_currency);\r\n\r\n\t\tvar party_account_currency \u003d frm.doc.payment_type\u003d\u003d\"Receive\" ?\r\n\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency;\r\n\r\n\t\tfrm.set_currency_labels([\"total_allocated_amount\", \"unallocated_amount\"], party_account_currency);\r\n\r\n\t\tvar currency_field \u003d (frm.doc.payment_type\u003d\u003d\"Receive\") ? \"paid_from_account_currency\" : \"paid_to_account_currency\"\r\n\t\tfrm.set_df_property(\"total_allocated_amount\", \"options\", currency_field);\r\n\t\tfrm.set_df_property(\"unallocated_amount\", \"options\", currency_field);\r\n\t\tfrm.set_df_property(\"party_balance\", \"options\", currency_field);\r\n\r\n\t\tfrm.set_currency_labels([\"total_amount\", \"outstanding_amount\", \"allocated_amount\"],\r\n\t\t\tparty_account_currency, \"references\");\r\n\r\n\t\tfrm.set_currency_labels([\"amount\"], company_currency, \"deductions\");\r\n\r\n\t\tcur_frm.set_df_property(\"source_exchange_rate\", \"description\",\r\n\t\t\t(\"1 \" + frm.doc.paid_from_account_currency + \" \u003d [?] \" + company_currency));\r\n\r\n\t\tcur_frm.set_df_property(\"target_exchange_rate\", \"description\",\r\n\t\t\t(\"1 \" + frm.doc.paid_to_account_currency + \" \u003d [?] \" + company_currency));\r\n\r\n\t\tfrm.refresh_fields();\r\n\t},\r\n\r\n\tshow_general_ledger: function(frm) {\r\n\t\tif(frm.doc.docstatus\u003d\u003d1) {\r\n\t\t\tfrm.add_custom_button(__(\u0027Ledger\u0027), function() {\r\n\t\t\t\tfrappe.route_options \u003d {\r\n\t\t\t\t\t\"voucher_no\": frm.doc.name,\r\n\t\t\t\t\t\"from_date\": frm.doc.posting_date,\r\n\t\t\t\t\t\"to_date\": frm.doc.posting_date,\r\n\t\t\t\t\t\"company\": frm.doc.company,\r\n\t\t\t\t\tgroup_by_voucher: 0\r\n\t\t\t\t};\r\n\t\t\t\tfrappe.set_route(\"query-report\", \"General Ledger\");\r\n\t\t\t}, \"fa fa-table\");\r\n\t\t}\r\n\t},\r\n\r\n\tpayment_type: function(frm) {\r\n\t\tif(frm.doc.payment_type \u003d\u003d \"Internal Transfer\") {\r\n\t\t\t$.each([\"party\", \"party_balance\", \"paid_from\", \"paid_to\",\r\n\t\t\t\t\"references\", \"total_allocated_amount\"], function(i, field) {\r\n\t\t\t\tfrm.set_value(field, null);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif(frm.doc.party) {\r\n\t\t\t\tfrm.events.party(frm);\t\r\n\t\t\t}\r\n\r\n\t\t\tif(frm.doc.mode_of_payment) {\r\n\t\t\t\tfrm.events.mode_of_payment(frm);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tparty_type: function(frm) {\r\n\t\tif(frm.doc.party) {\r\n\t\t\t$.each([\"party\", \"party_balance\", \"paid_from\", \"paid_to\",\r\n\t\t\t\t\"paid_from_account_currency\", \"paid_from_account_balance\",\r\n\t\t\t\t\"paid_to_account_currency\", \"paid_to_account_balance\",\r\n\t\t\t\t\"references\", \"total_allocated_amount\"],\r\n\t\t\t\tfunction(i, field) {\r\n\t\t\t\t\tfrm.set_value(field, null);\r\n\t\t\t\t})\r\n\t\t}\r\n\t},\r\n\r\n\tparty: function(frm) {\r\n\t\tif(frm.doc.payment_type \u0026\u0026 frm.doc.party_type \u0026\u0026 frm.doc.party) {\r\n\t\t\tif(!frm.doc.posting_date) {\r\n\t\t\t\tfrappe.msgprint(__(\"Please select Posting Date before selecting Party\"))\r\n\t\t\t\tfrm.set_value(\"party\", \"\");\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfrm.set_party_account_based_on_party \u003d true;\r\n\r\n\t\t\treturn frappe.call({\r\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_party_details\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\tcompany: frm.doc.company,\r\n\t\t\t\t\tparty_type: frm.doc.party_type,\r\n\t\t\t\t\tparty: frm.doc.party,\r\n\t\t\t\t\tdate: frm.doc.posting_date\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r, rt) {\r\n\t\t\t\t\tconsole.log(r, rt);\r\n\t\t\t\t\tif(r.message) {\r\n\t\t\t\t\t\tif(frm.doc.payment_type \u003d\u003d \"Receive\") {\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from\", r.message.party_account);\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from_account_currency\", r.message.party_account_currency);\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_from_account_balance\", r.message.account_balance);\r\n\t\t\t\t\t\t} else if (frm.doc.payment_type \u003d\u003d \"Pay\"){\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to\", r.message.party_account);\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to_account_currency\", r.message.party_account_currency);\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_to_account_balance\", r.message.account_balance);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfrm.set_value(\"party_balance\", r.message.party_balance);\r\n\t\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\r\n\t\t\t\t\t\tfrm.events.hide_unhide_fields(frm);\r\n\t\t\t\t\t\tfrm.events.set_dynamic_labels(frm);\r\n\t\t\t\t\t\tfrm.set_party_account_based_on_party \u003d false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tpaid_from: function(frm) {\r\n\t\tif(frm.set_party_account_based_on_party) return;\r\n\r\n\t\tfrm.events.set_account_currency_and_balance(frm, frm.doc.paid_from,\r\n\t\t\t\"paid_from_account_currency\", \"paid_from_account_balance\", function(frm) {\r\n\t\t\t\tif (frm.doc.payment_type \u003d\u003d \"Receive\") {\r\n\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\r\n\t\t\t\t} else if (frm.doc.payment_type \u003d\u003d \"Pay\") {\r\n\t\t\t\t\tfrm.events.paid_amount(frm);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\r\n\tpaid_to: function(frm) {\r\n\t\tif(frm.set_party_account_based_on_party) return;\r\n\r\n\t\tfrm.events.set_account_currency_and_balance(frm, frm.doc.paid_to,\r\n\t\t\t\"paid_to_account_currency\", \"paid_to_account_balance\", function(frm) {\r\n\t\t\t\tif(frm.doc.payment_type \u003d\u003d \"Pay\") {\r\n\t\t\t\t\tfrm.events.get_outstanding_documents(frm);\r\n\t\t\t\t} else if (frm.doc.payment_type \u003d\u003d \"Receive\") {\r\n\t\t\t\t\tfrm.events.received_amount(frm);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\r\n\tset_account_currency_and_balance: function(frm, account, currency_field,\r\n\t\t\tbalance_field, callback_function) {\r\n\t\tif (frm.doc.posting_date \u0026\u0026 account) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_account_details\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\t\"account\": account,\r\n\t\t\t\t\t\"date\": frm.doc.posting_date\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r, rt) {\r\n\t\t\t\t\tif(r.message) {\r\n\t\t\t\t\t\tfrm.set_value(currency_field, r.message[\u0027account_currency\u0027]);\r\n\t\t\t\t\t\tfrm.set_value(balance_field, r.message[\u0027account_balance\u0027]);\r\n\r\n\t\t\t\t\t\tif(frm.doc.payment_type\u003d\u003d\"Receive\" \u0026\u0026 currency_field\u003d\u003d\"paid_to_account_currency\") {\r\n\t\t\t\t\t\t\tfrm.toggle_reqd([\"reference_no\", \"reference_date\"],\r\n\t\t\t\t\t\t\t\t(r.message[\u0027account_type\u0027] \u003d\u003d \"Bank\" ? 1 : 0));\r\n\t\t\t\t\t\t\tif(!frm.doc.received_amount \u0026\u0026 frm.doc.paid_amount)\r\n\t\t\t\t\t\t\t\tfrm.events.paid_amount(frm);\r\n\t\t\t\t\t\t} else if(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 currency_field\u003d\u003d\"paid_from_account_currency\") {\r\n\t\t\t\t\t\t\tfrm.toggle_reqd([\"reference_no\", \"reference_date\"],\r\n\t\t\t\t\t\t\t\t(r.message[\u0027account_type\u0027] \u003d\u003d \"Bank\" ? 1 : 0));\r\n\r\n\t\t\t\t\t\t\tif(!frm.doc.paid_amount \u0026\u0026 frm.doc.received_amount)\r\n\t\t\t\t\t\t\t\tfrm.events.received_amount(frm);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(callback_function) callback_function(frm);\r\n\r\n\t\t\t\t\t\tfrm.events.hide_unhide_fields(frm);\r\n\t\t\t\t\t\tfrm.events.set_dynamic_labels(frm);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\t\t\t\r\n\t\t}\r\n\t},\r\n\r\n\tpaid_from_account_currency: function(frm) {\r\n\t\tif(!frm.doc.paid_from_account_currency) return;\r\n\t\tvar company_currency \u003d frappe.get_doc(\":Company\", frm.doc.company).default_currency;\r\n\r\n\t\tif (frm.doc.paid_from_account_currency \u003d\u003d company_currency) {\r\n\t\t\tfrm.set_value(\"source_exchange_rate\", 1);\r\n\t\t} else if (frm.doc.paid_from){\r\n\t\t\tif (in_list([\"Internal Transfer\", \"Pay\"], frm.doc.payment_type)) {\r\n\t\t\t\tvar company_currency \u003d frappe.get_doc(\":Company\", frm.doc.company).default_currency;\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod: \"erpnext.setup.utils.get_exchange_rate\",\r\n\t\t\t\t\targs: {\r\n\t\t\t\t\t\tfrom_currency: frm.doc.paid_from_account_currency,\r\n\t\t\t\t\t\tto_currency: company_currency,\r\n\t\t\t\t\t\ttransaction_date: frm.doc.posting_date\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: function(r, rt) {\r\n\t\t\t\t\t\tfrm.set_value(\"source_exchange_rate\", r.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tfrm.events.set_current_exchange_rate(frm, \"source_exchange_rate\",\r\n\t\t\t\t\tfrm.doc.paid_from_account_currency, company_currency);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tpaid_to_account_currency: function(frm) {\r\n\t\tif(!frm.doc.paid_to_account_currency) return;\r\n\t\tvar company_currency \u003d frappe.get_doc(\":Company\", frm.doc.company).default_currency;\r\n\r\n\t\tfrm.events.set_current_exchange_rate(frm, \"target_exchange_rate\",\r\n\t\t\tfrm.doc.paid_to_account_currency, company_currency);\r\n\t},\r\n\r\n\tset_current_exchange_rate: function(frm, exchange_rate_field, from_currency, to_currency) {\r\n\t\tfrappe.call({\r\n\t\t\tmethod: \"erpnext.setup.utils.get_exchange_rate\",\r\n\t\t\targs: {\r\n\t\t\t\ttransaction_date: frm.doc.posting_date,\r\n\t\t\t\tfrom_currency: from_currency,\r\n\t\t\t\tto_currency: to_currency\r\n\t\t\t},\r\n\t\t\tcallback: function(r, rt) {\r\n\t\t\t\tfrm.set_value(exchange_rate_field, r.message);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\t\r\n\tposting_date: function(frm) {\r\n\t\tfrm.events.paid_from_account_currency(frm);\r\n\t},\r\n\r\n\tsource_exchange_rate: function(frm) {\r\n\t\tif (frm.doc.paid_amount) {\r\n\t\t\tfrm.set_value(\"base_paid_amount\", flt(frm.doc.paid_amount) * flt(frm.doc.source_exchange_rate));\r\n\t\t\tif(!frm.set_paid_amount_based_on_received_amount \u0026\u0026\r\n\t\t\t\t\t(frm.doc.paid_from_account_currency \u003d\u003d frm.doc.paid_to_account_currency)) {\r\n\t\t\t\tfrm.set_value(\"target_exchange_rate\", frm.doc.source_exchange_rate);\r\n\t\t\t\tfrm.set_value(\"base_received_amount\", frm.doc.base_paid_amount);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfrm.events.set_difference_amount(frm);\r\n\t\t}\r\n\r\n\t\t// Make read only if Accounts Settings doesn\u0027t allow stale rates\r\n\t\tfrappe.model.get_value(\"Accounts Settings\", null, \"allow_stale\",\r\n\t\t\tfunction(d){\r\n\t\t\t\tfrm.set_df_property(\"source_exchange_rate\", \"read_only\", cint(d.allow_stale) ? 0 : 1);\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\r\n\ttarget_exchange_rate: function(frm) {\r\n\t\tfrm.set_paid_amount_based_on_received_amount \u003d true;\r\n\t\t\r\n\t\tif (frm.doc.received_amount) {\r\n\t\t\tfrm.set_value(\"base_received_amount\",\r\n\t\t\t\tflt(frm.doc.received_amount) * flt(frm.doc.target_exchange_rate));\r\n\t\t\t\t\r\n\t\t\tif(!frm.doc.source_exchange_rate \u0026\u0026 \r\n\t\t\t\t\t(frm.doc.paid_from_account_currency \u003d\u003d frm.doc.paid_to_account_currency)) {\r\n\t\t\t\tfrm.set_value(\"source_exchange_rate\", frm.doc.target_exchange_rate);\r\n\t\t\t\tfrm.set_value(\"base_paid_amount\", frm.doc.base_received_amount);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfrm.events.set_difference_amount(frm);\r\n\t\t}\r\n\t\tfrm.set_paid_amount_based_on_received_amount \u003d false;\r\n\r\n\t\t// Make read only if Accounts Settings doesn\u0027t allow stale rates\r\n\t\tfrappe.model.get_value(\"Accounts Settings\", null, \"allow_stale\",\r\n\t\t\tfunction(d){\r\n\t\t\t\tfrm.set_df_property(\"target_exchange_rate\", \"read_only\", cint(d.allow_stale) ? 0 : 1);\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\r\n\tpaid_amount: function(frm) {\r\n\t\tfrm.set_value(\"base_paid_amount\", flt(frm.doc.paid_amount) * flt(frm.doc.source_exchange_rate));\r\n\t\tfrm.trigger(\"reset_received_amount\");\r\n\t},\r\n\r\n\treceived_amount: function(frm) {\r\n\t\tfrm.set_paid_amount_based_on_received_amount \u003d true;\r\n\r\n\t\tif(!frm.doc.paid_amount \u0026\u0026 frm.doc.paid_from_account_currency \u003d\u003d frm.doc.paid_to_account_currency) {\r\n\t\t\tfrm.set_value(\"paid_amount\", frm.doc.received_amount);\r\n\r\n\t\t\tif(frm.doc.target_exchange_rate) {\r\n\t\t\t\tfrm.set_value(\"source_exchange_rate\", frm.doc.target_exchange_rate);\r\n\t\t\t}\r\n\t\t\tfrm.set_value(\"base_paid_amount\", frm.doc.base_received_amount);\r\n\t\t}\r\n\r\n\t\tfrm.set_value(\"base_received_amount\",\r\n\t\t\tflt(frm.doc.received_amount) * flt(frm.doc.target_exchange_rate));\r\n\r\n\t\tif(frm.doc.payment_type \u003d\u003d \"Pay\")\r\n\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.received_amount);\r\n\t\telse\r\n\t\t\tfrm.events.set_difference_amount(frm);\r\n\t\t\r\n\t\tfrm.set_paid_amount_based_on_received_amount \u003d false;\r\n\t},\r\n\t\r\n\treset_received_amount: function(frm) {\r\n\t\tif(!frm.set_paid_amount_based_on_received_amount \u0026\u0026\r\n\t\t\t\t(frm.doc.paid_from_account_currency \u003d\u003d frm.doc.paid_to_account_currency)) {\r\n\t\t\t\r\n\t\t\tfrm.set_value(\"received_amount\", frm.doc.paid_amount);\r\n\r\n\t\t\tif(frm.doc.source_exchange_rate) {\r\n\t\t\t\tfrm.set_value(\"target_exchange_rate\", frm.doc.source_exchange_rate);\r\n\t\t\t}\r\n\t\t\tfrm.set_value(\"base_received_amount\", frm.doc.base_paid_amount);\r\n\t\t}\r\n\t\t\r\n\t\tif(frm.doc.payment_type \u003d\u003d \"Receive\")\r\n\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.paid_amount);\r\n\t\telse\r\n\t\t\tfrm.events.set_difference_amount(frm);\r\n\t},\r\n\r\n\tget_outstanding_documents: function(frm) {\r\n\t\tfrm.clear_table(\"references\");\r\n\r\n\t\tif(!frm.doc.party) return;\r\n\r\n\t\tfrm.events.check_mandatory_to_fetch(frm);\r\n\t\tvar company_currency \u003d frappe.get_doc(\":Company\", frm.doc.company).default_currency;\r\n\r\n\t\treturn  frappe.call({\r\n\t\t\tmethod: \u0027erpnext.accounts.doctype.payment_entry.payment_entry.get_outstanding_reference_documents\u0027,\r\n\t\t\targs: {\r\n\t\t\t\targs: {\r\n\t\t\t\t\t\"posting_date\": frm.doc.posting_date,\r\n\t\t\t\t\t\"company\": frm.doc.company,\r\n\t\t\t\t\t\"party_type\": frm.doc.party_type,\r\n\t\t\t\t\t\"payment_type\": frm.doc.payment_type,\r\n\t\t\t\t\t\"party\": frm.doc.party,\r\n\t\t\t\t\t\"party_account\": frm.doc.payment_type\u003d\u003d\"Receive\" ? frm.doc.paid_from : frm.doc.paid_to\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcallback: function(r, rt) {\r\n\t\t\t\tif(r.message) {\r\n\t\t\t\t\tvar total_positive_outstanding \u003d 0;\r\n\t\t\t\t\tvar total_negative_outstanding \u003d 0;\r\n\r\n\t\t\t\t\t$.each(r.message, function(i, d) {\r\n\t\t\t\t\t\tvar c \u003d frm.add_child(\"references\");\r\n\t\t\t\t\t\tc.reference_doctype \u003d d.voucher_type;\r\n\t\t\t\t\t\tc.reference_name \u003d d.voucher_no;\r\n\t\t\t\t\t\tc.due_date \u003d d.due_date\r\n\t\t\t\t\t\tc.total_amount \u003d d.invoice_amount;\r\n\t\t\t\t\t\tc.outstanding_amount \u003d d.outstanding_amount;\r\n\t\t\t\t\t\tc.bill_no \u003d d.bill_no;\r\n\r\n\t\t\t\t\t\tif(!in_list([\"Sales Order\", \"Purchase Order\", \"Expense Claim\"], d.voucher_type)) {\r\n\t\t\t\t\t\t\tif(flt(d.outstanding_amount) \u003e 0)\r\n\t\t\t\t\t\t\t\ttotal_positive_outstanding +\u003d flt(d.outstanding_amount);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\ttotal_negative_outstanding +\u003d Math.abs(flt(d.outstanding_amount));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar party_account_currency \u003d frm.doc.payment_type\u003d\u003d\"Receive\" ?\r\n\t\t\t\t\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency;\r\n\r\n\t\t\t\t\t\tif(party_account_currency !\u003d company_currency) {\r\n\t\t\t\t\t\t\tc.exchange_rate \u003d d.exchange_rate;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tc.exchange_rate \u003d 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (in_list([\u0027Sales Invoice\u0027, \u0027Purchase Invoice\u0027, \"Expense Claim\"], d.reference_doctype)){\r\n\t\t\t\t\t\t\tc.due_date \u003d d.due_date;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Receive\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Customer\") ||\r\n\t\t\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Supplier\")  ||\r\n\t\t\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Employee\")\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif(total_positive_outstanding \u003e total_negative_outstanding)\r\n\t\t\t\t\t\t\tfrm.set_value(\"paid_amount\",\r\n\t\t\t\t\t\t\t\ttotal_positive_outstanding - total_negative_outstanding);\r\n\t\t\t\t\t} else if (\r\n\t\t\t\t\t\ttotal_negative_outstanding \u0026\u0026\r\n\t\t\t\t\t\ttotal_positive_outstanding \u003c total_negative_outstanding\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tfrm.set_value(\"received_amount\",\r\n\t\t\t\t\t\t\ttotal_negative_outstanding - total_positive_outstanding);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfrm.events.allocate_party_amount_against_ref_docs(frm,\r\n\t\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Receive\" ? frm.doc.paid_amount : frm.doc.received_amount));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tallocate_payment_amount: function(frm) {\r\n\t\tif(frm.doc.payment_type \u003d\u003d \u0027Internal Transfer\u0027){\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(frm.doc.references.length \u003d\u003d 0){\r\n\t\t\tfrm.events.get_outstanding_documents(frm);\r\n\t\t}\r\n\r\n\t\tfrm.events.allocate_party_amount_against_ref_docs(frm, frm.doc.received_amount);\r\n\t},\r\n\r\n\tallocate_party_amount_against_ref_docs: function(frm, paid_amount) {\r\n\t\tvar total_positive_outstanding_including_order \u003d 0;\r\n\t\tvar total_negative_outstanding \u003d 0;\r\n\r\n\t\t$.each(frm.doc.references || [], function(i, row) {\r\n\t\t\tif(flt(row.outstanding_amount) \u003e 0)\r\n\t\t\t\ttotal_positive_outstanding_including_order +\u003d flt(row.outstanding_amount);\r\n\t\t\telse\r\n\t\t\t\ttotal_negative_outstanding +\u003d Math.abs(flt(row.outstanding_amount));\r\n\t\t})\r\n\r\n\t\tvar allocated_negative_outstanding \u003d 0;\r\n\t\tif ((frm.doc.payment_type\u003d\u003d\"Receive\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Customer\") ||\r\n\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Supplier\") ||\r\n\t\t\t\t(frm.doc.payment_type\u003d\u003d\"Pay\" \u0026\u0026 frm.doc.party_type\u003d\u003d\"Employee\")) {\r\n\t\t\tif(total_positive_outstanding_including_order \u003e paid_amount) {\r\n\t\t\t\tvar remaining_outstanding \u003d total_positive_outstanding_including_order - paid_amount;\r\n\t\t\t\tallocated_negative_outstanding \u003d total_negative_outstanding \u003c remaining_outstanding ?\r\n\t\t\t\t\ttotal_negative_outstanding : remaining_outstanding;\r\n\t\t\t}\r\n\r\n\t\t\tvar allocated_positive_outstanding \u003d  paid_amount + allocated_negative_outstanding;\r\n\t\t} else if (in_list([\"Customer\", \"Supplier\"], frm.doc.party_type)) {\r\n\t\t\tif(paid_amount \u003e total_negative_outstanding) {\r\n\t\t\t\tif(total_negative_outstanding \u003d\u003d 0) {\r\n\t\t\t\t\tfrappe.msgprint(__(\"Cannot {0} {1} {2} without any negative outstanding invoice\",\r\n\t\t\t\t\t\t[frm.doc.payment_type,\r\n\t\t\t\t\t\t\t(frm.doc.party_type\u003d\u003d\"Customer\" ? \"to\" : \"from\"), frm.doc.party_type]));\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfrappe.msgprint(__(\"Paid Amount cannot be greater than total negative outstanding amount {0}\", [total_negative_outstanding]));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tallocated_positive_outstanding \u003d total_negative_outstanding - paid_amount;\r\n\t\t\t\tallocated_negative_outstanding \u003d paid_amount +\r\n\t\t\t\t\t(total_positive_outstanding_including_order \u003c allocated_positive_outstanding ?\r\n\t\t\t\t\t\ttotal_positive_outstanding_including_order : allocated_positive_outstanding)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$.each(frm.doc.references || [], function(i, row) {\r\n\t\t\trow.allocated_amount \u003d 0 //If allocate payment amount checkbox is unchecked, set zero to allocate amount\r\n\t\t\tif(frm.doc.allocate_payment_amount){\r\n\t\t\t\tif(row.outstanding_amount \u003e 0 \u0026\u0026 allocated_positive_outstanding \u003e 0) {\r\n\t\t\t\t\tif(row.outstanding_amount \u003e\u003d allocated_positive_outstanding) {\r\n\t\t\t\t\t\trow.allocated_amount \u003d allocated_positive_outstanding;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.allocated_amount \u003d row.outstanding_amount;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tallocated_positive_outstanding -\u003d flt(row.allocated_amount);\r\n\t\t\t\t} else if (row.outstanding_amount \u003c 0 \u0026\u0026 allocated_negative_outstanding) {\r\n\t\t\t\t\tif(Math.abs(row.outstanding_amount) \u003e\u003d allocated_negative_outstanding)\r\n\t\t\t\t\t\trow.allocated_amount \u003d -1*allocated_negative_outstanding;\r\n\t\t\t\t\telse row.allocated_amount \u003d row.outstanding_amount;\r\n\r\n\t\t\t\t\tallocated_negative_outstanding -\u003d Math.abs(flt(row.allocated_amount));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tfrm.refresh_fields()\r\n\t\tfrm.events.set_total_allocated_amount(frm);\r\n\t},\r\n\r\n\tset_total_allocated_amount: function(frm) {\r\n\t\tvar total_allocated_amount \u003d 0.0;\r\n\t\tvar base_total_allocated_amount \u003d 0.0;\r\n\t\t$.each(frm.doc.references || [], function(i, row) {\r\n\t\t\tif (row.allocated_amount) {\r\n\t\t\t\ttotal_allocated_amount +\u003d flt(row.allocated_amount);\r\n\t\t\t\tbase_total_allocated_amount +\u003d flt(flt(row.allocated_amount)*flt(row.exchange_rate),\r\n\t\t\t\t\tprecision(\"base_paid_amount\"));\r\n\t\t\t}\r\n\t\t});\r\n\t\tfrm.set_value(\"total_allocated_amount\", Math.abs(total_allocated_amount));\r\n\t\tfrm.set_value(\"base_total_allocated_amount\", Math.abs(base_total_allocated_amount));\r\n\r\n\t\tfrm.events.set_difference_amount(frm);\r\n\t},\r\n\r\n\tset_difference_amount: function(frm) {\r\n\t\tvar unallocated_amount \u003d 0;\r\n\t\tif(frm.doc.party) {\r\n\t\t\tvar party_amount \u003d frm.doc.payment_type\u003d\u003d\"Receive\" ?\r\n\t\t\t\tfrm.doc.paid_amount : frm.doc.received_amount;\r\n\r\n\t\t\tif(frm.doc.total_allocated_amount \u003c party_amount) {\r\n\t\t\t\tunallocated_amount \u003d party_amount - frm.doc.total_allocated_amount;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfrm.set_value(\"unallocated_amount\", unallocated_amount);\r\n\r\n\t\tvar difference_amount \u003d 0;\r\n\t\tvar base_unallocated_amount \u003d flt(frm.doc.unallocated_amount) *\r\n\t\t\t(frm.doc.payment_type\u003d\u003d\"Receive\" ? frm.doc.source_exchange_rate : frm.doc.target_exchange_rate);\r\n\r\n\t\tvar base_party_amount \u003d flt(frm.doc.base_total_allocated_amount) + base_unallocated_amount;\r\n\r\n\t\tif(frm.doc.payment_type \u003d\u003d \"Receive\") {\r\n\t\t\tdifference_amount \u003d base_party_amount - flt(frm.doc.base_received_amount);\r\n\t\t} else if (frm.doc.payment_type \u003d\u003d \"Pay\") {\r\n\t\t\tdifference_amount \u003d flt(frm.doc.base_paid_amount) - base_party_amount;\r\n\t\t} else {\r\n\t\t\tdifference_amount \u003d flt(frm.doc.base_paid_amount) - flt(frm.doc.base_received_amount);\r\n\t\t}\r\n\r\n\t\tvar total_deductions \u003d frappe.utils.sum($.map(frm.doc.deductions || [],\r\n\t\t\tfunction(d) { return flt(d.amount) }));\r\n\r\n\t\tfrm.set_value(\"difference_amount\", difference_amount - total_deductions);\r\n\r\n\t\tfrm.events.hide_unhide_fields(frm);\r\n\t},\r\n\r\n\tcheck_mandatory_to_fetch: function(frm) {\r\n\t\t$.each([\"Company\", \"Party Type\", \"Party\", \"payment_type\"], function(i, field) {\r\n\t\t\tif(!frm.doc[frappe.model.scrub(field)]) {\r\n\t\t\t\tfrappe.msgprint(__(\"Please select {0} first\", [field]));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\tvalidate_reference_document: function(frm, row) {\r\n\t\tvar _validate \u003d function(i, row) {\r\n\t\t\tif (!row.reference_doctype) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(frm.doc.party_type\u003d\u003d\"Customer\" \u0026\u0026\r\n\t\t\t\t!in_list([\"Sales Order\", \"Sales Invoice\", \"Journal Entry\"], row.reference_doctype)\r\n\t\t\t) {\r\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"reference_doctype\", null);\r\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Sales Order, Sales Invoice or Journal Entry\", [row.idx]));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif(frm.doc.party_type\u003d\u003d\"Supplier\" \u0026\u0026\r\n\t\t\t\t!in_list([\"Purchase Order\", \"Purchase Invoice\", \"Journal Entry\"], row.reference_doctype)\r\n\t\t\t) {\r\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"against_voucher_type\", null);\r\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Purchase Order, Purchase Invoice or Journal Entry\", [row.idx]));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(frm.doc.party_type\u003d\u003d\"Employee\" \u0026\u0026\r\n\t\t\t\t!in_list([\"Expense Claim\", \"Journal Entry\"], row.reference_doctype)\r\n\t\t\t) {\r\n\t\t\t\tfrappe.model.set_value(row.doctype, row.name, \"against_voucher_type\", null);\r\n\t\t\t\tfrappe.msgprint(__(\"Row #{0}: Reference Document Type must be one of Expense Claim or Journal Entry\", [row.idx]));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (row) {\r\n\t\t\t_validate(0, row);\r\n\t\t} else {\r\n\t\t\t$.each(frm.doc.vouchers || [], _validate);\r\n\t\t}\r\n\t},\r\n\r\n\twrite_off_difference_amount: function(frm) {\r\n\t\tfrm.events.set_deductions_entry(frm, \"write_off_account\");\r\n\t},\r\n\r\n\tset_exchange_gain_loss: function(frm) {\r\n\t\tfrm.events.set_deductions_entry(frm, \"exchange_gain_loss_account\");\r\n\t},\r\n\r\n\tset_deductions_entry: function(frm, account) {\r\n\t\tif(frm.doc.difference_amount) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_company_defaults\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\tcompany: frm.doc.company\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r, rt) {\r\n\t\t\t\t\tif(r.message) {\r\n\t\t\t\t\t\tvar write_off_row \u003d $.map(frm.doc[\"deductions\"] || [], function(t) {\r\n\t\t\t\t\t\t\treturn t.account\u003d\u003dr.message[account] ? t : null; });\r\n\r\n\t\t\t\t\t\tif (!write_off_row.length) {\r\n\t\t\t\t\t\t\tvar row \u003d frm.add_child(\"deductions\");\r\n\t\t\t\t\t\t\trow.account \u003d r.message[account];\r\n\t\t\t\t\t\t\trow.cost_center \u003d r.message[\"cost_center\"];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar row \u003d write_off_row[0];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trow.amount \u003d flt(row.amount) + flt(frm.doc.difference_amount);\r\n\t\t\t\t\t\trefresh_field(\"deductions\");\r\n\r\n\t\t\t\t\t\tfrm.events.set_difference_amount(frm);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nfrappe.ui.form.on(\u0027Payment Entry Reference\u0027, {\r\n\treference_doctype: function(frm, cdt, cdn) {\r\n\t\tvar row \u003d locals[cdt][cdn];\r\n\t\tfrm.events.validate_reference_document(frm, row);\r\n\t},\r\n\r\n\treference_name: function(frm, cdt, cdn) {\r\n\t\tvar row \u003d locals[cdt][cdn];\r\n\t\treturn frappe.call({\r\n\t\t\tmethod: \"erpnext.accounts.doctype.payment_entry.payment_entry.get_reference_details\",\r\n\t\t\targs: {\r\n\t\t\t\treference_doctype: row.reference_doctype,\r\n\t\t\t\treference_name: row.reference_name,\r\n\t\t\t\tparty_account_currency: frm.doc.payment_type\u003d\u003d\"Receive\" ?\r\n\t\t\t\t\tfrm.doc.paid_from_account_currency : frm.doc.paid_to_account_currency\r\n\t\t\t},\r\n\t\t\tcallback: function(r, rt) {\r\n\t\t\t\tif(r.message) {\r\n\t\t\t\t\t$.each(r.message, function(field, value) {\r\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, field, value);\r\n\t\t\t\t\t})\r\n\t\t\t\t\tfrm.refresh_fields();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tallocated_amount: function(frm) {\r\n\t\tfrm.events.set_total_allocated_amount(frm);\r\n\t},\r\n\r\n\treferences_remove: function(frm) {\r\n\t\tfrm.events.set_total_allocated_amount(frm);\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Payment Entry Deduction\u0027, {\r\n\tamount: function(frm) {\r\n\t\tfrm.events.set_difference_amount(frm);\r\n\t},\r\n\r\n\tdeductions_remove: function(frm) {\r\n\t\tfrm.events.set_difference_amount(frm);\r\n\t}\r\n})\r\n"},{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":0.0,"allow_rename":0.0,"beta":0.0,"creation":"2016-06-01 16:55:32.196722","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"","editable_grid":1.0,"engine":"InnoDB","fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":2.0,"fieldname":"reference_doctype","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Type","length":0.0,"no_copy":0.0,"options":"DocType","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":2.0,"fieldname":"reference_name","fieldtype":"Dynamic Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Name","length":0.0,"no_copy":0.0,"options":"reference_doctype","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"due_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Due Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"bill_no","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Supplier Invoice No","length":0.0,"no_copy":1.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_4","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":2.0,"fieldname":"total_amount","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Total Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":2.0,"fieldname":"outstanding_amount","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Outstanding","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":2.0,"fieldname":"allocated_amount","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Allocated","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:(doc.reference_doctype\u003d\u003d\u0027Purchase Invoice\u0027)","fieldname":"exchange_rate","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Exchange Rate","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"has_web_view":0.0,"hide_heading":0.0,"hide_toolbar":0.0,"idx":0.0,"image_view":0.0,"in_create":0.0,"is_submittable":0.0,"issingle":0.0,"istable":1.0,"max_attachments":0.0,"modified":"2017-10-16 17:37:01.192312","modified_by":"Administrator","module":"Accounts","name":"Payment Entry Reference","name_case":"","owner":"Administrator","permissions":[],"quick_entry":1.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":0.0,"sort_field":"modified","sort_order":"DESC","track_changes":1.0,"track_seen":0.0},{"allow_copy":0.0,"allow_import":0.0,"allow_rename":0.0,"beta":0.0,"creation":"2016-06-15 15:56:30.815503","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"","editable_grid":1.0,"fields":[{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"account","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_list_view":1.0,"label":"Account","length":0.0,"no_copy":0.0,"options":"Account","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"cost_center","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_list_view":1.0,"label":"Cost Center","length":0.0,"no_copy":0.0,"options":"Cost Center","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"amount","fieldtype":"Currency","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_list_view":1.0,"label":"Amount","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"hide_heading":0.0,"hide_toolbar":0.0,"idx":0.0,"image_view":0.0,"in_create":0.0,"in_dialog":0.0,"is_submittable":0.0,"issingle":0.0,"istable":1.0,"max_attachments":0.0,"modified":"2016-07-11 03:28:03.420683","modified_by":"Administrator","module":"Accounts","name":"Payment Entry Deduction","name_case":"","owner":"Administrator","permissions":[],"quick_entry":1.0,"read_only":0.0,"read_only_onload":0.0,"sort_field":"modified","sort_order":"DESC","track_seen":0.0}],"user_settings":"{}"}