{"docs":[{"allow_copy":0,"allow_import":1,"allow_rename":1,"autoname":"field:title","beta":0,"creation":"2013-01-10 16:34:09","custom":0,"description":"Standard tax template that can be applied to all Sales Transactions. This template can contain list of tax heads and also other expense / income heads like \"Shipping\", \"Insurance\", \"Handling\" etc.\n\n#### Note\n\nThe tax rate you define here will be the standard tax rate for all **Items**. If there are **Items** that have different rates, they must be added in the **Item Tax** table in the **Item** master.\n\n#### Description of Columns\n\n1. Calculation Type: \n    - This can be on **Net Total** (that is the sum of basic amount).\n    - **On Previous Row Total / Amount** (for cumulative taxes or charges). If you select this option, the tax will be applied as a percentage of the previous row (in the tax table) amount or total.\n    - **Actual** (as mentioned).\n2. Account Head: The Account ledger under which this tax will be booked\n3. Cost Center: If the tax / charge is an income (like shipping) or expense it needs to be booked against a Cost Center.\n4. Description: Description of the tax (that will be printed in invoices / quotes).\n5. Rate: Tax rate.\n6. Amount: Tax amount.\n7. Total: Cumulative total to this point.\n8. Enter Row: If based on \"Previous Row Total\" you can select the row number which will be taken as a base for this calculation (default is the previous row).\n9. Is this Tax included in Basic Rate?: If you check this, it means that this tax will not be shown below the item table, but will be included in the Basic Rate in your main item table. This is useful where you want give a flat price (inclusive of all taxes) price to customers.","docstatus":0,"doctype":"DocType","document_type":"Setup","editable_grid":0,"fields":[{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"title","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":1,"in_list_view":0,"in_standard_filter":0,"label":"Title","length":0,"no_copy":1,"oldfieldname":"title","oldfieldtype":"Data","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"4lt627jcdn","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"is_default","fieldtype":"Check","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"in_standard_filter":0,"label":"Default","length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7anibc2mbq","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"disabled","fieldtype":"Check","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"in_standard_filter":0,"label":"Disabled","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1575vufu9o","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_3","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1q7sgiibsi","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"company","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":1,"in_list_view":1,"in_standard_filter":1,"label":"Company","length":0,"no_copy":0,"oldfieldname":"company","oldfieldtype":"Link","options":"Company","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":1,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5652ml3kai","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_5","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"hv2r8dcs","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"* Will be calculated in the transaction.","fieldname":"taxes","fieldtype":"Table","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"in_standard_filter":0,"label":"Sales Taxes and Charges","length":0,"no_copy":0,"oldfieldname":"other_charges","oldfieldtype":"Table","options":"Sales Taxes and Charges","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3e861ggp0a","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"hide_heading":0,"hide_toolbar":0,"icon":"fa fa-money","idx":1.0,"image_view":0,"in_create":0,"in_dialog":0.0,"is_submittable":0,"issingle":0,"istable":0,"max_attachments":0,"modified":"2016-11-07 05:18:41.743257","modified_by":"Administrator","module":"Accounts","name":"Sales Taxes and Charges Template","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":1.0,"cancel":0.0,"create":0.0,"delete":0.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"is_custom":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Sales User","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":0.0,"doctype":"DocPerm","name":"224ndv9855","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"is_custom":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Accounts Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"3r3vm7h7tv","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"permissions","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"is_custom":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Sales Master Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"73utvppvip","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"permissions","parent":"Sales Taxes and Charges Template","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"quick_entry":0,"read_only":0,"read_only_onload":0,"sort_order":"ASC","track_seen":0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\ncur_frm.cscript.tax_table \u003d \"Sales Taxes and Charges\";\r\n\r\n/* Adding /erpnext/public/js/controllers/accounts.js */\n// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\n// get tax rate\r\nfrappe.provide(\"erpnext.taxes\");\r\nfrappe.provide(\"erpnext.taxes.flags\");\r\n\r\nfrappe.ui.form.on(cur_frm.doctype, {\r\n\tsetup: function(frm) {\r\n\t\t// set conditional display for rate column in taxes\r\n\t\t$(frm.wrapper).on(\u0027grid-row-render\u0027, function(e, grid_row) {\r\n\t\t\tif(in_list([\u0027Sales Taxes and Charges\u0027, \u0027Purchase Taxes and Charges\u0027], grid_row.doc.doctype)) {\r\n\t\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(grid_row);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tonload: function(frm) {\r\n\t\tif(frm.get_field(\"taxes\")) {\r\n\t\t\tfrm.set_query(\"account_head\", \"taxes\", function(doc) {\r\n\t\t\t\tif(frm.cscript.tax_table \u003d\u003d \"Sales Taxes and Charges\") {\r\n\t\t\t\t\tvar account_type \u003d [\"Tax\", \"Chargeable\", \"Expense Account\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar account_type \u003d [\"Tax\", \"Chargeable\", \"Income Account\"];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tquery: \"erpnext.controllers.queries.tax_account_query\",\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t\"account_type\": account_type,\r\n\t\t\t\t\t\t\"company\": doc.company\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfrm.set_query(\"cost_center\", \"taxes\", function(doc) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t\u0027company\u0027: doc.company,\r\n\t\t\t\t\t\t\"is_group\": 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tvalidate: function(frm) {\r\n\t\t// neither is absolutely mandatory\r\n\t\tif(frm.get_docfield(\"taxes\")) {\r\n\t\t\tfrm.get_docfield(\"taxes\", \"rate\").reqd \u003d 0;\r\n\t\t\tfrm.get_docfield(\"taxes\", \"tax_amount\").reqd \u003d 0;\r\n\t\t}\r\n\r\n\t},\r\n\ttaxes_on_form_rendered: function(frm) {\r\n\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.open_grid_row());\r\n\t}\r\n});\r\n\r\nfrappe.ui.form.on(\u0027Sales Invoice Payment\u0027, {\r\n\tmode_of_payment: function(frm, cdt, cdn) {\r\n\t\tvar d \u003d locals[cdt][cdn];\r\n\t\tget_payment_mode_account(frm, d.mode_of_payment, function(account){\r\n\t\t\tfrappe.model.set_value(cdt, cdn, \u0027account\u0027, account)\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Purchase Invoice\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tfrm.set_value(\u0027cash_bank_account\u0027, account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Payment Entry\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tvar payment_account_field \u003d frm.doc.payment_type \u003d\u003d \"Receive\" ? \"paid_to\" : \"paid_from\";\r\n\t\t\tfrm.set_value(payment_account_field, account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nfrappe.ui.form.on(\u0027Salary Structure\u0027, {\r\n\tmode_of_payment: function(frm) {\r\n\t\tget_payment_mode_account(frm, frm.doc.mode_of_payment, function(account){\r\n\t\t\tfrm.set_value(\"payment_account\", account);\r\n\t\t})\r\n\t}\r\n})\r\n\r\nvar get_payment_mode_account \u003d function(frm, mode_of_payment, callback) {\r\n\tif(!frm.doc.company) {\r\n\t\tfrappe.throw(__(\"Please select the Company first\"));\r\n\t}\r\n\r\n\tif(!mode_of_payment) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn  frappe.call({\r\n\t\tmethod: \"erpnext.accounts.doctype.sales_invoice.sales_invoice.get_bank_cash_account\",\r\n\t\targs: {\r\n\t\t\t\"mode_of_payment\": mode_of_payment,\r\n\t\t\t\"company\": frm.doc.company\r\n\t\t},\r\n\t\tcallback: function(r, rt) {\r\n\t\t\tif(r.message) {\r\n\t\t\t\tcallback(r.message.account)\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\ncur_frm.cscript.account_head \u003d function(doc, cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\tif(!d.charge_type \u0026\u0026 d.account_head){\r\n\t\tfrappe.msgprint(\"Please select Charge Type first\");\r\n\t\tfrappe.model.set_value(cdt, cdn, \"account_head\", \"\");\r\n\t} else if(d.account_head \u0026\u0026 d.charge_type!\u003d\u003d\"Actual\") {\r\n\t\tfrappe.call({\r\n\t\t\ttype:\"GET\",\r\n\t\t\tmethod: \"erpnext.controllers.accounts_controller.get_tax_rate\",\r\n\t\t\targs: {\"account_head\":d.account_head},\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"rate\", r.message.tax_rate || 0);\r\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"description\", r.message.account_name);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\ncur_frm.cscript.validate_taxes_and_charges \u003d function(cdt, cdn) {\r\n\tvar d \u003d locals[cdt][cdn];\r\n\tvar msg \u003d \"\";\r\n\r\n\tif(d.account_head \u0026\u0026 !d.description) {\r\n\t\t// set description from account head\r\n\t\td.description \u003d d.account_head.split(\u0027 - \u0027).slice(0, -1).join(\u0027 - \u0027);\r\n\t}\r\n\r\n\tif(!d.charge_type \u0026\u0026 (d.row_id || d.rate || d.tax_amount)) {\r\n\t\tmsg \u003d __(\"Please select Charge Type first\");\r\n\t\td.row_id \u003d \"\";\r\n\t\td.rate \u003d d.tax_amount \u003d 0.0;\r\n\t} else if((d.charge_type \u003d\u003d \u0027Actual\u0027 || d.charge_type \u003d\u003d \u0027On Net Total\u0027) \u0026\u0026 d.row_id) {\r\n\t\tmsg \u003d __(\"Can refer row only if the charge type is \u0027On Previous Row Amount\u0027 or \u0027Previous Row Total\u0027\");\r\n\t\td.row_id \u003d \"\";\r\n\t} else if((d.charge_type \u003d\u003d \u0027On Previous Row Amount\u0027 || d.charge_type \u003d\u003d \u0027On Previous Row Total\u0027) \u0026\u0026 d.row_id) {\r\n\t\tif (d.idx \u003d\u003d 1) {\r\n\t\t\tmsg \u003d __(\"Cannot select charge type as \u0027On Previous Row Amount\u0027 or \u0027On Previous Row Total\u0027 for first row\");\r\n\t\t\td.charge_type \u003d \u0027\u0027;\r\n\t\t} else if (!d.row_id) {\r\n\t\t\tmsg \u003d __(\"Please specify a valid Row ID for row {0} in table {1}\", [d.idx, __(d.doctype)]);\r\n\t\t\td.row_id \u003d \"\";\r\n\t\t} else if(d.row_id \u0026\u0026 d.row_id \u003e\u003d d.idx) {\r\n\t\t\tmsg \u003d __(\"Cannot refer row number greater than or equal to current row number for this Charge type\");\r\n\t\t\td.row_id \u003d \"\";\r\n\t\t}\r\n\t}\r\n\tif(msg) {\r\n\t\tfrappe.validated \u003d false;\r\n\t\trefresh_field(\"taxes\");\r\n\t\tfrappe.throw(msg);\r\n\t}\r\n\r\n}\r\n\r\ncur_frm.cscript.validate_inclusive_tax \u003d function(tax) {\r\n\tvar actual_type_error \u003d function() {\r\n\t\tvar msg \u003d __(\"Actual type tax cannot be included in Item rate in row {0}\", [tax.idx])\r\n\t\tfrappe.throw(msg);\r\n\t};\r\n\r\n\tvar on_previous_row_error \u003d function(row_range) {\r\n\t\tvar msg \u003d __(\"For row {0} in {1}. To include {2} in Item rate, rows {3} must also be included\",\r\n\t\t\t[tax.idx, __(tax.doctype), tax.charge_type, row_range])\r\n\t\tfrappe.throw(msg);\r\n\t};\r\n\r\n\tif(cint(tax.included_in_print_rate)) {\r\n\t\tif(tax.charge_type \u003d\u003d \"Actual\") {\r\n\t\t\t// inclusive tax cannot be of type Actual\r\n\t\t\tactual_type_error();\r\n\t\t} else if(tax.charge_type \u003d\u003d \"On Previous Row Amount\" \u0026\u0026\r\n\t\t\t!cint(this.frm.doc[\"taxes\"][tax.row_id - 1].included_in_print_rate)\r\n\t\t) {\r\n\t\t\t// referred row should also be an inclusive tax\r\n\t\t\ton_previous_row_error(tax.row_id);\r\n\t\t} else if(tax.charge_type \u003d\u003d \"On Previous Row Total\") {\r\n\t\t\tvar taxes_not_included \u003d $.map(this.frm.doc[\"taxes\"].slice(0, tax.row_id),\r\n\t\t\t\tfunction(t) { return cint(t.included_in_print_rate) ? null : t; });\r\n\t\t\tif(taxes_not_included.length \u003e 0) {\r\n\t\t\t\t// all rows above this tax should be inclusive\r\n\t\t\t\ton_previous_row_error(tax.row_id \u003d\u003d 1 ? \"1\" : \"1 - \" + tax.row_id);\r\n\t\t\t}\r\n\t\t} else if(tax.category \u003d\u003d \"Valuation\") {\r\n\t\t\tfrappe.throw(__(\"Valuation type charges can not marked as Inclusive\"));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif(!erpnext.taxes.flags[cur_frm.cscript.tax_table]) {\r\n\terpnext.taxes.flags[cur_frm.cscript.tax_table] \u003d true;\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"row_id\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"rate\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"tax_amount\", function(frm, cdt, cdn) {\r\n\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"charge_type\", function(frm, cdt, cdn) {\r\n\t\tfrm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t\tvar open_form \u003d frm.open_grid_row();\r\n\t\tif(open_form) {\r\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(open_form);\r\n\t\t} else {\r\n\t\t\t// apply in current row\r\n\t\t\terpnext.taxes.set_conditional_mandatory_rate_or_amount(frm.get_field(\u0027taxes\u0027).grid.get_row(cdn));\r\n\t\t}\r\n\t});\r\n\r\n\tfrappe.ui.form.on(cur_frm.cscript.tax_table, \"included_in_print_rate\", function(frm, cdt, cdn) {\r\n\t\tvar tax \u003d frappe.get_doc(cdt, cdn);\r\n\t\ttry {\r\n\t\t\tcur_frm.cscript.validate_taxes_and_charges(cdt, cdn);\r\n\t\t\tcur_frm.cscript.validate_inclusive_tax(tax);\r\n\t\t} catch(e) {\r\n\t\t\ttax.included_in_print_rate \u003d 0;\r\n\t\t\trefresh_field(\"included_in_print_rate\", tax.name, tax.parentfield);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nerpnext.taxes.set_conditional_mandatory_rate_or_amount \u003d function(grid_row) {\r\n\tif(grid_row) {\r\n\t\tif(grid_row.doc.charge_type\u003d\u003d\u003d\"Actual\") {\r\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", true);\r\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", true);\r\n\t\t\tgrid_row.toggle_editable(\"rate\", false);\r\n\t\t\tgrid_row.toggle_reqd(\"rate\", false);\r\n\t\t} else {\r\n\t\t\tgrid_row.toggle_editable(\"rate\", true);\r\n\t\t\tgrid_row.toggle_reqd(\"rate\", true);\r\n\t\t\tgrid_row.toggle_editable(\"tax_amount\", false);\r\n\t\t\tgrid_row.toggle_reqd(\"tax_amount\", false);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// For customizing print\r\ncur_frm.pformat.total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.discount_amount \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.grand_total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.rounded_total \u003d function(doc) { return \u0027\u0027; }\r\ncur_frm.pformat.in_words \u003d function(doc) { return \u0027\u0027; }\r\n\r\ncur_frm.pformat.taxes\u003d function(doc){\r\n\t//function to make row of table\r\n\tvar make_row \u003d function(title, val, bold, is_negative) {\r\n\t\tvar bstart \u003d \u0027\u003cb\u003e\u0027; var bend \u003d \u0027\u003c/b\u003e\u0027;\r\n\t\treturn \u0027\u003ctr\u003e\u003ctd style\u003d\"width:50%;\"\u003e\u0027 + (bold?bstart:\u0027\u0027) + title + (bold?bend:\u0027\u0027) + \u0027\u003c/td\u003e\u0027\r\n\t\t\t+ \u0027\u003ctd style\u003d\"width:50%;text-align:right;\"\u003e\u0027 + (is_negative ? \u0027- \u0027 : \u0027\u0027)\r\n\t\t+ format_currency(val, doc.currency) + \u0027\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t}\r\n\r\n\tfunction print_hide(fieldname) {\r\n\t\tvar doc_field \u003d frappe.meta.get_docfield(doc.doctype, fieldname, doc.name);\r\n\t\treturn doc_field.print_hide;\r\n\t}\r\n\r\n\tout \u003d\u0027\u0027;\r\n\tif (!doc.print_without_amount) {\r\n\t\tvar cl \u003d doc.taxes || [];\r\n\r\n\t\t// outer table\r\n\t\tvar out\u003d\u0027\u003cdiv\u003e\u003ctable class\u003d\"noborder\" style\u003d\"width:100%\"\u003e\u003ctr\u003e\u003ctd style\u003d\"width: 60%\"\u003e\u003c/td\u003e\u003ctd\u003e\u0027;\r\n\r\n\t\t// main table\r\n\r\n\t\tout +\u003d\u0027\u003ctable class\u003d\"noborder\" style\u003d\"width:100%\"\u003e\u0027;\r\n\r\n\t\tif(!print_hide(\u0027total\u0027)) {\r\n\t\t\tout +\u003d make_row(\u0027Total\u0027, doc.total, 1);\r\n\t\t}\r\n\r\n\t\t// Discount Amount on net total\r\n\t\tif(!print_hide(\u0027discount_amount\u0027) \u0026\u0026 doc.apply_discount_on \u003d\u003d \"Net Total\" \u0026\u0026 doc.discount_amount)\r\n\t\t\tout +\u003d make_row(\u0027Discount Amount\u0027, doc.discount_amount, 0, 1);\r\n\r\n\t\t// add rows\r\n\t\tif(cl.length){\r\n\t\t\tfor(var i\u003d0;i\u003ccl.length;i++) {\r\n\t\t\t\tif(cl[i].tax_amount!\u003d0 \u0026\u0026 !cl[i].included_in_print_rate)\r\n\t\t\t\t\tout +\u003d make_row(cl[i].description, cl[i].tax_amount, 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Discount Amount on grand total\r\n\t\tif(!print_hide(\u0027discount_amount\u0027) \u0026\u0026 doc.apply_discount_on \u003d\u003d \"Grand Total\" \u0026\u0026 doc.discount_amount)\r\n\t\t\tout +\u003d make_row(\u0027Discount Amount\u0027, doc.discount_amount, 0, 1);\r\n\r\n\t\t// grand total\r\n\t\tif(!print_hide(\u0027grand_total\u0027))\r\n\t\t\tout +\u003d make_row(\u0027Grand Total\u0027, doc.grand_total, 1);\r\n\r\n\t\tif(!print_hide(\u0027rounded_total\u0027))\r\n\t\t\tout +\u003d make_row(\u0027Rounded Total\u0027, doc.rounded_total, 1);\r\n\r\n\t\tif(doc.in_words \u0026\u0026 !print_hide(\u0027in_words\u0027)) {\r\n\t\t\tout +\u003d\u0027\u003c/table\u003e\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctr\u003e\u003ctd colspan \u003d \"2\"\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctable\u003e\u003ctr\u003e\u003ctd style\u003d\"width:25%;\"\u003e\u003cb\u003eIn Words\u003c/b\u003e\u003c/td\u003e\u0027;\r\n\t\t\tout +\u003d \u0027\u003ctd style\u003d\"width:50%;\"\u003e\u0027 + doc.in_words + \u0027\u003c/td\u003e\u003c/tr\u003e\u0027;\r\n\t\t}\r\n\t\tout +\u003d \u0027\u003c/table\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/div\u003e\u0027;\r\n\t}\r\n\treturn out;\r\n}\r\n/* Adding /erpnext/public/js/controllers/accounts.js --- Done. */\n\n\r\n\r\n"},{"allow_copy":0,"allow_import":0,"allow_rename":0,"autoname":"INVTD.######","beta":0,"creation":"2013-04-24 11:39:32","custom":0,"docstatus":0,"doctype":"DocType","document_type":"Setup","editable_grid":1,"fields":[{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"charge_type","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"label":"Type","length":0,"no_copy":0,"oldfieldname":"charge_type","oldfieldtype":"Select","options":"\nActual\nOn Net Total\nOn Previous Row Amount\nOn Previous Row Total","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5inppok4gq","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"eval:[\"On Previous Row Amount\", \"On Previous Row Total\"].indexOf(doc.charge_type)!\u003d\u003d-1","fieldname":"row_id","fieldtype":"Data","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Reference Row #","length":0,"no_copy":0,"oldfieldname":"row_id","oldfieldtype":"Data","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"rmvdi4hva","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"account_head","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"label":"Account Head","length":0,"no_copy":0,"oldfieldname":"account_head","oldfieldtype":"Link","options":"Account","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":1,"search_index":1,"set_only_once":0,"unique":0,"doctype":"DocField","name":"53e3ihovb0","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"default":":Company","fieldname":"cost_center","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Cost Center","length":0,"no_copy":0,"oldfieldname":"cost_center_other_charges","oldfieldtype":"Link","options":"Cost Center","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3qhfv6g5lk","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"col_break_1","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"length":0,"no_copy":0,"permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"50%","doctype":"DocField","name":"4l64iphra4","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"description","fieldtype":"Text Editor","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Description","length":0,"no_copy":0,"oldfieldname":"description","oldfieldtype":"Small Text","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"print_width":"300px","read_only":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"width":"300px","doctype":"DocField","name":"5qcc070jh8","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"If checked, the tax amount will be considered as already included in the Print Rate / Print Amount","fieldname":"included_in_print_rate","fieldtype":"Check","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Is this Tax included in Basic Rate?","length":0,"no_copy":0,"permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"print_width":"150px","read_only":0,"report_hide":1,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"width":"150px","doctype":"DocField","name":"5sgi19jlv6","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_8","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1b7sdofute","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"rate","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"label":"Rate","length":0,"no_copy":0,"oldfieldname":"rate","oldfieldtype":"Currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7a8arfs7un","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_9","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"31b82prqio","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"tax_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"label":"Amount","length":0,"no_copy":0,"options":"currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6v3tlrhce2","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":2,"fieldname":"total","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":1,"label":"Total","length":0,"no_copy":0,"options":"currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1mchtk1ifr","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"tax_amount_after_discount_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Tax Amount After Discount Amount","length":0,"no_copy":0,"options":"currency","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3iduumkcv7","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_13","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1a5e2devk6","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"base_tax_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Amount (Company Currency)","length":0,"no_copy":0,"oldfieldname":"tax_amount","oldfieldtype":"Currency","options":"Company:company:default_currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"damrcv64h","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"base_total","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Total (Company Currency)","length":0,"no_copy":0,"oldfieldname":"total","oldfieldtype":"Currency","options":"Company:company:default_currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3m0o76trfq","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"eval:parent.discount_amount","fieldname":"base_tax_amount_after_discount_amount","fieldtype":"Currency","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Tax Amount After Discount Amount (Company Currency)","length":0,"no_copy":0,"options":"Company:company:default_currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"624u17426k","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"item_wise_tax_detail","fieldtype":"Code","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_list_view":0,"label":"Item Wise Tax Detail","length":0,"no_copy":0,"oldfieldname":"item_wise_tax_detail","oldfieldtype":"Small Text","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"uusmhe2nh","docstatus":0,"idx":17,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"parenttype","fieldtype":"Data","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":1,"in_list_view":0,"label":"Parenttype","length":0,"no_copy":0,"oldfieldname":"parenttype","oldfieldtype":"Data","permlevel":0,"print_hide":1,"print_hide_if_no_value":0,"read_only":0,"report_hide":0,"reqd":0,"search_index":1,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2mo6pg965n","docstatus":0,"idx":18,"parenttype":"DocType","parentfield":"fields","parent":"Sales Taxes and Charges","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"hide_heading":1,"hide_toolbar":0,"idx":1.0,"image_view":0,"in_create":0,"in_dialog":0.0,"is_submittable":0,"issingle":0,"istable":1,"max_attachments":0,"modified":"2016-08-26 03:08:03.235381","modified_by":"Administrator","module":"Accounts","name":"Sales Taxes and Charges","owner":"Administrator","permissions":[],"quick_entry":0,"read_only":0,"read_only_onload":0,"sort_order":"ASC","track_seen":0}],"user_settings":"{}"}