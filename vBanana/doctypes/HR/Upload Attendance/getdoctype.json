{"docs":[{"allow_copy":1.0,"allow_import":0.0,"allow_rename":0.0,"creation":"2013-01-25 11:34:53","custom":0.0,"docstatus":0.0,"doctype":"DocType","fields":[{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"description":"Download the Template, fill appropriate data and attach the modified file.\nAll dates and employee combination in the selected period will come in the template, with existing attendance records","fieldname":"download_template","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Download Template","no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"3v0te05o5d","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"att_fr_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Attendance From Date","no_copy":0.0,"oldfieldname":"attenadnce_date","oldfieldtype":"Date","permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"p0ln1o0du","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"att_to_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Attendance To Date","no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"6p14n4hprc","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"get_template","fieldtype":"Button","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Get Template","no_copy":0.0,"oldfieldtype":"Button","permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"6niuih27dv","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"upload_attendance_data","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Import Attendance","no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"52p118fkhd","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"upload_html","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Upload HTML","no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"rlv32b6pl","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"import_log","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Import Log","no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1j0kjl2oum","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"hide_heading":0.0,"hide_toolbar":1.0,"icon":"fa fa-upload-alt","idx":1.0,"in_create":0.0,"in_dialog":0.0,"is_submittable":0.0,"issingle":1.0,"istable":0.0,"max_attachments":1.0,"modified":"2015-06-05 11:37:04.348120","modified_by":"Administrator","module":"HR","name":"Upload Attendance","owner":"harshada@webnotestech.com","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":0.0,"read":1.0,"report":0.0,"role":"HR User","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"32nogvlv1t","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":0.0,"read":1.0,"report":0.0,"role":"HR Manager","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"243sacjkrb","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"permissions","parent":"Upload Attendance","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"read_only":0.0,"read_only_onload":0.0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\n\r\n\r\nfrappe.provide(\"erpnext.hr\");\r\n\r\nerpnext.hr.AttendanceControlPanel \u003d frappe.ui.form.Controller.extend({\r\n\tonload: function() {\r\n\t\tthis.frm.set_value(\"att_fr_date\", frappe.datetime.get_today());\r\n\t\tthis.frm.set_value(\"att_to_date\", frappe.datetime.get_today());\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tthis.frm.disable_save();\r\n\t\tthis.show_upload();\r\n\t},\r\n\r\n\tget_template:function() {\r\n\t\tif(!this.frm.doc.att_fr_date || !this.frm.doc.att_to_date) {\r\n\t\t\tfrappe.msgprint(__(\"Attendance From Date and Attendance To Date is mandatory\"));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twindow.location.href \u003d repl(frappe.request.url +\r\n\t\t\t\u0027?cmd\u003d%(cmd)s\u0026from_date\u003d%(from_date)s\u0026to_date\u003d%(to_date)s\u0027, {\r\n\t\t\t\tcmd: \"erpnext.hr.doctype.upload_attendance.upload_attendance.get_template\",\r\n\t\t\t\tfrom_date: this.frm.doc.att_fr_date,\r\n\t\t\t\tto_date: this.frm.doc.att_to_date,\r\n\t\t\t});\r\n\t},\r\n\r\n\tshow_upload: function() {\r\n\t\tvar me \u003d this;\r\n\t\tvar $wrapper \u003d $(cur_frm.fields_dict.upload_html.wrapper).empty();\r\n\r\n\t\t// upload\r\n\t\tfrappe.upload.make({\r\n\t\t\tparent: $wrapper,\r\n\t\t\targs: {\r\n\t\t\t\tmethod: \u0027erpnext.hr.doctype.upload_attendance.upload_attendance.upload\u0027\r\n\t\t\t},\r\n\t\t\tno_socketio: true,\r\n\t\t\tsample_url: \"e.g. http://example.com/somefile.csv\",\r\n\t\t\tcallback: function(attachment, r) {\r\n\t\t\t\tvar $log_wrapper \u003d $(cur_frm.fields_dict.import_log.wrapper).empty();\r\n\r\n\t\t\t\tif(!r.messages) r.messages \u003d [];\r\n\t\t\t\t// replace links if error has occured\r\n\t\t\t\tif(r.exc || r.error) {\r\n\t\t\t\t\tr.messages \u003d $.map(r.message.messages, function(v) {\r\n\t\t\t\t\t\tvar msg \u003d v.replace(\"Inserted\", \"Valid\")\r\n\t\t\t\t\t\t\t.replace(\"Updated\", \"Valid\").split(\"\u003c\");\r\n\t\t\t\t\t\tif (msg.length \u003e 1) {\r\n\t\t\t\t\t\t\tv \u003d msg[0] + (msg[1].split(\"\u003e\").slice(-1)[0]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv \u003d msg[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tr.messages \u003d [\"\u003ch4 style\u003d\u0027color:red\u0027\u003e\"+__(\"Import Failed!\")+\"\u003c/h4\u003e\"]\r\n\t\t\t\t\t\t.concat(r.messages)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tr.messages \u003d [\"\u003ch4 style\u003d\u0027color:green\u0027\u003e\"+__(\"Import Successful!\")+\"\u003c/h4\u003e\"].\r\n\t\t\t\t\t\tconcat(r.message.messages)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.each(r.messages, function(i, v) {\r\n\t\t\t\t\tvar $p \u003d $(\u0027\u003cp\u003e\u0027).html(v).appendTo($log_wrapper);\r\n\t\t\t\t\tif(v.substr(0,5)\u003d\u003d\u0027Error\u0027) {\r\n\t\t\t\t\t\t$p.css(\u0027color\u0027, \u0027red\u0027);\r\n\t\t\t\t\t} else if(v.substr(0,8)\u003d\u003d\u0027Inserted\u0027) {\r\n\t\t\t\t\t\t$p.css(\u0027color\u0027, \u0027green\u0027);\r\n\t\t\t\t\t} else if(v.substr(0,7)\u003d\u003d\u0027Updated\u0027) {\r\n\t\t\t\t\t\t$p.css(\u0027color\u0027, \u0027green\u0027);\r\n\t\t\t\t\t} else if(v.substr(0,5)\u003d\u003d\u0027Valid\u0027) {\r\n\t\t\t\t\t\t$p.css(\u0027color\u0027, \u0027#777\u0027);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// rename button\r\n\t\t$wrapper.find(\u0027form input[type\u003d\"submit\"]\u0027)\r\n\t\t\t.attr(\u0027value\u0027, \u0027Upload and Import\u0027)\r\n\t}\r\n})\r\n\r\ncur_frm.cscript \u003d new erpnext.hr.AttendanceControlPanel({frm: cur_frm});\r\n"}],"user_settings":"{}"}