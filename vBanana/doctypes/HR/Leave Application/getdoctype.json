{"docs":[{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":0.0,"allow_rename":0.0,"autoname":"LAP/.#####","beta":0.0,"creation":"2013-02-20 11:18:11","custom":0.0,"description":"Apply / Approve Leaves","docstatus":0.0,"doctype":"DocType","document_type":"Document","editable_grid":0.0,"fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"naming_series","fieldtype":"Select","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Series","length":0.0,"no_copy":1.0,"options":"LAP/","permlevel":0.0,"precision":"","print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":1.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"Open","fieldname":"status","fieldtype":"Select","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Status","length":0.0,"no_copy":1.0,"options":"Open\nApproved\nRejected","permlevel":1.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_12","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"leave_type","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":1.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Leave Type","length":0.0,"no_copy":0.0,"options":"Leave Type","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"leave_balance","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Leave Balance Before Application","length":0.0,"no_copy":1.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"section_break_5","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"from_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":1.0,"label":"From Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"to_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"To Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"half_day","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Half Day","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:doc.half_day \u0026\u0026 (doc.from_date !\u003d doc.to_date)","fieldname":"half_day_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Half Day Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"total_leave_days","fieldtype":"Float","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Total Leave Days","length":0.0,"no_copy":1.0,"permlevel":0.0,"precision":"1","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break1","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"print_width":"50%","read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"width":"50%"},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"description","fieldtype":"Small Text","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Reason","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"section_break_7","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"employee","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Employee","length":0.0,"no_copy":0.0,"options":"Employee","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"employee_name","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Employee Name","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_15","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"description":"","fieldname":"leave_approver","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":1.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Leave Approver","length":0.0,"no_copy":0.0,"options":"User","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"leave_approver_name","fieldtype":"Read Only","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Leave Approver Name","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"sb10","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"Today","fieldname":"posting_date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Posting Date","length":0.0,"no_copy":1.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":1.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"1","fieldname":"follow_via_email","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Follow via Email","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_17","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"company","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Company","length":0.0,"no_copy":0.0,"options":"Company","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":1.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":1.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"letter_head","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":1.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Letter Head","length":0.0,"no_copy":0.0,"options":"Letter Head","permlevel":0.0,"print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"amended_from","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":1.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Amended From","length":0.0,"no_copy":1.0,"options":"Leave Application","permlevel":0.0,"print_hide":1.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"has_web_view":0.0,"hide_heading":0.0,"hide_toolbar":0.0,"icon":"fa fa-calendar","idx":1.0,"image_view":0.0,"in_create":0.0,"is_submittable":1.0,"issingle":0.0,"istable":0.0,"max_attachments":3.0,"modified":"2017-06-13 14:28:52.426044","modified_by":"Administrator","module":"HR","name":"Leave Application","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":0.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Employee","set_user_permissions":0.0,"share":1.0,"submit":0.0,"user_permission_doctypes":"[\"Company\",\"Employee\",\"Fiscal Year\",\"Leave Application\"]","write":1.0},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"HR Manager","set_user_permissions":1.0,"share":1.0,"submit":1.0,"write":1.0},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":0.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":1.0,"print":0.0,"read":1.0,"report":0.0,"role":"All","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":0.0},{"amend":1.0,"apply_user_permissions":0.0,"cancel":1.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"HR User","set_user_permissions":1.0,"share":1.0,"submit":1.0,"user_permission_doctypes":"[\"Company\"]","write":1.0},{"amend":1.0,"apply_user_permissions":0.0,"cancel":0.0,"create":0.0,"delete":0.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Leave Approver","set_user_permissions":0.0,"share":1.0,"submit":1.0,"user_permission_doctypes":"[\"Company\",\"User\"]","write":1.0},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":0.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":1.0,"print":0.0,"read":1.0,"report":1.0,"role":"HR User","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":1.0},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":0.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":1.0,"print":0.0,"read":1.0,"report":1.0,"role":"Leave Approver","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":1.0}],"quick_entry":0.0,"read_only":0.0,"read_only_onload":0.0,"search_fields":"employee,employee_name,leave_type,from_date,to_date,total_leave_days","show_name_in_global_search":0.0,"sort_field":"modified","sort_order":"DESC","timeline_field":"employee","title_field":"employee_name","track_changes":0.0,"track_seen":0.0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\ncur_frm.add_fetch(\u0027employee\u0027,\u0027employee_name\u0027,\u0027employee_name\u0027);\r\ncur_frm.add_fetch(\u0027employee\u0027,\u0027company\u0027,\u0027company\u0027);\r\n\r\nfrappe.ui.form.on(\"Leave Application\", {\r\n\tonload: function(frm) {\r\n\t\tif (!frm.doc.posting_date) {\r\n\t\t\tfrm.set_value(\"posting_date\", frappe.datetime.get_today());\r\n\t\t}\r\n\r\n\t\tfrm.set_query(\"leave_approver\", function() {\r\n\t\t\treturn {\r\n\t\t\t\tquery: \"erpnext.hr.doctype.leave_application.leave_application.get_approvers\",\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\temployee: frm.doc.employee\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tfrm.set_query(\"employee\", erpnext.queries.employee);\r\n\r\n\t},\r\n\r\n\tvalidate: function(frm) {\r\n\t\tfrm.toggle_reqd(\"half_day_date\", frm.doc.half_day \u003d\u003d 1);\r\n\t},\r\n\r\n\trefresh: function(frm) {\r\n\t\tif (frm.is_new()) {\r\n\t\t\tfrm.set_value(\"status\", \"Open\");\r\n\t\t\tfrm.trigger(\"calculate_total_days\");\r\n\t\t}\r\n\t},\r\n\r\n\tleave_approver: function(frm) {\r\n\t\tif(frm.doc.leave_approver){\r\n\t\t\tfrm.set_value(\"leave_approver_name\", frappe.user.full_name(frm.doc.leave_approver));\r\n\t\t}\r\n\t},\r\n\r\n\temployee: function(frm) {\r\n\t\tfrm.trigger(\"get_leave_balance\");\r\n\t},\r\n\r\n\tleave_type: function(frm) {\r\n\t\tfrm.trigger(\"get_leave_balance\");\r\n\t},\r\n\r\n\thalf_day: function(frm) {\r\n\t\tif (frm.doc.from_date \u003d\u003d frm.doc.to_date) {\r\n\t\t\tfrm.set_value(\"half_day_date\", frm.doc.from_date);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfrm.trigger(\"half_day_datepicker\");\r\n\t\t}\r\n\t\tfrm.trigger(\"calculate_total_days\");\r\n\t},\r\n\r\n\tfrom_date: function(frm) {\r\n\t\tfrm.trigger(\"half_day_datepicker\");\r\n\t\tfrm.trigger(\"calculate_total_days\");\r\n\t},\r\n\r\n\tto_date: function(frm) {\r\n\t\tfrm.trigger(\"half_day_datepicker\");\r\n\t\tfrm.trigger(\"calculate_total_days\");\r\n\t},\r\n\r\n\thalf_day_date(frm) {\r\n\t\tfrm.trigger(\"calculate_total_days\");\r\n\t},\r\n\r\n\thalf_day_datepicker: function(frm) {\r\n\t\tfrm.set_value(\u0027half_day_date\u0027, \u0027\u0027);\r\n\t\tvar half_day_datepicker \u003d frm.fields_dict.half_day_date.datepicker;\r\n\t\thalf_day_datepicker.update({\r\n\t\t\tminDate: frappe.datetime.str_to_obj(frm.doc.from_date),\r\n\t\t\tmaxDate: frappe.datetime.str_to_obj(frm.doc.to_date)\r\n\t\t})\r\n\t},\r\n\r\n\tget_leave_balance: function(frm) {\r\n\t\tif(frm.doc.docstatus\u003d\u003d0 \u0026\u0026 frm.doc.employee \u0026\u0026 frm.doc.leave_type \u0026\u0026 frm.doc.from_date) {\r\n\t\t\treturn frappe.call({\r\n\t\t\t\tmethod: \"erpnext.hr.doctype.leave_application.leave_application.get_leave_balance_on\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\temployee: frm.doc.employee,\r\n\t\t\t\t\tdate: frm.doc.from_date,\r\n\t\t\t\t\tleave_type: frm.doc.leave_type,\r\n\t\t\t\t\tconsider_all_leaves_in_the_allocation_period: true\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif (!r.exc \u0026\u0026 r.message) {\r\n\t\t\t\t\t\tfrm.set_value(\u0027leave_balance\u0027, r.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tcalculate_total_days: function(frm) {\r\n\t\tif(frm.doc.from_date \u0026\u0026 frm.doc.to_date \u0026\u0026 frm.doc.employee \u0026\u0026 frm.doc.leave_type) {\r\n\t\t\t\t// server call is done to include holidays in leave days calculations\r\n\t\t\treturn frappe.call({\r\n\t\t\t\tmethod: \u0027erpnext.hr.doctype.leave_application.leave_application.get_number_of_leave_days\u0027,\r\n\t\t\t\targs: {\r\n\t\t\t\t\t\"employee\": frm.doc.employee,\r\n\t\t\t\t\t\"leave_type\": frm.doc.leave_type,\r\n\t\t\t\t\t\"from_date\": frm.doc.from_date,\r\n\t\t\t\t\t\"to_date\": frm.doc.to_date,\r\n\t\t\t\t\t\"half_day\": frm.doc.half_day,\r\n\t\t\t\t\t\"half_day_date\": frm.doc.half_day_date,\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif (r \u0026\u0026 r.message) {\r\n\t\t\t\t\t\tfrm.set_value(\u0027total_leave_days\u0027, r.message);\r\n\t\t\t\t\t\tfrm.trigger(\"get_leave_balance\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n});\r\n","__list_js":"frappe.listview_settings[\u0027Leave Application\u0027] \u003d {\r\n\tadd_fields: [\"status\", \"leave_type\", \"employee\", \"employee_name\", \"total_leave_days\", \"from_date\", \"to_date\"],\r\n\tfilters:[[\"status\",\"!\u003d\", \"Rejected\"]],\r\n\tget_indicator: function(doc) {\r\n\t\treturn [__(doc.status), frappe.utils.guess_colour(doc.status),\r\n\t\t\t\"status,\u003d,\" + doc.status];\r\n\t}\r\n};\r\n","__calendar_js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.views.calendar[\"Leave Application\"] \u003d {\r\n\tfield_map: {\r\n\t\t\"start\": \"from_date\",\r\n\t\t\"end\": \"to_date\",\r\n\t\t\"id\": \"name\",\r\n\t\t\"title\": \"title\",\r\n\t\t\"status\": \"status\",\r\n\t},\r\n\toptions: {\r\n\t\theader: {\r\n\t\t\tleft: \u0027prev,next today\u0027,\r\n\t\t\tcenter: \u0027title\u0027,\r\n\t\t\tright: \u0027month\u0027\r\n\t\t}\r\n\t},\r\n\tget_events_method: \"erpnext.hr.doctype.leave_application.leave_application.get_events\"\r\n}"}],"user_settings":"{}"}