{"docs":[{"allow_copy":1.0,"allow_import":0.0,"allow_rename":0.0,"creation":"2016-01-27 14:59:47.849379","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"","fields":[{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"default":"Today","fieldname":"date","fieldtype":"Date","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Date","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"11eon3relj","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"department","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Department","length":0.0,"no_copy":0.0,"options":"Department","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"6vg9pfmokl","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"column_break_3","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"5t7k4k271l","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"branch","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Branch","length":0.0,"no_copy":0.0,"options":"Branch","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"7sjepelrp0","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"company","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Company","length":0.0,"no_copy":0.0,"options":"Company","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"77s56tib32","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"depends_on":"date","fieldname":"unmarked_attendance_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Unmarked Attendance","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"cqgjfbn51","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"employees_html","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Employees HTML","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"8chnq6a4b","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"depends_on":"date","fieldname":"marked_attendance_section","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Marked Attendance","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1s7bbivq81","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"fieldname":"marked_attendance_html","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"in_filter":0.0,"in_list_view":0.0,"label":"Marked Attendance HTML","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1hdct9m4b1","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"hide_heading":1.0,"hide_toolbar":1.0,"idx":0.0,"in_create":0.0,"in_dialog":0.0,"is_submittable":0.0,"issingle":1.0,"istable":0.0,"max_attachments":0.0,"modified":"2016-01-29 02:14:36.034952","modified_by":"Administrator","module":"HR","name":"Employee Attendance Tool","name_case":"","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":0.0,"email":0.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":0.0,"read":1.0,"report":0.0,"role":"HR Manager","set_user_permissions":0.0,"share":0.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"7rf7k1n798","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Employee Attendance Tool","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"read_only":0.0,"read_only_onload":0.0,"sort_field":"modified","sort_order":"DESC","__js":"frappe.ui.form.on(\"Employee Attendance Tool\", {\r\n\trefresh: function(frm) {\r\n\t\tfrm.disable_save();\r\n\t},\r\n\t\r\n\tonload: function(frm) {\r\n\t\tfrm.doc.department \u003d frm.doc.branch \u003d frm.doc.company \u003d \"All\";\r\n\t\tfrm.set_value(\"date\", frappe.datetime.get_today());\r\n\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\t},\r\n\r\n\tdate: function(frm) {\r\n\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\t},\r\n\r\n\tdepartment: function(frm) {\r\n\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\t},\r\n\r\n\tbranch: function(frm) {\r\n\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\t},\r\n\r\n\tcompany: function(frm) {\r\n\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\t}\r\n\t\r\n});\r\n\r\n\r\nerpnext.employee_attendance_tool \u003d {\r\n\tload_employees: function(frm) {\r\n\t\tif(frm.doc.date) {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.get_employees\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\tdate: frm.doc.date,\r\n\t\t\t\t\tdepartment: frm.doc.department,\r\n\t\t\t\t\tbranch: frm.doc.branch,\r\n\t\t\t\t\tcompany: frm.doc.company\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\tif(r.message[\u0027unmarked\u0027].length \u003e 0) {\r\n\t\t\t\t\t\tunhide_field(\u0027unmarked_attendance_section\u0027)\r\n\t\t\t\t\t\tif(!frm.employee_area) {\r\n\t\t\t\t\t\t\tfrm.employee_area \u003d $(\u0027\u003cdiv\u003e\u0027)\r\n\t\t\t\t\t\t\t.appendTo(frm.fields_dict.employees_html.wrapper);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfrm.EmployeeSelector \u003d new erpnext.EmployeeSelector(frm, frm.employee_area, r.message[\u0027unmarked\u0027])\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\thide_field(\u0027unmarked_attendance_section\u0027)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(r.message[\u0027marked\u0027].length \u003e 0) {\r\n\t\t\t\t\t\tunhide_field(\u0027marked_attendance_section\u0027)\r\n\t\t\t\t\t\tif(!frm.marked_employee_area) {\r\n\t\t\t\t\t\t\tfrm.marked_employee_area \u003d $(\u0027\u003cdiv\u003e\u0027)\r\n\t\t\t\t\t\t\t\t.appendTo(frm.fields_dict.marked_attendance_html.wrapper);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfrm.marked_employee \u003d new erpnext.MarkedEmployee(frm, frm.marked_employee_area, r.message[\u0027marked\u0027])\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\thide_field(\u0027marked_attendance_section\u0027)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nerpnext.MarkedEmployee \u003d Class.extend({\r\n\tinit: function(frm, wrapper, employee) {\r\n\t\tthis.wrapper \u003d wrapper;\r\n\t\tthis.frm \u003d frm;\r\n\t\tthis.make(frm, employee);\r\n\t},\r\n\tmake: function(frm, employee) {\r\n\t\tvar me \u003d this;\r\n\t\t$(this.wrapper).empty();\r\n\r\n\t\tvar row;\r\n\t\t$.each(employee, function(i, m) {\r\n\t\t\tvar attendance_icon \u003d \"fa fa-check\";\r\n\t\t\tvar color_class \u003d \"\";\r\n\t\t\tif(m.status \u003d\u003d \"Absent\") {\r\n\t\t\t\tattendance_icon \u003d \"fa fa-check-empty\"\r\n\t\t\t\tcolor_class \u003d \"text-muted\";\r\n\t\t\t}\r\n\t\t\telse if(m.status \u003d\u003d \"Half Day\") {\r\n\t\t\t\tattendance_icon \u003d \"fa fa-check-minus\"\r\n\t\t\t}\r\n\r\n\t\t\tif (i\u003d\u003d\u003d0 || i % 4\u003d\u003d\u003d0) {\r\n\t\t\t\trow \u003d $(\u0027\u003cdiv class\u003d\"row\"\u003e\u003c/div\u003e\u0027).appendTo(me.wrapper);\r\n\t\t\t}\r\n\r\n\t\t\t$(repl(\u0027\u003cdiv class\u003d\"col-sm-3 %(color_class)s\"\u003e\\\r\n\t\t\t\t\u003clabel class\u003d\"marked-employee-label\"\u003e\u003cspan class\u003d\"%(icon)s\"\u003e\u003c/span\u003e\\\r\n\t\t\t\t%(employee)s\u003c/label\u003e\\\r\n\t\t\t\t\u003c/div\u003e\u0027, {\r\n\t\t\t\t\temployee: m.employee_name,\r\n\t\t\t\t\ticon: attendance_icon,\r\n\t\t\t\t\tcolor_class: color_class\r\n\t\t\t\t})).appendTo(row);\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\nerpnext.EmployeeSelector \u003d Class.extend({\r\n\tinit: function(frm, wrapper, employee) {\r\n\t\tthis.wrapper \u003d wrapper;\r\n\t\tthis.frm \u003d frm;\r\n\t\tthis.make(frm, employee);\r\n\t},\r\n\tmake: function(frm, employee) {\r\n\t\tvar me \u003d this;\r\n\r\n\t\t$(this.wrapper).empty();\r\n\t\tvar employee_toolbar \u003d $(\u0027\u003cdiv class\u003d\"col-sm-12 top-toolbar\"\u003e\\\r\n\t\t\t\u003cbutton class\u003d\"btn btn-default btn-add btn-xs\"\u003e\u003c/button\u003e\\\r\n\t\t\t\u003cbutton class\u003d\"btn btn-xs btn-default btn-remove\"\u003e\u003c/button\u003e\\\r\n\t\t\t\u003c/div\u003e\u0027).appendTo($(this.wrapper));\r\n\r\n\t\tvar mark_employee_toolbar \u003d $(\u0027\u003cdiv class\u003d\"col-sm-12 bottom-toolbar\"\u003e\\\r\n\t\t\t\u003cbutton class\u003d\"btn btn-primary btn-mark-present btn-xs\"\u003e\u003c/button\u003e\\\r\n\t\t\t\u003cbutton class\u003d\"btn btn-default btn-mark-absent btn-xs\"\u003e\u003c/button\u003e\\\r\n\t\t\t\u003cbutton class\u003d\"btn btn-default btn-mark-half-day btn-xs\"\u003e\u003c/button\u003e\u003c/div\u003e\u0027)\r\n\r\n\t\temployee_toolbar.find(\".btn-add\")\r\n\t\t\t.html(__(\u0027Check all\u0027))\r\n\t\t\t.on(\"click\", function() {\r\n\t\t\t\t$(me.wrapper).find(\u0027input[type\u003d\"checkbox\"]\u0027).each(function(i, check) {\r\n\t\t\t\t\tif(!$(check).is(\":checked\")) {\r\n\t\t\t\t\t\tcheck.checked \u003d true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\temployee_toolbar.find(\".btn-remove\")\r\n\t\t\t.html(__(\u0027Uncheck all\u0027))\r\n\t\t\t.on(\"click\", function() {\r\n\t\t\t\t$(me.wrapper).find(\u0027input[type\u003d\"checkbox\"]\u0027).each(function(i, check) {\r\n\t\t\t\t\tif($(check).is(\":checked\")) {\r\n\t\t\t\t\t\tcheck.checked \u003d false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tmark_employee_toolbar.find(\".btn-mark-present\")\r\n\t\t\t.html(__(\u0027Mark Present\u0027))\r\n\t\t\t.on(\"click\", function() {\r\n\t\t\t\tvar employee_present \u003d [];\r\n\t\t\t\t$(me.wrapper).find(\u0027input[type\u003d\"checkbox\"]\u0027).each(function(i, check) {\r\n\t\t\t\t\tif($(check).is(\":checked\")) {\r\n\t\t\t\t\t\temployee_present.push(employee[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\r\n\t\t\t\t\targs:{\r\n\t\t\t\t\t\t\"employee_list\":employee_present,\r\n\t\t\t\t\t\t\"status\":\"Present\",\r\n\t\t\t\t\t\t\"date\":frm.doc.date,\r\n\t\t\t\t\t\t\"company\":frm.doc.company\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tmark_employee_toolbar.find(\".btn-mark-absent\")\r\n\t\t\t.html(__(\u0027Mark Absent\u0027))\r\n\t\t\t.on(\"click\", function() {\r\n\t\t\t\tvar employee_absent \u003d [];\r\n\t\t\t\t$(me.wrapper).find(\u0027input[type\u003d\"checkbox\"]\u0027).each(function(i, check) {\r\n\t\t\t\t\tif($(check).is(\":checked\")) {\r\n\t\t\t\t\t\temployee_absent.push(employee[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\r\n\t\t\t\t\targs:{\r\n\t\t\t\t\t\t\"employee_list\":employee_absent,\r\n\t\t\t\t\t\t\"status\":\"Absent\",\r\n\t\t\t\t\t\t\"date\":frm.doc.date,\r\n\t\t\t\t\t\t\"company\":frm.doc.company\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\tmark_employee_toolbar.find(\".btn-mark-half-day\")\r\n\t\t\t.html(__(\u0027Mark Half Day\u0027))\r\n\t\t\t.on(\"click\", function() {\r\n\t\t\t\tvar employee_half_day \u003d [];\r\n\t\t\t\t$(me.wrapper).find(\u0027input[type\u003d\"checkbox\"]\u0027).each(function(i, check) {\r\n\t\t\t\t\tif($(check).is(\":checked\")) {\r\n\t\t\t\t\t\temployee_half_day.push(employee[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod: \"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_employee_attendance\",\r\n\t\t\t\t\targs:{\r\n\t\t\t\t\t\t\"employee_list\":employee_half_day,\r\n\t\t\t\t\t\t\"status\":\"Half Day\",\r\n\t\t\t\t\t\t\"date\":frm.doc.date,\r\n\t\t\t\t\t\t\"company\":frm.doc.company\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\terpnext.employee_attendance_tool.load_employees(frm);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\tvar row;\r\n\t\t$.each(employee, function(i, m) {\r\n\t\t\tif (i\u003d\u003d\u003d0 || (i % 4) \u003d\u003d\u003d 0) {\r\n\t\t\t\trow \u003d $(\u0027\u003cdiv class\u003d\"row\"\u003e\u003c/div\u003e\u0027).appendTo(me.wrapper);\r\n\t\t\t}\r\n\r\n\t\t\t$(repl(\u0027\u003cdiv class\u003d\"col-sm-3 unmarked-employee-checkbox\"\u003e\\\r\n\t\t\t\t\u003cdiv class\u003d\"checkbox\"\u003e\\\r\n\t\t\t\t\u003clabel\u003e\u003cinput type\u003d\"checkbox\" class\u003d\"employee-check\" employee\u003d\"%(employee)s\"/\u003e\\\r\n\t\t\t\t%(employee)s\u003c/label\u003e\\\r\n\t\t\t\t\u003c/div\u003e\u003c/div\u003e\u0027, {employee: m.employee_name})).appendTo(row);\r\n\t\t});\r\n\r\n\t\tmark_employee_toolbar.appendTo($(this.wrapper));\r\n\t}\r\n});\r\n\r\n\r\n","_css":".top-toolbar{\r\n\tpadding-bottom: 30px;\r\n\tmargin-left: -17px;\r\n}\r\n\r\n.bottom-toolbar{\r\n\tmargin-left: -17px;\r\n\tmargin-top: 20px;\r\n}\r\n\r\n.btn{\r\n\tmargin-right: 5px;\r\n}\r\n\r\n.marked-employee-label{\r\n\tfont-weight: normal;\r\n}\r\n\r\n.checkbox{\r\n\tmargin-top: -3px;\r\n}"}],"user_settings":"{}"}