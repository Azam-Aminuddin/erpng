{"docs":[{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":0.0,"allow_rename":1.0,"autoname":"","beta":0.0,"creation":"2013-01-10 16:34:31","custom":0.0,"description":"Create and Send Newsletters","docstatus":0.0,"doctype":"DocType","document_type":"Other","editable_grid":0.0,"engine":"InnoDB","fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"receipient","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Receipient","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"email_group","fieldtype":"Table","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Email Group","length":0.0,"no_copy":0.0,"options":"Newsletter Email Group","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"description":"","fieldname":"send_from","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":1.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Sender","length":0.0,"no_copy":1.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"email_sent","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Email Sent?","length":0.0,"no_copy":1.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"newsletter_content","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"subject","fieldtype":"Small Text","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Subject","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"message","fieldtype":"Text Editor","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Message","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"1","fieldname":"send_unsubscribe_link","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Send Unsubscribe Link","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"0","fieldname":"send_attachements","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Send Attachements","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"0","description":"","fieldname":"published","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Published","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"route","fieldtype":"Data","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Route","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"description":"","fieldname":"test_the_newsletter","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"description":"A Lead with this Email Address should exist","fieldname":"test_email_id","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Test Email Address","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"test_send","fieldtype":"Button","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Test","length":0.0,"no_copy":0.0,"options":"test_send","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"scheduled_to_send","fieldtype":"Int","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Scheduled To Send","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"has_web_view":1.0,"hide_heading":0.0,"hide_toolbar":0.0,"icon":"fa fa-envelope","idx":1.0,"image_view":0.0,"in_create":0.0,"is_published_field":"published","is_submittable":0.0,"issingle":0.0,"istable":0.0,"max_attachments":3.0,"menu_index":0.0,"modified":"2017-09-14 15:38:01.891251","modified_by":"Administrator","module":"Email","name":"Newsletter","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Newsletter Manager","set_user_permissions":1.0,"share":1.0,"submit":0.0,"write":1.0}],"quick_entry":0.0,"read_only":0.0,"read_only_onload":0.0,"route":"newsletters","show_name_in_global_search":0.0,"sort_order":"ASC","title_field":"subject","track_changes":1.0,"track_seen":0.0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n/* globals erpnext */\r\n\r\ncur_frm.cscript.refresh \u003d function(doc) {\r\n\tif(window.erpnext) erpnext.toggle_naming_series();\r\n\tif(!doc.__islocal \u0026\u0026 !cint(doc.email_sent) \u0026\u0026 !doc.__unsaved\r\n\t\t\t\u0026\u0026 in_list(frappe.boot.user.can_write, doc.doctype)) {\r\n\t\tcur_frm.add_custom_button(__(\u0027Send\u0027), function() {\r\n\t\t\treturn $c_obj(doc, \u0027send_emails\u0027, \u0027\u0027, function(r) {\r\n\t\t\t\tcur_frm.refresh();\r\n\t\t\t});\r\n\t\t}, \"fa fa-play\", \"btn-success\");\r\n\t}\r\n\r\n\tcur_frm.cscript.setup_dashboard();\r\n\r\n\tif(doc.__islocal \u0026\u0026 !doc.send_from) {\r\n\t\tcur_frm.set_value(\"send_from\",\r\n\t\t\trepl(\"%(fullname)s \u003c%(email)s\u003e\", frappe.user_info(doc.owner)));\r\n\t}\r\n}\r\n\r\ncur_frm.cscript.setup_dashboard \u003d function() {\r\n\tif(!cur_frm.doc.__islocal \u0026\u0026 cint(cur_frm.doc.email_sent)\r\n\t\t\u0026\u0026 cur_frm.doc.__onload \u0026\u0026 cur_frm.doc.__onload.status_count) {\r\n\t\tvar stat \u003d cur_frm.doc.__onload.status_count;\r\n\t\tvar total \u003d cur_frm.doc.scheduled_to_send;\r\n\t\tif(total) {\r\n\t\t\t$.each(stat, function(k, v) {\r\n\t\t\t\tstat[k] \u003d flt(v * 100 / total, 2) + \u0027%\u0027;\r\n\t\t\t});\r\n\r\n\t\t\tcur_frm.dashboard.add_progress(\"Status\", [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: stat[\"Not Sent\"] + \" Queued\",\r\n\t\t\t\t\twidth: stat[\"Not Sent\"],\r\n\t\t\t\t\tprogress_class: \"progress-bar-info\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: stat[\"Sent\"] + \" Sent\",\r\n\t\t\t\t\twidth: stat[\"Sent\"],\r\n\t\t\t\t\tprogress_class: \"progress-bar-success\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: stat[\"Sending\"] + \" Sending\",\r\n\t\t\t\t\twidth: stat[\"Sending\"],\r\n\t\t\t\t\tprogress_class: \"progress-bar-warning\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: stat[\"Error\"] + \"% Error\",\r\n\t\t\t\t\twidth: stat[\"Error\"],\r\n\t\t\t\t\tprogress_class: \"progress-bar-danger\"\r\n\t\t\t\t}\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n}","__list_js":"frappe.listview_settings[\u0027Newsletter\u0027] \u003d {\r\n\tadd_fields: [\"subject\", \"email_sent\"],\r\n\tget_indicator: function(doc) {\r\n\t\tif(doc.email_sent) {\r\n\t\t\treturn [__(\"Sent\"), \"green\", \"email_sent,\u003d,Yes\"];\r\n\t\t} else {\r\n\t\t\treturn [__(\"Not Sent\"), \"orange\", \"email_sent,\u003d,No\"];\r\n\t\t}\r\n\t}\r\n};\r\n"},{"allow_copy":0.0,"allow_import":0.0,"allow_rename":0.0,"beta":0.0,"creation":"2017-02-26 16:20:52.654136","custom":0.0,"docstatus":0.0,"doctype":"DocType","document_type":"","editable_grid":1.0,"engine":"InnoDB","fields":[{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"email_group","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Email Group","length":0.0,"no_copy":0.0,"options":"Email Group","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"total_subscribers","fieldtype":"Read Only","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"Total Subscribers","length":0.0,"no_copy":0.0,"options":"email_group.total_subscribers","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"hide_heading":0.0,"hide_toolbar":0.0,"idx":0.0,"image_view":0.0,"in_create":0.0,"in_dialog":0.0,"is_submittable":0.0,"issingle":0.0,"istable":1.0,"max_attachments":0.0,"modified":"2017-02-26 16:23:57.351167","modified_by":"Administrator","module":"Email","name":"Newsletter Email Group","name_case":"","owner":"Administrator","permissions":[],"quick_entry":1.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":0.0,"sort_field":"modified","sort_order":"DESC","track_changes":1.0,"track_seen":0.0}],"user_settings":"{}"}