{"docs":[{"allow_copy":0.0,"allow_guest_to_view":0.0,"allow_import":1.0,"allow_rename":0.0,"autoname":"CustomScript.####","beta":0.0,"creation":"2013-01-10 16:34:01","custom":0.0,"description":"Adds a custom script (client or server) to a DocType","docstatus":0.0,"doctype":"DocType","document_type":"Document","editable_grid":0.0,"engine":"InnoDB","fields":[{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"dt","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":1.0,"label":"DocType","length":0.0,"no_copy":0.0,"oldfieldname":"dt","oldfieldtype":"Link","options":"DocType","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":1.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"default":"Client","fieldname":"script_type","fieldtype":"Select","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":1.0,"label":"Script Type","length":0.0,"no_copy":0.0,"oldfieldname":"script_type","oldfieldtype":"Select","options":"Client","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"script","fieldtype":"Code","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Script","length":0.0,"no_copy":0.0,"oldfieldname":"script","oldfieldtype":"Code","options":"Script","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0},{"allow_bulk_edit":0.0,"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"sample","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Sample","length":0.0,"no_copy":0.0,"options":"\u003ch3\u003eCustom Script Help\u003c/h3\u003e\n\u003cp\u003eCustom Scripts are executed only on the client-side (i.e. in Forms). Here are some examples to get you started\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n\n// fetch local_tax_no on selection of customer\n// cur_frm.add_fetch(link_field, source_fieldname, target_fieldname);\ncur_frm.add_fetch(\"customer\", \"local_tax_no\", \"local_tax_no\");\n\n// additional validation on dates\nfrappe.ui.form.on(\"Task\", \"validate\", function(frm) {\n    if (frm.doc.from_date \u0026lt; get_today()) {\n        msgprint(\"You can not select past date in From Date\");\n        validated \u003d false;\n    }\n});\n\n// make a field read-only after saving\nfrappe.ui.form.on(\"Task\", {\n    refresh: function(frm) {\n        // use the __islocal value of doc, to check if the doc is saved or not\n        frm.set_df_property(\"myfield\", \"read_only\", frm.doc.__islocal ? 0 : 1);\n    }\n});\n\n// additional permission check\nfrappe.ui.form.on(\"Task\", {\n    validate: function(frm) {\n        if(user\u003d\u003d\"user1@example.com\" \u0026amp;\u0026amp; frm.doc.purpose!\u003d\"Material Receipt\") {\n            msgprint(\"You are only allowed Material Receipt\");\n            validated \u003d false;\n        }\n    }\n});\n\n// calculate sales incentive\nfrappe.ui.form.on(\"Sales Invoice\", {\n    validate: function(frm) {\n        // calculate incentives for each person on the deal\n        total_incentive \u003d 0\n        $.each(frm.doc.sales_team), function(i, d) {\n\n            // calculate incentive\n            var incentive_percent \u003d 2;\n            if(frm.doc.base_grand_total \u0026gt; 400) incentive_percent \u003d 4;\n\n            // actual incentive\n            d.incentives \u003d flt(frm.doc.base_grand_total) * incentive_percent / 100;\n            total_incentive +\u003d flt(d.incentives)\n        });\n\n        frm.doc.total_incentive \u003d total_incentive;\n    }\n})\n\n\u003c/code\u003e\n\u003c/pre\u003e","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0}],"has_web_view":0.0,"hide_heading":0.0,"hide_toolbar":0.0,"icon":"fa fa-glass","idx":1.0,"image_view":0.0,"in_create":0.0,"is_submittable":0.0,"issingle":0.0,"istable":0.0,"max_attachments":0.0,"modified":"2017-08-17 07:43:08.093341","modified_by":"Administrator","module":"Custom","name":"Custom Script","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"System Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"Administrator","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0}],"quick_entry":0.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":0.0,"sort_order":"ASC","track_changes":1.0,"track_seen":0.0,"__js":"// Copyright (c) 2016, Frappe Technologies and contributors\r\n// For license information, please see license.txt\r\n\r\nfrappe.ui.form.on(\u0027Custom Script\u0027, {\r\n\trefresh: function(frm) {\r\n\r\n\t}\r\n});\r\n"}],"user_settings":"{}"}