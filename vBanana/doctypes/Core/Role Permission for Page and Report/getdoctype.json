{"docs":[{"allow_copy":1,"allow_guest_to_view":0,"allow_import":0,"allow_rename":0,"beta":0,"creation":"2017-02-13 17:33:25.157332","custom":0,"docstatus":0,"doctype":"DocType","document_type":"","editable_grid":1,"engine":"InnoDB","fields":[{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"set_role_for","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Set Role For","length":0,"no_copy":0,"options":"\nPage\nReport","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"riffgpb6s","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"eval:doc.set_role_for \u003d\u003d \u0027Page\u0027","fieldname":"page","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Page","length":0,"no_copy":0,"options":"Page","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"47g6670n0q","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"eval:doc.set_role_for \u003d\u003d \u0027Report\u0027","fieldname":"report","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Report","length":0,"no_copy":0,"options":"Report","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1uhs17uci2","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"roles_permission","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Allow Roles","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"52l2im98ah","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"depends_on":"","fieldname":"roles_html","fieldtype":"HTML","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Roles Html","length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1u3cqd2n9l","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"roles","fieldtype":"Table","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Roles","length":0,"no_copy":0,"options":"Has Role","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6p73pk8356","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"has_web_view":0,"hide_heading":0,"hide_toolbar":1,"idx":0.0,"image_view":0,"in_create":0,"is_submittable":0,"issingle":1,"istable":0,"max_attachments":0,"modified":"2017-03-11 02:35:32.369043","modified_by":"Administrator","module":"Core","name":"Role Permission for Page and Report","name_case":"","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":0.0,"role":"System Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"25m4lnmcdi","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Role Permission for Page and Report","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"quick_entry":1,"read_only":0,"read_only_onload":0,"show_name_in_global_search":0,"sort_field":"modified","sort_order":"DESC","track_changes":0,"track_seen":0,"__js":"// Copyright (c) 2016, Frappe Technologies and contributors\r\n// For license information, please see license.txt\r\n\r\nfrappe.ui.form.on(\u0027Role Permission for Page and Report\u0027, {\r\n\tsetup: function(frm) {\r\n\t\tfrm.trigger(\"set_queries\")\r\n\t},\r\n\r\n\trefresh: function(frm) {\r\n\t\tfrm.disable_save();\r\n\t\tfrm.role_area.hide();\r\n\t\tfrm.add_custom_button(__(\"Reset to defaults\"),\r\n\t\t\tfunction(){ frm.trigger(\"reset_roles\") });\r\n\t\tfrm.add_custom_button(__(\"Update\"),\r\n\t\t\tfunction(){ frm.trigger(\"update_roles\") }).addClass(\u0027btn-primary\u0027);\r\n\t},\r\n\t\r\n\tonload: function(frm) {\r\n\t\tif(!frm.roles_editor) {\r\n\t\t\tfrm.role_area \u003d $(\u0027\u003cdiv style\u003d\"min-height: 300px\"\u003e\u0027)\r\n\t\t\t\t.appendTo(frm.fields_dict.roles_html.wrapper);\r\n\t\t\tfrm.roles_editor \u003d new frappe.RoleEditor(frm.role_area, frm);\r\n\t\t}\r\n\t},\r\n\r\n\tset_queries: function(frm) {\r\n\t\tfrm.set_query(\"page\", function() {\r\n\t\t\treturn {\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\tsystem_page: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tset_role_for: function(frm) {\r\n\t\tfrm.trigger(\"clear_fields\")\r\n\t\tfrm.toggle_display(\u0027roles_html\u0027, false)\r\n\t},\r\n\r\n\tclear_fields: function(frm) {\r\n\t\tvar field \u003d (frm.doc.set_role_for \u003d\u003d \u0027Report\u0027) ? \u0027page\u0027 : \u0027report\u0027;\r\n\t\tfrm.set_value(field, \u0027\u0027);\r\n\t},\r\n\r\n\tpage: function(frm) {\r\n\t\tif(frm.doc.page) {\r\n\t\t\tfrm.trigger(\"get_roles\")\r\n\t\t}\r\n\t},\r\n\r\n\treport: function(frm){\r\n\t\tif(frm.doc.report) {\r\n\t\t\tfrm.trigger(\"get_roles\")\r\n\t\t}\r\n\t},\r\n\r\n\tget_roles: function(frm) {\r\n\t\tfrm.toggle_display(\u0027roles_html\u0027, true)\r\n\t\tfrm.role_area.show();\r\n\r\n\t\treturn frm.call({\r\n\t\t\tmethod:\"get_custom_roles\",\r\n\t\t\tdoc: frm.doc,\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\trefresh_field(\u0027roles\u0027)\r\n\t\t\t\tfrm.roles_editor.show()\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tupdate_roles: function(frm) {\r\n\t\tfrm.trigger(\"validate_mandatory_fields\")\r\n\t\tif(frm.roles_editor) {\r\n\t\t\tfrm.roles_editor.set_roles_in_table()\r\n\t\t}\r\n\r\n\t\treturn frm.call({\r\n\t\t\tmethod:\"set_custom_roles\",\r\n\t\t\tdoc: frm.doc,\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\trefresh_field(\u0027roles\u0027)\r\n\t\t\t\tfrm.roles_editor.show()\r\n\t\t\t\tfrappe.msgprint(__(\"Successfully Updated\"))\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\treset_roles: function(frm) {\r\n\t\tfrm.trigger(\"validate_mandatory_fields\")\r\n\t\treturn frm.call({\r\n\t\t\tmethod:\"reset_roles\",\r\n\t\t\tdoc: frm.doc,\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\trefresh_field(\u0027roles\u0027)\r\n\t\t\t\tfrm.roles_editor.show()\r\n\t\t\t\tfrappe.msgprint(__(\"Successfully Updated\"))\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\tvalidate_mandatory_fields: function(frm) {\r\n\t\tif(!frm.doc.set_role_for){\r\n\t\t\tfrappe.throw(__(\"Mandatory field: set role for\"))\r\n\t\t}\r\n\t\t\r\n\t\tif(frm.doc.set_role_for \u0026\u0026 !frm.doc[frm.doc.set_role_for.toLocaleLowerCase()]) {\r\n\t\t\tfrappe.throw(__(\"Mandatory field: {0}\", [frm.doc.set_role_for]))\r\n\t\t}\r\n\t}\r\n});\r\n"},{"allow_copy":0,"allow_import":0,"allow_rename":0,"autoname":"hash","beta":0,"creation":"2013-02-22 01:27:34","custom":0,"docstatus":0,"doctype":"DocType","editable_grid":1,"fields":[{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"role","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_list_view":1,"in_standard_filter":0,"label":"Role","length":0,"no_copy":0,"oldfieldname":"role","oldfieldtype":"Link","options":"Role","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2lvpf2n9b0","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Has Role","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"hide_heading":0,"hide_toolbar":0,"idx":1.0,"image_view":0,"in_create":0,"in_dialog":0.0,"is_submittable":0,"issingle":0,"istable":1,"max_attachments":0,"modified":"2017-02-13 14:00:08.116312","modified_by":"Administrator","module":"Core","name":"Has Role","owner":"Administrator","permissions":[],"quick_entry":0,"read_only":0,"read_only_onload":0,"track_changes":0,"track_seen":0}],"user_settings":"{}"}