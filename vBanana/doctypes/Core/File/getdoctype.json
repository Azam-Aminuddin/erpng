{"docs":[{"allow_copy":0.0,"allow_import":1.0,"allow_rename":0.0,"autoname":"","beta":0.0,"creation":"2012-12-12 11:19:22","custom":0.0,"docstatus":0.0,"doctype":"DocType","editable_grid":0.0,"fields":[{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"file_name","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":1.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"File Name","length":0.0,"no_copy":0.0,"oldfieldname":"file_name","oldfieldtype":"Data","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"6kpjepi3af","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:!doc.is_folder","fieldname":"is_private","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Is Private","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"6g2t910f79","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"preview","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Preview","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"2420vb8mca","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"preview_html","fieldtype":"HTML","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Preview HTML","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"3aq7n14le3","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"section_break_5","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1uhhcnftm0","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"","fieldname":"is_home_folder","fieldtype":"Check","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Is Home Folder","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"17ma6q4qnb","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"is_attachments_folder","fieldtype":"Check","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Is Attachments Folder","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"5u3gua1vi8","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"file_size","fieldtype":"Int","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":1.0,"in_standard_filter":0.0,"label":"File Size","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"52ouj79gh1","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_5","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"2631a5lt8g","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:!doc.is_folder","fieldname":"file_url","fieldtype":"Code","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"File URL","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"69n568alhl","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"thumbnail_url","fieldtype":"Small Text","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Thumbnail URL","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"45t1jaii97","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"folder","fieldtype":"Link","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Folder","length":0.0,"no_copy":0.0,"options":"File","permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1n19ltbs0o","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"is_folder","fieldtype":"Check","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Is Folder","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"4kmnhc406u","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"depends_on":"eval:!doc.is_folder","fieldname":"section_break_8","fieldtype":"Section Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"66c4qjssr3","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"attached_to_doctype","fieldtype":"Link","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":1.0,"label":"Attached To DocType","length":0.0,"no_copy":0.0,"options":"DocType","permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"65044nibb8","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"column_break_10","fieldtype":"Column Break","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"12hmsj817c","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"attached_to_name","fieldtype":"Data","hidden":0.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Attached To Name","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":1.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"46kmgc4aia","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"content_hash","fieldtype":"Data","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"Content Hash","length":0.0,"no_copy":0.0,"permlevel":0.0,"print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":1.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1dgaoatk5b","docstatus":0,"idx":17,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"lft","fieldtype":"Int","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"lft","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"1lc47b7akv","docstatus":0,"idx":18,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"rgt","fieldtype":"Int","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"rgt","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"35v92v5si2","docstatus":0,"idx":19,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"allow_on_submit":0.0,"bold":0.0,"collapsible":0.0,"columns":0.0,"fieldname":"old_parent","fieldtype":"Data","hidden":1.0,"ignore_user_permissions":0.0,"ignore_xss_filter":0.0,"in_filter":0.0,"in_global_search":0.0,"in_list_view":0.0,"in_standard_filter":0.0,"label":"old_parent","length":0.0,"no_copy":0.0,"permlevel":0.0,"precision":"","print_hide":0.0,"print_hide_if_no_value":0.0,"read_only":0.0,"remember_last_selected_value":0.0,"report_hide":0.0,"reqd":0.0,"search_index":0.0,"set_only_once":0.0,"unique":0.0,"doctype":"DocField","name":"3col772f7r","docstatus":0,"idx":20,"parenttype":"DocType","parentfield":"fields","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"hide_heading":0.0,"hide_toolbar":0.0,"icon":"fa fa-file","idx":1.0,"image_view":0.0,"in_create":0.0,"in_dialog":0.0,"is_submittable":0.0,"issingle":0.0,"istable":0.0,"max_attachments":0.0,"menu_index":0.0,"modified":"2017-02-17 16:42:36.092962","modified_by":"Administrator","module":"Core","name":"File","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":0.0,"import":1.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"System Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"27bn0uapdq","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"},{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":1.0,"if_owner":1.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"All","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"5r92dtnuvp","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"permissions","parent":"File","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-25 23:36:28.617","modified":"2017-10-25 23:36:28.617"}],"quick_entry":0.0,"read_only":0.0,"read_only_onload":0.0,"show_name_in_global_search":0.0,"sort_order":"ASC","title_field":"file_name","track_changes":1.0,"track_seen":0.0,"__js":"frappe.ui.form.on(\"File\", \"refresh\", function(frm) {\r\n\tif(!frm.doc.is_folder) {\r\n\t\tfrm.add_custom_button(__(\u0027Download\u0027), function() {\r\n\t\t\tvar file_url \u003d frm.doc.file_url;\r\n\t\t\tif (frm.doc.file_name) {\r\n\t\t\t\tfile_url \u003d file_url.replace(/#/g, \u0027%23\u0027);\r\n\t\t\t}\r\n\t\t\twindow.open(file_url);\r\n\t\t}, \"fa fa-download\");\r\n\t}\r\n\r\n\tvar wrapper \u003d frm.get_field(\"preview_html\").$wrapper;\r\n\tvar is_viewable \u003d frappe.utils.is_image_file(frm.doc.file_url);\r\n\r\n\tfrm.toggle_display(\"preview\", is_viewable);\r\n\tfrm.toggle_display(\"preview_html\", is_viewable);\r\n\r\n\tif(is_viewable){\r\n\t\twrapper.html(\u0027\u003cdiv class\u003d\"img_preview\"\u003e\\\r\n\t\t\t\u003cimg class\u003d\"img-responsive\" src\u003d\"\u0027+frm.doc.file_url+\u0027\"\u003e\u003c/img\u003e\\\r\n\t\t\t\u003c/div\u003e\u0027);\r\n\t} else {\r\n\t\twrapper.empty();\r\n\t}\r\n\r\n\tif(frm.doc.file_name \u0026\u0026 frm.doc.file_name.split(\u0027.\u0027).splice(-1)[0]\u003d\u003d\u003d\u0027zip\u0027) {\r\n\t\tfrm.add_custom_button(__(\u0027Unzip\u0027), function() {\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod: \"frappe.core.doctype.file.file.unzip_file\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\tname: frm.doc.name,\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function() {\r\n\t\t\t\t\tfrappe.set_route(\u0027List\u0027, \u0027File\u0027);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n});\r\n","__list_js":"frappe.provide(\"frappe.ui\");\r\n\r\nfrappe.listview_settings[\u0027File\u0027] \u003d {\r\n\thide_name_column: true,\r\n\tuse_route: true,\r\n\tadd_fields: [\"is_folder\", \"file_name\", \"file_url\", \"folder\", \"is_private\"],\r\n\tformatters: {\r\n\t\tfile_size: function(value) {\r\n\t\t\t// formatter for file size\r\n\t\t\tif(value \u003e 1048576) {\r\n\t\t\t\tvalue \u003d flt(flt(value) / 1048576, 1) + \"M\";\r\n\t\t\t} else if (value \u003e 1024) {\r\n\t\t\t\tvalue \u003d flt(flt(value) / 1024, 1) + \"K\";\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tprepare_data: function(data) {\r\n\t\t// set image icons\r\n\t\tvar icon \u003d \"\";\r\n\r\n\t\tif(data.is_folder) {\r\n\t\t\ticon +\u003d \u0027\u003ci class\u003d\"fa fa-folder-close-alt fa-fw\"\u003e\u003c/i\u003e \u0027;\r\n\t\t} else if(frappe.utils.is_image_file(data.file_name)) {\r\n\t\t\ticon +\u003d \u0027\u003ci class\u003d\"fa fa-picture fa-fw\"\u003e\u003c/i\u003e \u0027;\r\n\t\t} else {\r\n\t\t\ticon +\u003d \u0027\u003ci class\u003d\"fa fa-file-alt fa-fw\"\u003e\u003c/i\u003e \u0027;\r\n\t\t}\r\n\r\n\t\tdata._title \u003d icon + (data.file_name ? data.file_name : data.file_url);\r\n\r\n\t\tif (data.is_private) {\r\n\t\t\tdata._title +\u003d \u0027 \u003ci class\u003d\"fa fa-lock fa-fw text-warning\"\u003e\u003c/i\u003e\u0027;\r\n\t\t}\r\n\t},\r\n\tonload: function(doclist) {\r\n\t\tdoclist.filter_area \u003d doclist.wrapper.find(\".show_filters\");\r\n\r\n\t\tdoclist.breadcrumb \u003d $(\u0027\u003col class\u003d\"breadcrumb for-file-list\"\u003e\u003c/ol\u003e\u0027)\r\n\t\t\t.insertBefore(doclist.filter_area);\r\n\t\tdoclist.list_renderer.settings.setup_menu(doclist);\r\n\t\tdoclist.list_renderer.settings.setup_dragdrop(doclist);\r\n\r\n\t\tdoclist.$page.on(\"click\", \".list-row-checkbox\", function(event) {\r\n\t\t\tdoclist.list_renderer.settings.add_menu_item_copy(doclist);\r\n\t\t});\r\n\t},\r\n\tlist_view_doc:function(doclist){\r\n\t\t$(doclist.wrapper).on(\"click\", \u0027button[list_view_doc\u003d\"\u0027+doclist.doctype+\u0027\"]\u0027, function() {\r\n\t\t\tfrappe.ui.get_upload_dialog({\r\n\t\t\t\t\"args\": {\r\n\t\t\t\t\t\"folder\": doclist.current_folder,\r\n\t\t\t\t\t\"from_form\": 1\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function() {\r\n\t\t\t\t\tdoclist.refresh();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tsetup_menu: function(doclist) {\r\n\t\tdoclist.page.add_menu_item(__(\"New Folder\"), function() {\r\n\t\t\tvar d \u003d frappe.prompt(__(\"Name\"), function(values) {\r\n\t\t\t\tif((values.value.indexOf(\"/\") \u003e -1)){\r\n\t\t\t\t\tfrappe.throw(__(\"Folder name should not include \u0027/\u0027 (slash)\"));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar data \u003d  {\r\n\t\t\t\t\t\"file_name\": values.value,\r\n\t\t\t\t\t\"folder\": doclist.current_folder\r\n\t\t\t\t};\r\n\t\t\t\tfrappe.call({\r\n\t\t\t\t\tmethod: \"frappe.core.doctype.file.file.create_new_folder\",\r\n\t\t\t\t\targs: data,\r\n\t\t\t\t\tcallback: function(r) { }\r\n\t\t\t\t});\r\n\t\t\t}, __(\u0027Enter folder name\u0027), __(\"Create\"));\r\n\t\t});\r\n\r\n\t\tdoclist.page.add_menu_item(__(\"Edit Folder\"), function() {\r\n\t\t\tfrappe.set_route(\"Form\", \"File\", doclist.current_folder);\r\n\t\t});\r\n\r\n\t\tdoclist.page.add_menu_item(__(\"Import .zip\"), function() {\r\n\t\t\t// make upload dialog\r\n\t\t\tfrappe.ui.get_upload_dialog({\r\n\t\t\t\targs: {\r\n\t\t\t\t\tfolder: doclist.current_folder,\r\n\t\t\t\t\tfrom_form: 1\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(attachment, r) {\r\n\t\t\t\t\tfrappe.call({\r\n\t\t\t\t\t\tmethod: \"frappe.core.doctype.file.file.unzip_file\",\r\n\t\t\t\t\t\targs: {\r\n\t\t\t\t\t\t\tname: r.message[\"name\"],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcallback: function(r) {\r\n\t\t\t\t\t\t\tif(!r.exc) {\r\n\t\t\t\t\t\t\t\t//doclist.refresh();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfrappe.msgprint(__(\"Error in uploading files\" + r.exc));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tsetup_dragdrop: function(doclist) {\r\n\t\t$(doclist.$page).on(\u0027dragenter dragover\u0027, false)\r\n\t\t\t.on(\u0027drop\u0027, function (e) {\r\n\t\t\t\tvar dataTransfer \u003d e.originalEvent.dataTransfer;\r\n\t\t\t\tif (!(dataTransfer \u0026\u0026 dataTransfer.files \u0026\u0026 dataTransfer.files.length \u003e 0)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tfrappe.upload.multifile_upload(dataTransfer.files, {\r\n\t\t\t\t\t\"folder\": doclist.current_folder,\r\n\t\t\t\t\t\"from_form\": 1\r\n\t\t\t\t}, {\r\n\t\t\t\t\tconfirm_is_private: 1\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t},\r\n\tadd_menu_item_copy: function(doclist){\r\n\t\tif (!doclist.copy) {\r\n\t\t\tvar copy_menu \u003d doclist.page.add_menu_item(__(\"Copy\"), function() {\r\n\t\t\t\tif(doclist.$page.find(\".list-row-checkbox:checked\").length){\r\n\t\t\t\t\tdoclist.selected_files \u003d doclist.get_checked_items();\r\n\t\t\t\t\tdoclist.old_parent \u003d doclist.current_folder;\r\n\t\t\t\t\tdoclist.list_renderer.settings.add_menu_item_paste(doclist);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfrappe.throw(__(\"Please select file to copy\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdoclist.copy \u003d true;\r\n\t\t}\r\n\t},\r\n\tadd_menu_item_paste:function(doclist){\r\n\t\tvar paste_menu \u003d doclist.page.add_menu_item(__(\"Paste\"), function(){\r\n\t\t\tfrappe.call({\r\n\t\t\t\tmethod:\"frappe.core.doctype.file.file.move_file\",\r\n\t\t\t\targs: {\r\n\t\t\t\t\t\"file_list\": doclist.selected_files,\r\n\t\t\t\t\t\"new_parent\": doclist.current_folder,\r\n\t\t\t\t\t\"old_parent\": doclist.old_parent\r\n\t\t\t\t},\r\n\t\t\t\tcallback:function(r){\r\n\t\t\t\t\tdoclist.paste \u003d false;\r\n\t\t\t\t\tfrappe.msgprint(__(r.message));\r\n\t\t\t\t\tdoclist.selected_files \u003d [];\r\n\t\t\t\t\t$(paste_menu).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tbefore_run: function(doclist) {\r\n\t\tvar name_filter \u003d doclist.filter_list.get_filter(\"file_name\");\r\n\t\tif(name_filter) {\r\n\t\t\tdoclist.filter_area.removeClass(\"hide\");\r\n\t\t\tdoclist.breadcrumb.addClass(\"hide\");\r\n\t\t} else {\r\n\t\t\tdoclist.filter_area.addClass(\"hide\");\r\n\t\t\tdoclist.breadcrumb.removeClass(\"hide\");\r\n\t\t}\r\n\t},\r\n\trefresh: function(doclist) {\r\n\t\tvar name_filter \u003d doclist.filter_list.get_filter(\"file_name\");\r\n\r\n\t\tvar folder_filter \u003d doclist.filter_list.get_filter(\"folder\");\r\n\t\tif(folder_filter) {\r\n\t\t\tfolder_filter.remove(true);\r\n\t\t}\r\n\r\n\t\tif(name_filter) return;\r\n\r\n\t\tvar route \u003d frappe.get_route();\r\n\t\tif(route[2]) {\r\n\t\t\tdoclist.current_folder \u003d route.slice(2).join(\"/\");\r\n\t\t\tdoclist.current_folder_name \u003d route.slice(-1)[0];\r\n\t\t}\r\n\r\n\t\tif(!doclist.current_folder || doclist.current_folder\u003d\u003d\"List\") {\r\n\t\t\tdoclist.current_folder \u003d frappe.boot.home_folder;\r\n\t\t\tdoclist.current_folder_name \u003d __(\"Home\");\r\n\t\t}\r\n\r\n\t\tdoclist.filter_list.add_filter(\"File\", \"folder\", \"\u003d\", doclist.current_folder, true);\r\n\t\tdoclist.dirty \u003d true;\r\n\t\tdoclist.fresh \u003d false;\r\n\r\n\t\tdoclist.page.set_title(doclist.current_folder_name);\r\n\t\tfrappe.utils.set_title(doclist.current_folder_name);\r\n\t},\r\n\tset_primary_action:function(doclist){\r\n\t\tdoclist.page.clear_primary_action();\r\n\t\tdoclist.page.set_primary_action(__(\"New\"), function() {\r\n\t\t\tfrappe.ui.get_upload_dialog({\r\n\t\t\t\t\"args\": {\r\n\t\t\t\t\t\"folder\": doclist.current_folder,\r\n\t\t\t\t\t\"from_form\": 1\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function() {\r\n\t\t\t\t\tdoclist.refresh();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, \"octicon octicon-plus\");\r\n\t},\r\n\tpost_render_item: function(list, row, data) {\r\n\t\tif(data.is_folder) {\r\n\t\t\t$(row).find(\".list-id\").attr(\"href\", \"#List/File/\" + data.name);\r\n\t\t}\r\n\t},\r\n\tset_file_route: function(name) {\r\n\t\tfrappe.set_route([\"List\", \"File\"].concat(decodeURIComponent(name).split(\"/\")));\r\n\t},\r\n\tpost_render: function(doclist) {\r\n\t\tfrappe.call({\r\n\t\t\tmethod: \"frappe.core.doctype.file.file.get_breadcrumbs\",\r\n\t\t\targs: {\r\n\t\t\t\tfolder: doclist.current_folder\r\n\t\t\t},\r\n\t\t\tcallback: function(r) {\r\n\t\t\t\tdoclist.breadcrumb.empty();\r\n\t\t\t\tif(r.message \u0026\u0026 r.message.length) {\r\n\t\t\t\t\t$.each(r.message, function(i, folder) {\r\n\t\t\t\t\t\t$(\u0027\u003cli\u003e\u003ca href\u003d\"#List/File/\u0027+folder.name+\u0027\"\u003e\u0027\r\n\t\t\t\t\t\t\t+ folder.file_name+\u0027\u003c/a\u003e\u003c/li\u003e\u0027)\r\n\t\t\t\t\t\t\t.appendTo(doclist.breadcrumb);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t$(\u0027\u003cli class\u003d\"active\"\u003e\u0027+ doclist.current_folder_name+\u0027\u003c/li\u003e\u0027)\r\n\t\t\t\t\t.appendTo(doclist.breadcrumb);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n"}],"user_settings":"{}"}