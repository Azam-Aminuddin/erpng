{"docs":[{"allow_copy":0,"allow_import":1,"allow_rename":0,"autoname":"AR.####","beta":0,"creation":"2013-01-10 16:34:22","custom":0,"docstatus":0,"doctype":"DocType","document_type":"Setup","editable_grid":0,"fields":[{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"transaction","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":1,"label":"Transaction","length":0,"no_copy":0,"oldfieldname":"transaction","oldfieldtype":"Select","options":"\nSales Order\nPurchase Order\nQuotation\nDelivery Note\nSales Invoice\nPurchase Invoice\nPurchase Receipt\nAppraisal","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1lt5fh5itd","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"based_on","fieldtype":"Select","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":1,"label":"Based On","length":0,"no_copy":0,"oldfieldname":"based_on","oldfieldtype":"Select","options":"\nGrand Total\nAverage Discount\nCustomerwise Discount\nItemwise Discount\nNot Applicable","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":1,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"j2h5t09gk","docstatus":0,"idx":1,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"customer_or_item","fieldtype":"Select","hidden":1,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Customer or Item","length":0,"no_copy":0,"options":"Customer\nItem","permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":1,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3s9a1aaobo","docstatus":0,"idx":2,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"master_name","fieldtype":"Dynamic Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Customer / Item Name","length":0,"no_copy":0,"oldfieldname":"master_name","oldfieldtype":"Link","options":"customer_or_item","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"51chs7gb06","docstatus":0,"idx":3,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_3","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7v354jt8jj","docstatus":0,"idx":4,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"company","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":0,"label":"Company","length":0,"no_copy":0,"oldfieldname":"company","oldfieldtype":"Link","options":"Company","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":1,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"3vmk64tn5s","docstatus":0,"idx":5,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_17","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2ifi9juk99","docstatus":0,"idx":6,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"value","fieldtype":"Float","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Authorized Value","length":0,"no_copy":0,"oldfieldname":"value","oldfieldtype":"Currency","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5d053ldk81","docstatus":0,"idx":7,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_7","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"5us6j8at1c","docstatus":0,"idx":8,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"system_role","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":1,"in_standard_filter":1,"label":"Applicable To (Role)","length":0,"no_copy":0,"oldfieldname":"system_role","oldfieldtype":"Link","options":"Role","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1dkhf8bvvo","docstatus":0,"idx":9,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"to_emp","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Applicable To (Employee)","length":0,"no_copy":0,"oldfieldname":"to_emp","oldfieldtype":"Link","options":"Employee","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"7o7v3p2rjs","docstatus":0,"idx":10,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_10","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"276kga50i1","docstatus":0,"idx":11,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"system_user","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Applicable To (User)","length":0,"no_copy":0,"oldfieldname":"system_user","oldfieldtype":"Link","options":"User","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"2huf96jptl","docstatus":0,"idx":12,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"description":"","fieldname":"to_designation","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Applicable To (Designation)","length":0,"no_copy":0,"oldfieldname":"to_designation","oldfieldtype":"Link","options":"Designation","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"17le65i5g8","docstatus":0,"idx":13,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"section_break_13","fieldtype":"Section Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6kfu5lmqjm","docstatus":0,"idx":14,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"approving_role","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Approving Role (above authorized value)","length":0,"no_copy":0,"oldfieldname":"approving_role","oldfieldtype":"Link","options":"Role","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"1dgrmfm4ge","docstatus":0,"idx":15,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"column_break_15","fieldtype":"Column Break","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"length":0,"no_copy":0,"permlevel":0,"precision":"","print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"6olqb3f2k1","docstatus":0,"idx":16,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"},{"allow_on_submit":0,"bold":0,"collapsible":0,"columns":0,"fieldname":"approving_user","fieldtype":"Link","hidden":0,"ignore_user_permissions":0,"ignore_xss_filter":0,"in_filter":0,"in_global_search":0,"in_list_view":0,"in_standard_filter":0,"label":"Approving User  (above authorized value)","length":0,"no_copy":0,"oldfieldname":"approving_user","oldfieldtype":"Link","options":"User","permlevel":0,"print_hide":0,"print_hide_if_no_value":0,"read_only":0,"remember_last_selected_value":0,"report_hide":0,"reqd":0,"search_index":0,"set_only_once":0,"unique":0,"doctype":"DocField","name":"670sl773l7","docstatus":0,"idx":17,"parenttype":"DocType","parentfield":"fields","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"hide_heading":0,"hide_toolbar":0,"icon":"fa fa-shield","idx":1.0,"image_view":0,"in_create":0,"in_dialog":0.0,"is_submittable":0,"issingle":0,"istable":0,"max_attachments":0,"modified":"2017-02-20 13:25:52.751381","modified_by":"Administrator","module":"Setup","name":"Authorization Rule","owner":"Administrator","permissions":[{"amend":0.0,"apply_user_permissions":0.0,"cancel":0.0,"create":1.0,"delete":1.0,"email":1.0,"export":0.0,"if_owner":0.0,"import":0.0,"permlevel":0.0,"print":1.0,"read":1.0,"report":1.0,"role":"System Manager","set_user_permissions":0.0,"share":1.0,"submit":0.0,"write":1.0,"doctype":"DocPerm","name":"7sa7f3hoed","docstatus":0,"idx":0,"parenttype":"DocType","parentfield":"permissions","parent":"Authorization Rule","owner":"Administrator","modified_by":"Administrator","creation":"2017-10-26 17:58:36.008","modified":"2017-10-26 17:58:36.008"}],"quick_entry":0,"read_only":0,"read_only_onload":0,"search_fields":"transaction,based_on,system_user,system_role,approving_user,approving_role","show_name_in_global_search":1,"sort_order":"DESC","track_changes":0,"track_seen":0,"__js":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.ui.form.on(\"Authorization Rule\", {\r\n\trefresh: function(frm) {\r\n\t\tfrm.events.set_master_type(frm);\r\n\t},\r\n\tset_master_type: function(frm) {\r\n\t\tif(frm.doc.based_on\u003d\u003d\u003d\"Customerwise Discount\") {\r\n\t\t\tunhide_field(\"master_name\");\r\n\t\t\tfrm.set_value(\"customer_or_item\", \"Customer\");\r\n\t\t} else if(frm.doc.based_on\u003d\u003d\u003d\"Itemwise Discount\") {\r\n\t\t\tunhide_field(\"master_name\");\r\n\t\t\tfrm.set_value(\"customer_or_item\", \"Item\");\r\n\t\t} else {\r\n\t\t\tfrm.set_value(\"customer_or_item\", \"\");\r\n\t\t\tfrm.set_value(\"master_name\", \"\");\r\n\t\t\thide_field(\"master_name\");\r\n\t\t}\r\n\t},\r\n\tbased_on: function(frm) {\r\n\t\tfrm.events.set_master_type(frm);\r\n\t\tif (frm.doc.based_on \u003d\u003d\u003d \u0027Not Applicable\u0027) {\r\n\t\t\tfrm.set_value(\"value\", 0);\r\n\t\t\thide_field(\u0027value\u0027);\r\n\t\t} else {\r\n\t\t\tunhide_field(\u0027value\u0027);\r\n\t\t}\r\n\t},\r\n\ttransaction: function(frm) {\r\n\t\tif (frm.doc.transaction \u003d\u003d \u0027Appraisal\u0027) {\r\n\t\t\tfrm.set_value(\"based_on\", \"Not Applicable\");\r\n\t\t\tfrm.set_value(\"master_name\", \"\");\r\n\t\t\tfrm.set_value(\"system_role\", \"\");\r\n\t\t\tfrm.set_value(\"system_user\", \"\");\r\n\t\t\tfrm.set_value(\"value\", 0);\r\n\t\t\thide_field([\u0027based_on\u0027, \u0027system_role\u0027, \u0027system_user\u0027, \u0027value\u0027]);\r\n\t\t\tunhide_field([\u0027to_emp\u0027,\u0027to_designation\u0027]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tunhide_field([\u0027system_role\u0027, \u0027system_user\u0027,\u0027value\u0027, \u0027based_on\u0027]);\r\n\t\t\thide_field([\u0027to_emp\u0027,\u0027to_designation\u0027]);\r\n\t\t}\r\n\t}\r\n})\r\n\r\n\r\n// Settings Module\r\ncur_frm.cscript.refresh \u003d function(doc, cdt, cdn) {\r\n\tif (doc.based_on \u003d\u003d \u0027Not Applicable\u0027)\r\n\t\thide_field(\u0027value\u0027);\r\n\telse\r\n\t\tunhide_field(\u0027value\u0027);\r\n\r\n\tif (doc.transaction \u003d\u003d \u0027Appraisal\u0027) {\r\n\t\thide_field([\u0027system_role\u0027, \u0027system_user\u0027]);\r\n\t\tunhide_field([\u0027to_emp\u0027,\u0027to_designation\u0027]);\r\n\r\n\t\tif (doc.transaction \u003d\u003d \u0027Appraisal\u0027)\r\n\t\t\thide_field(\u0027value\u0027);\r\n\t\telse\r\n\t\t\tunhide_field(\u0027value\u0027);\r\n\t}\r\n\telse {\r\n\t\tunhide_field([\u0027system_role\u0027, \u0027system_user\u0027,\u0027value\u0027]);\r\n\t\thide_field([\u0027to_emp\u0027,\u0027to_designation\u0027]);\r\n\t}\r\n}\r\n\r\ncur_frm.fields_dict.system_user.get_query \u003d function(doc, cdt, cdn) {\r\n\treturn { query:\"frappe.core.doctype.user.user.user_query\" }\r\n}\r\n\r\ncur_frm.fields_dict.approving_user.get_query \u003d function(doc, cdt, cdn) {\r\n\treturn { query:\"frappe.core.doctype.user.user.user_query\" }\r\n}\r\n\r\ncur_frm.fields_dict[\u0027approving_role\u0027].get_query \u003d cur_frm.fields_dict[\u0027system_role\u0027].get_query;\r\n\r\n// System Role Trigger\r\n// -----------------------\r\ncur_frm.fields_dict[\u0027system_role\u0027].get_query \u003d function(doc) {\r\n\treturn {\r\n\t\tfilters:[\r\n\t\t\t[\u0027Role\u0027, \u0027name\u0027, \u0027not in\u0027, \u0027Administrator, Guest, All\u0027]\r\n\t\t]\r\n\t}\r\n}\r\n\r\n\r\n// Master Name Trigger\r\n// --------------------\r\ncur_frm.fields_dict[\u0027master_name\u0027].get_query \u003d function(doc) {\r\n\tif (doc.based_on \u003d\u003d \u0027Customerwise Discount\u0027)\r\n\t\treturn {\r\n\t\t\tdoctype: \"Customer\",\r\n\t\t\tfilters:[\r\n\t\t\t\t[\u0027Customer\u0027, \u0027docstatus\u0027, \u0027!\u003d\u0027, 2]\r\n\t\t\t]\r\n\t\t}\r\n\telse if (doc.based_on \u003d\u003d \u0027Itemwise Discount\u0027)\r\n\t\treturn {\r\n\t\t\tdoctype: \"Item\",\r\n\t\t\tquery: \"erpnext.controllers.queries.item_query\"\r\n\t\t}\r\n\telse\r\n\t\treturn {\r\n\t\t\tfilters: [\r\n\t\t\t\t[\u0027Item\u0027, \u0027name\u0027, \u0027\u003d\u0027, \u0027cheating done to avoid null\u0027]\r\n\t\t\t]\r\n\t\t}\r\n}\r\n\r\ncur_frm.fields_dict.to_emp.get_query \u003d function(doc, cdt, cdn) {\r\n\treturn { query: \"erpnext.controllers.queries.employee_query\" }\r\n}\r\n"}],"user_settings":"{}"}