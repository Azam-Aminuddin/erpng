{"message":{"script":"// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\r\n// License: GNU General Public License v3. See license.txt\r\n\r\nfrappe.query_reports[\"General Ledger\"] \u003d {\r\n\t\"filters\": [\r\n\t\t{\r\n\t\t\t\"fieldname\":\"company\",\r\n\t\t\t\"label\": __(\"Company\"),\r\n\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\"options\": \"Company\",\r\n\t\t\t\"default\": frappe.defaults.get_user_default(\"Company\"),\r\n\t\t\t\"reqd\": 1\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"from_date\",\r\n\t\t\t\"label\": __(\"From Date\"),\r\n\t\t\t\"fieldtype\": \"Date\",\r\n\t\t\t\"default\": frappe.datetime.add_months(frappe.datetime.get_today(), -1),\r\n\t\t\t\"reqd\": 1,\r\n\t\t\t\"width\": \"60px\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"to_date\",\r\n\t\t\t\"label\": __(\"To Date\"),\r\n\t\t\t\"fieldtype\": \"Date\",\r\n\t\t\t\"default\": frappe.datetime.get_today(),\r\n\t\t\t\"reqd\": 1,\r\n\t\t\t\"width\": \"60px\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"account\",\r\n\t\t\t\"label\": __(\"Account\"),\r\n\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\"options\": \"Account\",\r\n\t\t\t\"get_query\": function() {\r\n\t\t\t\tvar company \u003d frappe.query_report_filters_by_name.company.get_value();\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"doctype\": \"Account\",\r\n\t\t\t\t\t\"filters\": {\r\n\t\t\t\t\t\t\"company\": company,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"voucher_no\",\r\n\t\t\t\"label\": __(\"Voucher No\"),\r\n\t\t\t\"fieldtype\": \"Data\",\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"project\",\r\n\t\t\t\"label\": __(\"Project\"),\r\n\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\"options\": \"Project\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldtype\": \"Break\",\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"party_type\",\r\n\t\t\t\"label\": __(\"Party Type\"),\r\n\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\"options\": \"Party Type\",\r\n\t\t\t\"default\": \"\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"party\",\r\n\t\t\t\"label\": __(\"Party\"),\r\n\t\t\t\"fieldtype\": \"Dynamic Link\",\r\n\t\t\t\"get_options\": function() {\r\n\t\t\t\tvar party_type \u003d frappe.query_report_filters_by_name.party_type.get_value();\r\n\t\t\t\tvar party \u003d frappe.query_report_filters_by_name.party.get_value();\r\n\t\t\t\tif(party \u0026\u0026 !party_type) {\r\n\t\t\t\t\tfrappe.throw(__(\"Please select Party Type first\"));\r\n\t\t\t\t}\r\n\t\t\t\treturn party_type;\r\n\t\t\t},\r\n\t\t\ton_change: function() {\r\n\t\t\t\tvar party_type \u003d frappe.query_report_filters_by_name.party_type.get_value();\r\n\t\t\t\tvar party \u003d frappe.query_report_filters_by_name.party.get_value();\r\n\t\t\t\tif(!party_type || !party) {\r\n\t\t\t\t\tfrappe.query_report_filters_by_name.party_name.set_value(\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar fieldname \u003d party_type.toLowerCase() + \"_name\";\r\n\t\t\t\tfrappe.db.get_value(party_type, party, fieldname, function(value) {\r\n\t\t\t\t\tfrappe.query_report_filters_by_name.party_name.set_value(value[fieldname]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"party_name\",\r\n\t\t\t\"label\": __(\"Party Name\"),\r\n\t\t\t\"fieldtype\": \"Data\",\r\n\t\t\t\"hidden\": 1\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"group_by_voucher\",\r\n\t\t\t\"label\": __(\"Group by Voucher\"),\r\n\t\t\t\"fieldtype\": \"Check\",\r\n\t\t\t\"default\": 1\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"group_by_account\",\r\n\t\t\t\"label\": __(\"Group by Account\"),\r\n\t\t\t\"fieldtype\": \"Check\",\r\n\t\t}\r\n\t]\r\n}\r\n","html_format":"\u003ch2 class\u003d\"text-center\"\u003e{%\u003d __(\"Statement of Account\") %}\u003c/h2\u003e\r\n\u003ch4 class\u003d\"text-center\"\u003e\r\n\t{% if (filters.party_name) { %}\r\n\t\t{%\u003d filters.party_name %}\r\n\t{% } else if (filters.party) { %}\r\n\t\t{%\u003d filters.party %}\r\n\t{% } else if (filters.account) { %}\r\n\t\t{%\u003d filters.account %}\r\n\t{% } %}\r\n\u003c/h4\u003e\r\n\u003ch5 class\u003d\"text-center\"\u003e\r\n\t{%\u003d dateutil.str_to_user(filters.from_date) %}\r\n\t{%\u003d __(\"to\") %}\r\n\t{%\u003d dateutil.str_to_user(filters.to_date) %}\r\n\u003c/h5\u003e\r\n\u003chr\u003e\r\n\u003ctable class\u003d\"table table-bordered\"\u003e\r\n\t\u003cthead\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003cth style\u003d\"width: 15%\"\u003e{%\u003d __(\"Date\") %}\u003c/th\u003e\r\n\t\t\t\u003cth style\u003d\"width: 15%\"\u003e{%\u003d __(\"Ref\") %}\u003c/th\u003e\r\n\t\t\t\u003cth style\u003d\"width: 40%\"\u003e{%\u003d __(\"Party\") %}\u003c/th\u003e\r\n\t\t\t\u003cth style\u003d\"width: 15%\"\u003e{%\u003d __(\"Debit\") %}\u003c/th\u003e\r\n\t\t\t\u003cth style\u003d\"width: 15%\"\u003e{%\u003d __(\"Credit\") %}\u003c/th\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/thead\u003e\r\n\t\u003ctbody\u003e\r\n\t\t{% for(var i\u003d0, l\u003ddata.length; i\u003cl; i++) { %}\r\n\t\t\t\u003ctr\u003e\r\n\t\t\t{% if(data[i][__(\"Posting Date\")]) { %}\r\n\t\t\t\t\u003ctd\u003e{%\u003d dateutil.str_to_user(data[i][__(\"Posting Date\")]) %}\u003c/td\u003e\r\n\t\t\t\t\u003ctd\u003e{%\u003d data[i][__(\"Voucher Type\")] %}\r\n\t\t\t\t\t\u003cbr\u003e{%\u003d data[i][__(\"Voucher No\")] %}\u003c/td\u003e\r\n\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t{% if(!(filters.party || filters.account)) { %}\r\n\t\t\t\t\t\t{%\u003d data[i][__(\"Party\")] || data[i][__(\"Account\")] %}\r\n\t\t\t\t\t\t\u003cbr\u003e\r\n\t\t\t\t\t{% } %}\r\n\r\n\t\t\t\t\t{{ __(\"Against\") }}: {%\u003d data[i][__(\"Against Account\")] %}\r\n\t\t\t\t\t\u003cbr\u003e{%\u003d __(\"Remarks\") %}: {%\u003d data[i][__(\"Remarks\")] %}\u003c/td\u003e\r\n\t\t\t\t\u003ctd style\u003d\"text-align: right\"\u003e{%\u003d format_currency(data[i][__(\"Debit\")]) %}\u003c/td\u003e\r\n\t\t\t\t\u003ctd style\u003d\"text-align: right\"\u003e{%\u003d format_currency(data[i][__(\"Credit\")]) %}\u003c/td\u003e\r\n\t\t\t{% } else { %}\r\n\t\t\t\t\u003ctd\u003e\u003c/td\u003e\r\n\t\t\t\t\u003ctd\u003e\u003c/td\u003e\r\n\t\t\t\t\u003ctd\u003e\u003cb\u003e{%\u003d frappe.format(data[i][__(\"Account\")], {fieldtype: \"Link\"}) || \"\u0026nbsp;\" %}\u003c/b\u003e\u003c/td\u003e\r\n\t\t\t\t\u003ctd style\u003d\"text-align: right\"\u003e\r\n\t\t\t\t\t{%\u003d data[i][__(\"Account\")] \u0026\u0026 format_currency(data[i][__(\"Debit\")]) %}\u003c/td\u003e\r\n\t\t\t\t\u003ctd style\u003d\"text-align: right\"\u003e\r\n\t\t\t\t\t{%\u003d data[i][__(\"Account\")] \u0026\u0026 format_currency(data[i][__(\"Credit\")]) %}\u003c/td\u003e\r\n\t\t\t{% } %}\r\n\t\t\t\u003c/tr\u003e\r\n\t\t{% } %}\r\n\t\u003c/tbody\u003e\r\n\u003c/table\u003e\r\n\u003cp class\u003d\"text-right text-muted\"\u003ePrinted On {%\u003d dateutil.str_to_user(dateutil.get_datetime_as_string()) %}\u003c/p\u003e\r\n"}}