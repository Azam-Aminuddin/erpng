{"message":{"script":"// Copyright (c) 2016, Frappe Technologies Pvt. Ltd. and contributors\r\n// For license information, please see license.txt\r\n\r\nfrappe.query_reports[\"Feedback Ratings\"] \u003d {\r\n\t\"filters\": [\r\n\t\t{\r\n\t\t\t\"fieldname\": \"document_type\",\r\n\t\t\t\"label\": __(\"Document Type\"),\r\n\t\t\t\"fieldtype\": \"Link\",\r\n\t\t\t\"options\": \"DocType\",\r\n\t\t\t\"reqd\": 1,\r\n\t\t\t\"default\": \"Issue\",\r\n\t\t\t\"get_query\": function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"query\": \"frappe.core.report.feedback_ratings.feedback_ratings.get_document_type\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\": \"document_id\",\r\n\t\t\t\"label\": __(\"Document ID\"),\r\n\t\t\t\"fieldtype\": \"Dynamic Link\",\r\n\t\t\t\"get_options\": function() {\r\n\t\t\t\tvar document_type \u003d frappe.query_report_filters_by_name.document_type.get_value();\r\n\t\t\t\tif(!document_type) {\r\n\t\t\t\t\tfrappe.throw(__(\"Please select Document Type first\"));\r\n\t\t\t\t}\r\n\t\t\t\treturn document_type;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ \r\n\t\t\t\"fieldname\":\"from_date\",\r\n\t\t\t\"label\": __(\"From Date\"),\r\n\t\t\t\"fieldtype\": \"Date\",\r\n\t\t\t\u0027reqd\u0027: 1,\r\n\t\t\t\"default\": frappe.datetime.add_days(frappe.datetime.nowdate(), -30)\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"fieldname\":\"to_date\",\r\n\t\t\t\"label\": __(\"To Date\"),\r\n\t\t\t\"fieldtype\": \"Date\",\r\n\t\t\t\u0027reqd\u0027: 1,\r\n\t\t\t\"default\":frappe.datetime.nowdate()\r\n\t\t}\r\n\t],\r\n\r\n\tget_chart_data: function(columns, result) {\r\n\t\treturn {\r\n\t\t\tdata: {\r\n\t\t\t\tx: \u0027Date\u0027,\r\n\t\t\t\tcolumns: [\r\n\t\t\t\t\t[\u0027Date\u0027].concat($.map(result, function(d) { return d[0]; })),\r\n\t\t\t\t\t[\u0027Average Feedback\u0027].concat($.map(result, function(d) { return d[1]; }))\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tchart_type: \u0027line\u0027,\r\n\r\n\t\t}\r\n\t}\r\n}\r\n","html_format":null}}